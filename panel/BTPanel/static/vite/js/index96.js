import{b1 as e,n as a,_ as t,cf as s,B as o,a as i,k as l,e as n}from"./index.js?v=1720690738171";import{o as p,g as r,a as c}from"./index25.js?v=1720690738171";import{i as m}from"./useAccount.js?v=1720690738171";import{l as d,d as u,r as v,S as y,Z as f,_ as A,a3 as g,W as h,F as x,ag as b,U as w,P as j,V as P,q as C,b as L,a5 as E,a6 as S,H as B,ae as T}from"./vue.js?v=1720690738171";import{_ as N}from"./Select.js?v=1720690738171";import{_ as V}from"./Checkbox.js?v=1720690738171";import{e as k,c as q}from"./DataTable.js?v=1720690738171";import{_ as I}from"./Alert.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./useLoop.js?v=1720690738171";import"./useTableColumns.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./index42.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Countdown.js?v=1720690738171";import"./use-theme-vars.js?v=1720690738171";import"./useTableData.js?v=1720690738171";import"./Skeleton.js?v=1720690738171";import"./useLoading.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1720690738171";import"./index72.js?v=1720690738171";import"./data.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang9.js?v=1720690738171";import"./Tabs.js?v=1720690738171";import"./omit.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./Ellipsis.js?v=1720690738171";const R=e=>(E("data-v-3094a22b"),e=e(),S(),e),D={class:"recommend-item"},M={class:"recommend-title"},Q={class:"content"},_={class:"soft-list"},H={key:0,class:"flex-center w-32px"},U=["src"],F={class:"flex items-center my-20px"},W=R((()=>A("span",{class:"mr-10px"},"Method: ",-1))),Y=R((()=>A("div",{class:"w-280px"}," i.e. rpm, installed in a very short time (5~10 minutes), with performance and stability a bit lower than compiled ",-1))),Z=R((()=>A("div",{class:"w-280px"}," installed in a long time (30minutes to 3 hours), suitable for production environment ",-1))),J={class:"flex justify-center"},K=i(d({__name:"item",props:{data:{},memTotal:{default:0}},emits:["close"],setup(i,{emit:l}){const n=i,r=l,c=e(),d=u((()=>n.data)),E=u((()=>n.memTotal)),S=v((()=>{const{soft:e}=d.value,a={};return e.forEach((e=>{a[e.type]={value:e.value,checked:!0},"DNS-Server"!==e.type&&"Mail-Server"!==e.type||(a[e.type].checked=!1)})),a})()),B=v(1),T=new Map([["5.1",{max:256,rec:512}],["5.5",{max:600,rec:1024}],["5.6",{max:800,rec:1024}],["5.7",{max:1500,rec:2048}],["8.0",{max:5e3,rec:6144}],["AliSQL",{max:800,rec:1024}],["mariadb_10.0",{max:800,rec:1024}],["mariadb_10.1",{max:1500,rec:2048}]]),I=new Map([["5.2","4.0"],["5.3","4.0"],["5.4","4.4"],["5.5","4.4"]]),R={mysql:e=>{const t=T.get(e),s=(null==t?void 0:t.max)||0,o=(null==t?void 0:t.rec)||0;if(E.value<s){const t="Your RAM is less than ".concat(o/1024,"GB, NOT recommended to install MySQL-").concat(e);a.error(t)}},apache:e=>{"2.2"==e?a.info("Selected Apache 2.2, PHP will run in php5_module mode!"):a.info("Selected Apache 2.4, PHP will run in php-fpm mode!")},php:e=>{if("lnmp"===d.value.type){const a=I.get(e)||"4.9";S.value.phpMyAdmin.value=a}if("lamp"===d.value.type){const t=e;"2.2"==S.value.Apache.value?"5.2"!=t&&"5.3"!=t&&"5.4"!=t&&(a.error("Apache 2.2 NOT support PHP-".concat(t)),S.value.PHP.value="5.4"):"5.2"==t&&(a.error("Apache 2.4 NOT support PHP-".concat(t)),S.value.PHP.value="5.4")}}},K=async()=>{const e=a.loading("Adding to installer...");try{const e=(()=>{const e=[];return Object.entries(S.value).forEach((([a,t])=>{if(t.checked){let s=a.toLowerCase();"pure-ftpd"===s&&(s="pureftpd"),"php"===s&&(s="php-"+t.value),"dns-server"===s&&(s="dns_manager"),"mail-server"===s&&(s="mail_sys"),e.push({sName:s,version:"".concat(t.value),type:B.value,id:"lnmp"===d.value.type?50:41})}})),e})();for(let a=0;a<e.length;a++)await m(e[a]);a.success("Request of installation added to installer"),c.getConfigSimple(),r("close"),p()}finally{e.close()}};return(e,a)=>{const i=t,l=N,n=V,p=k,r=s,c=q,m=o;return y(),f("div",D,[A("div",M,g(h(d).title),1),A("div",Q,[A("ul",_,[(y(!0),f(x,null,b(h(d).soft,(e=>(y(),f("li",{key:e.type},["mail"===e.icon||"dns"===e.icon?(y(),f("div",H,[A("img",{class:"w-20px",src:"mail"===e.icon?h("/static/vite/images/mail-server.png"):h("data:image/png;base64,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"),alt:""},null,8,U)])):(y(),w(i,{key:1,name:"soft-".concat(e.icon),size:"32"},null,8,["name"])),j(l,{value:h(S)[e.type].value,"onUpdate:value":[a=>h(S)[e.type].value=a,a=>((e,a)=>{e=e.toLowerCase();const t=R[e];null==t||t(a)})(e.type,a)],class:"flex-1 ml-10px mr-20px",options:e.options},null,8,["value","onUpdate:value","options"]),j(n,{checked:h(S)[e.type].checked,"onUpdate:checked":a=>h(S)[e.type].checked=a},null,8,["checked","onUpdate:checked"])])))),128))]),A("div",F,[W,j(c,{value:h(B),"onUpdate:value":a[0]||(a[0]=e=>L(B)?B.value=e:null)},{default:P((()=>[j(r,{trigger:"hover"},{trigger:P((()=>[j(p,{value:1},{default:P((()=>[C("Fast")])),_:1})])),default:P((()=>[Y])),_:1}),j(r,{trigger:"hover"},{trigger:P((()=>[j(p,{value:0},{default:P((()=>[C("Compiled")])),_:1})])),default:P((()=>[Z])),_:1})])),_:1},8,["value"])]),A("div",J,[j(m,{type:"primary",onClick:K},{default:P((()=>[C("One-click")])),_:1})])])])}}}),[["__scopeId","data-v-3094a22b"]]),O=e=>(E("data-v-518a5f04"),e=e(),S(),e),z={class:"w-680px p-20px"},X=O((()=>A("span",null," Recommended to use the following one-click packages, please choose on demand or in ",-1))),G=O((()=>A("span",null," choose by yourself, recommended to install LEMP.",-1))),$={class:"recommend-list"},ee=i(d({__name:"index",props:{data:{}},emits:["close"],setup(e,{expose:a,emit:t}){const s=e,o=t,{memTotal:i}=s.data,p=B([]),m=[{type:"lnmp",title:"LNMP (Recommended)",soft:[{type:"Nginx",icon:"nginx",value:void 0,options:[]},{type:"MySQL",icon:"mysql",value:void 0,options:[]},{type:"PHP",icon:"php",value:void 0,options:[]},{type:"Pure-Ftpd",icon:"pure-ftpd",value:void 0,options:[]},{type:"phpMyAdmin",icon:"phpmyadmin",value:void 0,options:[]},{type:"DNS-Server",icon:"dns",value:void 0,options:[]},{type:"Mail-Server",icon:"mail",value:void 0,options:[]}]},{type:"lamp",title:"LAMP",soft:[{type:"Apache",icon:"apache",value:void 0,options:[]},{type:"MySQL",icon:"mysql",value:void 0,options:[]},{type:"PHP",icon:"php",value:void 0,options:[]},{type:"Pure-Ftpd",icon:"pure-ftpd",value:void 0,options:[]},{type:"phpMyAdmin",icon:"phpmyadmin",value:void 0,options:[]},{type:"DNS-Server",icon:"dns",value:void 0,options:[]},{type:"Mail-Server",icon:"mail",value:void 0,options:[]}]}],d=T(),u=()=>{d.push("/soft")},v=()=>{o("close")};(async()=>{const{message:e}=await r();l(e)&&e.forEach((e=>{const{name:a}=e;if("Tomcat"===a)return;let t;const s=[];e.versions.forEach((({version:e})=>{(!t&&("PHP"===a&&"8.3"===e)||"MySQL"===a&&"5.7"===e||"phpMyAdmin"===a&&"5.2"===e)&&(t=e),s.push({label:"".concat(a," ").concat(e),value:e})})),!t&&s.length>0&&(t=s[0].value),m.forEach((e=>{for(let o=0;o<e.soft.length;o++)if(e.soft[o].type===a){e.soft[o].value=t,e.soft[o].options=s;break}})),p.value=m}))})();return a({onClose:()=>{c()}}),(e,a)=>{const t=n,s=I;return y(),f("div",z,[j(s,{class:"mb-16px",type:"warning"},{default:P((()=>[X,j(t,{onClick:u},{default:P((()=>[C("Software Store")])),_:1}),G])),_:1}),A("div",$,[(y(!0),f(x,null,b(h(p),(e=>(y(),w(K,{key:e.type,data:e,"mem-total":h(i),onClose:v},null,8,["data","mem-total"])))),128))])])}}}),[["__scopeId","data-v-518a5f04"]]);export{ee as default};
