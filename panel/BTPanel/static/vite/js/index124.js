import{cv as e,j as t,n as a,k as s,e as r,G as l,B as i,a9 as n,q as p}from"./index.js?v=1720690738171";import{_ as o,a as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import{_ as m}from"./index53.js?v=1720690738171";import{bf as c,bg as _}from"./site2.js?v=1720690738171";import{u as v}from"./index108.js?v=1720690738171";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1720690738171";import{s as f}from"./file2.js?v=1720690738171";import{u as j}from"./uniq.js?v=1720690738171";import{l as x,r as h,f as g,x as w,S as b,Z as y,P as C,V as k,_ as S,W as T,b as U,q,t as P}from"./vue.js?v=1720690738171";import{_ as I}from"./Select.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./index111.js?v=1720690738171";import"./Tabs.js?v=1720690738171";import"./omit.js?v=1720690738171";import"./Ellipsis.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import"./useTableColumns.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171";import"./Checkbox.js?v=1720690738171";import"./useTableData.js?v=1720690738171";import"./Skeleton.js?v=1720690738171";import"./DataTable.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./index85.js?v=1720690738171";import"./use-theme-vars.js?v=1720690738171";import"./useLoading.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang10.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1720690738171";import"./InputGroupLabel.js?v=1720690738171";import"./InputGroup.js?v=1720690738171";import"./index57.js?v=1720690738171";import"./index49.js?v=1720690738171";import"./form.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import"./useAccount.js?v=1720690738171";import"./php.js?v=1720690738171";import"./Space.js?v=1720690738171";import"./index112.js?v=1720690738171";import"./Spin.js?v=1720690738171";import"./_baseUniq.js?v=1720690738171";import"./_baseFindIndex.js?v=1720690738171";import"./Tag.js?v=1720690738171";const G={class:"w-160px"},R=S("span",null,"Rewrite rule converter: ",-1),A=S("li",null,"Please select your application.",-1),D=S("li",null," If the site cannot be accessed after the rewrite rules set, please try to reset to default. ",-1),E=S("li",null,"You are able to modify rewrite rules, just save it after modification.",-1),L={class:"w-380px px-20px pt-24px pb-8px"},N={class:"w-180px"},B=x({__name:"index",setup(x,{expose:B}){const{data:F}=v(),V=e(),W=h(null),Y=h(null),Z=h([]),z=h("");let H="";const J=e=>{var t;z.value=K(e),null==(t=W.value)||t.getContent()},K=e=>{const{webserver:t}=V;if("0.Current"===e)return"apache"===t||"openlitespeed"===t?"".concat(H,"/.htaccess"):"/www/server/panel/vhost/rewrite/".concat(F.name,".conf");return"/www/server/panel/rewrite/".concat("openlitespeed"===t?"apache":t,"/").concat(Y.value,".conf")},M=async()=>{const e=K("0.Current"),{message:s}=await f({path:e,data:$.data,encoding:"utf-8"});t(s)&&a.success(s.msg);const r=Z.value[0].value;Y.value=r,J(r)},O=h(!1),Q=()=>{O.value=!0},X=h(null),$=g({name:"",data:""}),ee={name:{required:!0,trigger:["blur","change"],message:"Please enter the template name"}},te=async({hide:e})=>{var t;await(null==(t=X.value)?void 0:t.validate()),await c(P($)),$.name="",ae(),e()},ae=async()=>{var e;const{message:a}=await _({siteName:F.name});if(t(a)){H=a.sitePath;const e=s(a.rewrite)?a.rewrite:[];Z.value=j(e).map((e=>({label:e,value:e}))),e.length&&(Y.value=e[0],z.value=K(e[0]))}null==(e=W.value)||e.getContent()},se=async()=>{ae()};return w((()=>{se()})),B({init:se}),(e,t)=>{const a=I,s=r,c=l,_=i,v=m,f=n,j=o,x=u,h=p;return b(),y("div",null,[C(c,{class:"items-center mb-12px"},{default:k((()=>[S("div",G,[C(a,{value:T(Y),"onUpdate:value":[t[0]||(t[0]=e=>U(Y)?Y.value=e:null),J],options:T(Z)},null,8,["value","options"])]),S("div",null,[R,C(s,{href:"https://winginx.com/en/htaccess",target:"_blank"},{default:k((()=>[q("Apache to Nginx")])),_:1})])])),_:1}),C(d,{ref_key:"configRef",ref:W,path:T(z),"onUpdate:path":t[1]||(t[1]=e=>U(z)?z.value=e:null),value:T($).data,"onUpdate:value":t[2]||(t[2]=e=>T($).data=e),height:400,"show-tips":!1},null,8,["path","value"]),C(c,{class:"items-center mt-12px"},{default:k((()=>[C(_,{type:"primary",onClick:M},{default:k((()=>[q("Save")])),_:1}),C(_,{onClick:Q},{default:k((()=>[q("Save as template")])),_:1})])),_:1}),C(v,{class:"mt-24px"},{default:k((()=>[A,D,E])),_:1}),C(h,{show:T(O),"onUpdate:show":t[4]||(t[4]=e=>U(O)?O.value=e:null),title:"Save as rewrite template",footer:!0,onConfirm:te},{default:k((()=>[S("div",L,[C(x,{ref_key:"formRef",ref:X,model:T($),rules:ee},{default:k((()=>[C(j,{label:"Template name",path:"name"},{default:k((()=>[S("div",N,[C(f,{value:T($).name,"onUpdate:value":t[3]||(t[3]=e=>T($).name=e),placeholder:"Template name"},null,8,["value"])])])),_:1})])),_:1},8,["model"])])])),_:1},8,["show"])])}}});export{B as default};
