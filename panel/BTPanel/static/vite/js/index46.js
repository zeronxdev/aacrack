import{_ as a,a as s}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import{dd as e,de as t,j as l,z as o,a9 as i}from"./index.js?v=1720690738171";import{l as r,ad as c,r as n,f as p,S as d,U as m,V as u,P as f,_,W as v,af as b,t as x}from"./vue.js?v=1720690738171";import{_ as j}from"./Select.js?v=1720690738171";import{_ as h}from"./useTableColumns.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./Progress.js?v=1720690738171";const w={class:"w-280px"},y={class:"w-280px"},A=r({__name:"index",props:{row:{}},setup(r,{expose:A}){const D=r,{row:g}=D,{t:R}=c(),U=n(null),k=p({dataAccess:"127.0.0.1",access:"127.0.0.1",ssl:""}),E=n([{label:R("Database.form.index_12"),value:"127.0.0.1"},{label:R("Database.form.index_13"),value:"%"},{label:R("Database.form.index_14"),value:"ip"}]),S={host:{trigger:["blur","change"],validator:()=>"ip"!==k.dataAccess||(""!==k.access.trim()||new Error(R("Database.form.index_19")))}},$=a=>{k.access="ip"===a?"":a};return(async()=>{const{message:a}=await t({name:g.name});l(a)&&("127.0.0.1"!==a.permission&&"%"!==a.permission?(k.dataAccess="ip",k.access=a.permission.split(",").join("\n")):(k.dataAccess=a.permission,k.access=a.permission),k.ssl=o(a.ssl)?a.ssl:"")})(),A({onConfirm:async({hide:a})=>{var s;try{await(null==(s=U.value)?void 0:s.validate());const t={...x(k),name:g.name,access:"ip"===k.dataAccess?k.access.trim().split("\n").join(","):k.access};await e(x(t)),a()}catch(t){console.error(t)}}}),(e,t)=>{const l=j,o=a,r=i,c=h,n=s;return d(),m(n,{ref_key:"formRef",ref:U,model:v(k),rules:S,class:"px-20px py-24px"},{default:u((()=>[f(o,{label:e.$t("Database.form.index_6"),path:"listen_ip"},{default:u((()=>[_("div",w,[f(l,{value:v(k).dataAccess,"onUpdate:value":[t[0]||(t[0]=a=>v(k).dataAccess=a),$],options:v(E)},null,8,["value","options"])])])),_:1},8,["label"]),"ip"===v(k).dataAccess?(d(),m(o,{key:0,label:e.$t("Database.form.index_7"),path:"host"},{default:u((()=>[_("div",y,[f(r,{value:v(k).access,"onUpdate:value":t[1]||(t[1]=a=>v(k).access=a),type:"textarea",autosize:{minRows:3,maxRows:3},placeholder:e.$t("Database.form.index_8")},null,8,["value","placeholder"])])])),_:1},8,["label"])):b("",!0),f(o,{label:e.$t("Database.form.index_11"),"show-feedback":!1},{default:u((()=>[f(c,{value:v(k).ssl,"onUpdate:value":t[2]||(t[2]=a=>v(k).ssl=a),"checked-value":"REQUIRE SSL"},null,8,["value"])])),_:1},8,["label"])])),_:1},8,["model"])}}});export{A as default};
