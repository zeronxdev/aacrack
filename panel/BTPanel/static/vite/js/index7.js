const __vite__fileDeps=["js/index51.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171","js/vue.js?v=1720690738171","js/index.js?v=1720690738171","js/pinia.js?v=1720690738171","css/index29.css?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang6.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang7.js?v=1720690738171","js/InputGroupLabel.js?v=1720690738171","js/InputGroup.js?v=1720690738171","js/index48.js?v=1720690738171","js/index49.js?v=1720690738171","css/index8.css?v=1720690738171","js/useAccount.js?v=1720690738171","js/useTableColumns.js?v=1720690738171","js/Progress.js?v=1720690738171","css/useTableColumns.css?v=1720690738171","js/Select.js?v=1720690738171","js/Tag.js?v=1720690738171","js/Empty.js?v=1720690738171"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{u as e,g as a,s as t,o as s,h as o,t as i,w as l,j as n,k as r,m as d,B as p,p as c,q as m,r as u,v as h}from"./index.js?v=1720690738171";import{_}from"./index.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import{_ as y,a as k}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1720690738171";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171";import{u as g,_ as w}from"./useTableData.js?v=1720690738171";import{u as b}from"./useLoading.js?v=1720690738171";import{a as v,b as j}from"./useTableColumns.js?v=1720690738171";import{g as x}from"./hooks.js?v=1720690738171";import{_ as D}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1720690738171";import{P as C,l as S,f as R,w as B,S as U,U as L,V as P,_ as T,q as W,W as A,b as E,a1 as q,t as z}from"./vue.js?v=1720690738171";import{d as G,_ as I,e as K,g as V,u as H,c as N}from"./index48.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./DataTable.js?v=1720690738171";import"./Checkbox.js?v=1720690738171";import"./Ellipsis.js?v=1720690738171";import"./Select.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./omit.js?v=1720690738171";import"./Skeleton.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./index50.js?v=1720690738171";import"./index49.js?v=1720690738171";import"./useAccount.js?v=1720690738171";const O={class:"p-16px"},F=S({__name:"index",setup(S){const F=q((()=>h((()=>import("./index51.js?v=1720690738171")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])))),J=e(),M=a(),Q=()=>{M.show=!0},X=()=>{V()},Y=async()=>{await t(J.type,{ids:[]}),ie()},{keys:Z,table:$,columns:ee}=g([{type:"selection",width:40},{key:"name",title:"Database name",width:"12%",minWidth:120},{key:"username",title:"Username",width:"12%",minWidth:120},{key:"password",title:"Password",minWidth:150,render:e=>C(D,{value:e.password},null)},{key:"sid",title:"Location",width:"12%",minWidth:120,render:e=>x(e)},v({onBlur:async(e,a)=>{await s({id:a.id,ps:e})}}),j({width:100,options:e=>[{label:"CHG PW",onClick:()=>{H(e)}},{label:"Del",onClick:()=>{N([e])}}]})]),ae=[{key:"sync",label:"Sync to Server",onBatch:e=>{o({title:"Batch Sync to Server",content:"Please be cautious, The selected item will be [Sync to Server] after confirmation",onConfirm:async({hide:a})=>{await t(J.type,{ids:e.map((e=>e.id))}),a()}})}},{key:"backup",type:"confirm",label:"DB backup",confirm:{title:"Batch backup database",desc:"Do you continue to operate in batch backup database?",api:e=>i(J.type,{id:e.id},!1),done:()=>{ie()},columns:[{key:"name",title:"Database Name"}]}},{key:"delete",label:"Delete database",onBatch:e=>{N(e)}}],{loading:te,setLoading:se}=b(),oe=R({p:1,limit:10,sid:-1,search:""}),ie=async()=>{try{se(!0);const{message:e}=await l(J.type,(()=>{const e={...z(oe)};return-1===e.sid&&delete e.sid,e})());n(e)?($.data=r(e.data)?e.data:[],$.total=d(e.page)):($.data=[],$.total=0)}finally{Z.value=[],se(!1)}};B((()=>J.isRefresh),(e=>{e&&(J.setRefresh(!1),J.delRemoteId===oe.sid&&(oe.sid=-1),ie())}));return(async()=>{await J.getRemote(),J.install&&ie()})(),(e,a)=>{const t=p,s=c,o=y,i=w,l=f,n=k,r=_,d=m,h=u;return U(),L(A(K),null,{default:P((()=>[C(h,null,{default:P((()=>[T("div",O,[C(r,null,{toolsLeft:P((()=>[C(t,{type:"primary",onClick:Q},{default:P((()=>[W("Add DB")])),_:1}),C(t,{onClick:X},{default:P((()=>[W("Remote DB")])),_:1}),C(s,{class:"mx-0!",vertical:""}),C(t,{onClick:Y},{default:P((()=>[W("Sync all")])),_:1}),C(t,{onClick:A(G)},{default:P((()=>[W("Get DB from server")])),_:1},8,["onClick"])])),toolsRight:P((()=>[C(A(I),{value:A(oe).sid,"onUpdate:value":a[0]||(a[0]=e=>A(oe).sid=e),"store-key":"database-sqlserver-page",onChange:ie},null,8,["value"]),C(o,{value:A(oe).search,"onUpdate:value":a[1]||(a[1]=e=>A(oe).search=e),placeholder:"Database search",onSearch:ie},null,8,["value"])])),table:P((()=>[C(i,{"checked-row-keys":A(Z),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>E(Z)?Z.value=e:null),loading:A(te),data:A($).data,columns:A(ee)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:P((()=>[C(l,{"checked-row-keys":A(Z),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>E(Z)?Z.value=e:null),data:A($).data,options:ae},null,8,["checked-row-keys","data"])])),pageRight:P((()=>[C(n,{page:A(oe).p,"onUpdate:page":a[4]||(a[4]=e=>A(oe).p=e),"page-size":A(oe).limit,"onUpdate:pageSize":a[5]||(a[5]=e=>A(oe).limit=e),"item-count":A($).total,onRefresh:ie},null,8,["page","page-size","item-count"])])),_:1}),C(d,{show:A(M).show,"onUpdate:show":a[6]||(a[6]=e=>A(M).show=e),title:"Add Database",width:540,"min-height":280,footer:!0,component:A(F)},null,8,["show","component"])])])),_:1})])),_:1})}}});export{F as default};
