System.register(["./index-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1720690738171","./useTableData-legacy.js?v=1720690738171","./index-legacy57.js?v=1720690738171","./useLoading-legacy.js?v=1720690738171","./useTableColumns-legacy.js?v=1720690738171","./index-legacy48.js?v=1720690738171","./index-legacy50.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./Ellipsis-legacy.js?v=1720690738171","./capitalize-legacy.js?v=1720690738171","./Tabs-legacy.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./DataTable-legacy.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./Tag-legacy.js?v=1720690738171","./Empty-legacy.js?v=1720690738171","./omit-legacy.js?v=1720690738171","./Skeleton-legacy.js?v=1720690738171","./Progress-legacy.js?v=1720690738171","./index-legacy49.js?v=1720690738171","./useAccount-legacy.js?v=1720690738171"],(function(e,t){"use strict";var a,l,i,d,s,n,o,u,c,r,y,p,g,h,m,w,_,v,x,b,f,k,j,C,R,D,U,E,S,K,L,I,B,T,W,z,A,$,P,q,F,H,V,G,N,Z,J,M,O,Q,X,Y,ee,te,ae;return{setters:[e=>{a=e.n,l=e._,i=e.u,d=e.g,s=e.C,n=e.h,o=e.D,u=e.E,c=e.k,r=e.F,y=e.j,p=e.m,g=e.l,h=e.B,m=e.p,w=e.G,_=e.q,v=e.r,x=e.v},e=>{b=e._},e=>{f=e._,k=e.a},e=>{j=e._},e=>{C=e.u,R=e._},e=>{D=e._},e=>{U=e.u},e=>{E=e.b},e=>{S=e.g,K=e._,L=e.e},e=>{I=e.u},e=>{B=e.l,T=e.S,W=e.Z,z=e._,A=e.P,$=e.V,P=e.q,q=e.a3,F=e.r,H=e.H,V=e.f,G=e.w,N=e.U,Z=e.W,J=e.b,M=e.ag,O=e.F,Q=e.af,X=e.a1,Y=e.t},e=>{ee=e._},e=>{te=e.c},e=>{ae=e.N},null,null,null,null,null,null,null,null,null,null,null],execute:function(){const le={class:"flex"},ie={class:"w-0 flex-1 flex items-center"},de={style:{minWidth:0}},se=B({__name:"index",props:{value:{default:""}},setup(e){const t=e,{toClipboard:i}=I(),d=async()=>{try{await i(`${t.value}`),a.success("Successfully copied")}catch(e){a.success("Copy failure")}};return(e,t)=>{const a=ee,i=l;return T(),W("div",le,[z("div",ie,[z("div",de,[A(a,{class:"max-w-full",tooltip:{width:"trigger",scrollable:!0,contentStyle:{maxHeight:"360px",overflow:"auto"}}},{default:$((()=>[P(q(e.value),1)])),_:1})]),z("button",{class:"reset mx-8px text-15px cursor-pointer text-#333",title:"Copy",onClick:d},[A(i,{name:"common-copy"})])])])}}}),ne={class:"p-16px"},oe={class:"flex flex-wrap justify-between mb-12px"},ue={class:"flex items-center text-warning"},ce=z("span",{class:"ml-4px"},"All current action items are associated with",-1),re=z("div",null,null,-1);e("default",B({__name:"index",setup(e){const a=X((()=>x((()=>t.import("./index-legacy54.js?v=1720690738171")),void 0))),I=X((()=>x((()=>t.import("./index-legacy55.js?v=1720690738171")),void 0))),B=X((()=>x((()=>t.import("./index-legacy56.js?v=1720690738171")),void 0))),q=i(),ee=F(null),le=H([]),ie=d("",{row:void 0,sid:null,dbIdx:0,isEdit:!1}),de=()=>{ie.data.dbIdx=me.db_idx,ie.data.row=void 0,ie.data.sid=ee.value,ie.data.isEdit=!1,ie.title="Add Key",ie.show=!0},ye=d("Redis Backup list",{sid:null}),pe=()=>{ye.data.sid=ee.value,ye.show=!0},ge=d("Example Clear database",{sid:null,databaseList:[]}),he=()=>{ge.data.sid=ee.value,ge.data.databaseList=le.value,ge.show=!0},me=V({db_idx:-1,db_type:0,p:1,limit:20,search:""}),{keys:we,table:_e,columns:ve}=C([{type:"selection",width:40},{key:"name",title:"Key",width:"20%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"val",title:"Value",render:e=>A(se,{value:e.val},null)},{key:"type",title:"Data type",width:"10%",minWidth:100,render:e=>te(e.type)},{key:"len",title:"Data length",width:"10%",minWidth:100},{key:"endtime",title:"Term of validity",width:"10%",minWidth:100,render:e=>0===e.endtime?"Permanent":s(e.endtime)},E({width:100,options:e=>[{label:"Edit",onClick:()=>{(e=>{ie.data.dbIdx=me.db_idx,ie.data.row=e,ie.data.sid=ee.value,ie.data.isEdit=!0,ie.title=`Edit Key [${e.name}]`,ie.show=!0})(e)}},{label:"Del",onClick:()=>{n({title:"Delete the key value",content:`Do you really want to delete [${e.name}]?`,onConfirm:async({hide:t})=>{null!==ee.value&&-1!==me.db_idx&&(await o({sid:ee.value,key:e.name,db_idx:me.db_idx}),1===_e.data.length&&(me.db_idx=-1),Ce(),t())}})}}]})]),xe=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete Key",desc:"Delete selected keys in batches. Do you want to continue?",columns:[{key:"name",title:"Key",ellipsis:{tooltip:{width:"trigger"}}}],api:async e=>{null!==ee.value&&-1!==me.db_idx&&await o({sid:ee.value,key:e.name,db_idx:me.db_idx},!1)},done:e=>{_e.total===e.length&&(me.db_idx=-1),Ce()}}}],be=async()=>{if(null===ee.value)return;const{message:e}=await u({sid:ee.value});c(e)&&e.length>0?(le.value=e,-1===me.db_idx&&(me.db_idx=e[0].id)):(le.value=[],_e.data=[],_e.total=0,me.db_idx=-1)},{loading:fe,setLoading:ke}=U(),je=async()=>{try{ke(!0);const e=ee.value;if(null===e)return;if(le.value.length<=0)return;if(-1===me.db_idx)return;const{message:t}=await r({sid:e,...Y(me)});y(t)?(_e.data=c(t.data)?t.data:[],_e.total=p(t.page)):(_e.data=[],_e.total=0)}finally{we.value=[],ke(!1)}},Ce=async()=>{await be(),await je()};return G((()=>q.isRefresh),(e=>{e&&(q.setRefresh(!1),-1!==q.addRedisId&&q.addRedisId!==me.db_idx&&(me.db_idx=q.addRedisId,q.setAddRedisId(-1)),Ce())})),(async()=>{await q.getRemote(),q.install?(q.remoteList.length>0&&(ee.value=q.remoteList[0].id),await be(),await je()):g()})(),(e,t)=>{const i=h,d=m,s=w,n=l,o=ae,u=D,c=f,r=R,y=j,p=k,g=b,x=_,C=v;return T(),N(Z(L),null,{default:$((()=>[A(C,null,{default:$((()=>[z("div",ne,[z("div",oe,[A(s,{class:"items-center"},{default:$((()=>[A(i,{type:"primary",onClick:de},{default:$((()=>[P("Add Key")])),_:1}),A(i,{onClick:Z(S)},{default:$((()=>[P("Remote DB")])),_:1},8,["onClick"]),A(i,{onClick:pe},{default:$((()=>[P("Backup list")])),_:1}),A(d,{class:"mx-0!",vertical:""}),A(i,{onClick:he},{default:$((()=>[P("Clear DB")])),_:1})])),_:1}),A(s,{class:"items-center"},{default:$((()=>[z("div",ue,[A(n,{name:"base-info",size:"14"}),ce]),A(Z(K),{value:Z(ee),"onUpdate:value":t[0]||(t[0]=e=>J(ee)?ee.value=e:null),all:!1,"store-key":"database-redis-page",onChange:be},null,8,["value"])])),_:1})]),Z(le).length>0?(T(),N(u,{key:0,value:Z(me).db_idx,"onUpdate:value":[t[1]||(t[1]=e=>Z(me).db_idx=e),je]},{default:$((()=>[(T(!0),W(O,null,M(Z(le),(e=>(T(),N(o,{key:e.id,name:e.id,tab:`${e.name}(${e.keynum})`},null,8,["name","tab"])))),128))])),_:1},8,["value"])):Q("",!0),A(g,null,{toolsLeft:$((()=>[re])),toolsRight:$((()=>[A(c,{value:Z(me).search,"onUpdate:value":t[2]||(t[2]=e=>Z(me).search=e),placeholder:"Search key",onSearch:je},null,8,["value"])])),table:$((()=>[A(r,{"checked-row-keys":Z(we),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>J(we)?we.value=e:null),"row-key":"name",loading:Z(fe),data:Z(_e).data,columns:Z(ve)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:$((()=>[A(y,{"checked-row-keys":Z(we),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>J(we)?we.value=e:null),"row-key":"name",data:Z(_e).data,options:xe},null,8,["checked-row-keys","data"])])),pageRight:$((()=>[A(p,{page:Z(me).p,"onUpdate:page":t[5]||(t[5]=e=>Z(me).p=e),"page-size":Z(me).limit,"onUpdate:pageSize":t[6]||(t[6]=e=>Z(me).limit=e),"store-key":"database-redis-page","item-count":Z(_e).total,onRefresh:je},null,8,["page","page-size","item-count"])])),_:1}),A(x,{show:Z(ie).show,"onUpdate:show":t[7]||(t[7]=e=>Z(ie).show=e),title:Z(ie).title,width:420,"min-height":340,footer:!0,data:Z(ie).data,component:Z(a)},null,8,["show","title","data","component"]),A(x,{show:Z(ye).show,"onUpdate:show":t[8]||(t[8]=e=>Z(ye).show=e),title:Z(ye).title,width:920,"min-height":156,footer:!1,data:Z(ye).data,component:Z(I)},null,8,["show","title","data","component"]),A(x,{show:Z(ge).show,"onUpdate:show":t[9]||(t[9]=e=>Z(ge).show=e),title:Z(ge).title,width:420,"min-height":240,footer:!0,data:Z(ge).data,component:Z(B)},null,8,["show","title","data","component"])])])),_:1})])),_:1})}}}))}}}));
