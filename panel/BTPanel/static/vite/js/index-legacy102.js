System.register(["./index-legacy.js?v=1720690738171","./site-legacy2.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1720690738171","./file-legacy2.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./Ellipsis-legacy.js?v=1720690738171","./use-theme-vars-legacy.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./Progress-legacy.js?v=1720690738171","./DataTable-legacy.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./Tag-legacy.js?v=1720690738171","./Empty-legacy.js?v=1720690738171","./omit-legacy.js?v=1720690738171"],(function(e,t){"use strict";var a,l,i,n,s,o,d,r,c,u,p,m,f,v,h,x,g,b,y,w,_,k,j,C,T,D,z,M,S,E,R,P,N,I,$,B,U,V;return{setters:[e=>{a=e.J,l=e.j,i=e._,n=e.b3,s=e.a,o=e.cv,d=e.G,r=e.cC,c=e.H},e=>{u=e.b4,p=e.b5},e=>{m=e.a,f=e._},e=>{v=e.b},e=>{h=e.l,x=e.r,g=e.k,b=e.S,y=e.Z,w=e._,_=e.P,k=e.F,j=e.ag,C=e.V,T=e.q,D=e.a3,z=e.W,M=e.af,S=e.aj,E=e.a5,R=e.a6,P=e.b,N=e.$,I=e.ay},e=>{$=e._},e=>{B=e.u},e=>{U=e._,V=e.a},null,null,null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".site-content[data-v-cdf052c1]{height:300px;border:1px solid #ececec;overflow-y:auto}.site-content .content-item[data-v-cdf052c1]{padding:12px;max-height:80px;border-bottom:1px solid #ececec;font-size:13px;transition:background-color .3s}.site-content .content-item[data-v-cdf052c1]:hover{background-color:#fcfcfc}.site-content .content-item .site-size[data-v-cdf052c1],.site-content .content-item .site-db[data-v-cdf052c1]{display:flex;align-items:center;min-height:24px}.site-content .content-item .site-title[data-v-cdf052c1]{width:170px}.site-content .content-item .site-path[data-v-cdf052c1]{display:flex;align-items:center;flex:1;width:0;margin:0 10px}.site-content .content-item .site-path .value[data-v-cdf052c1]{max-width:162px;margin:0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.site-content .content-item .db-name[data-v-cdf052c1]{flex:1;width:0}.site-content .content-item .db-size[data-v-cdf052c1]{width:180px}.site-content .content-item .db-time[data-v-cdf052c1],.site-content .content-item .site-time[data-v-cdf052c1]{width:130px}\n",document.head.appendChild(t);const A=e=>(E("data-v-cdf052c1"),e=e(),R(),e),F={class:"p-24px"},q={class:"flex"},G=A((()=>w("div",{class:"flex-1 ml-14px pt-6px"},[w("div",{class:"text-19px font-bold text-#111"}," Please calm down for a few seconds and confirm the following data to be deleted. ")],-1))),H={class:"site-content mt-24px"},J={class:"site-size"},O={class:"site-title"},W={class:"site-path"},Z=A((()=>w("div",null,"Path:",-1))),K={class:"value"},L=A((()=>w("span",null,"(",-1))),Q=A((()=>w("span",{class:"font-bold text-error"},"More than 50 MB ",-1))),X=A((()=>w("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1))),Y={key:1},ee=A((()=>w("span",null,")",-1))),te={key:0},ae={class:"site-time"},le=A((()=>w("span",null,"Create: ",-1))),ie=A((()=>w("p",null," Note: This site is created earlier and may contain important data. Exercise caution when performing this operation. ",-1))),ne={key:0,class:"site-db"},se={class:"db-name"},oe={class:"db-size"},de=A((()=>w("p",null," Note: This database is large and may contain important data. Exercise caution when performing this operation. ",-1))),re={class:"db-time"},ce=A((()=>w("span",null,"Create: ",-1))),ue=A((()=>w("p",null," Note: This site is created earlier and may contain important data. Exercise caution when performing this operation. ",-1))),pe={class:"mt-24px text-13px text-error"},me={key:0},fe=[A((()=>w("span",{class:"glyphicon glyphicon-info-sign"},null,-1))),A((()=>w("span",null," Risks: The database recycle bin function is not enabled at present. After the database is deleted, the database will disappear forever! ",-1)))],ve={key:1,class:"mt-6px"},he=[A((()=>w("span",{class:"glyphicon glyphicon-info-sign"},null,-1))),A((()=>w("span",null," Risk: The file recycle bin function is disabled at present. After a site directory is deleted, the site directory will disappear forever! ",-1)))],xe={key:2,class:"mt-6px text-#333"},ge=A((()=>w("span",null," Please read the above information to be deleted carefully to prevent site data from being deleted by mistake. Confirm that there are still ",-1))),be={class:"text-error font-bold"},ye=A((()=>w("span",null," seconds left to delete.",-1))),we={key:3,class:"mt-6px"},_e=h({__name:"verify",props:{data:{}},emits:["setConfirm"],setup(e,{expose:t,emit:s}){const o=e,d=s,{rows:r,type:c,delSite:p}=o.data,m=x(!0),f=x(!0),h=g((()=>!!c.find((e=>"database"===e)))),E=g((()=>!!c.find((e=>"path"===e)))),R=x([]),P=x(5);return(()=>{d("setConfirm",{type:"error",disabled:!0,text:`Confirm deletion (continue operation after ${P.value} seconds)`});const e=setInterval((()=>{P.value--,d("setConfirm",{text:`Confirm deletion (continue operation after ${P.value} seconds)`}),0===P.value&&(clearInterval(e),d("setConfirm",{disabled:!1,text:"Confirm deletion"}))}),1e3)})(),(async()=>{const{message:e}=await u({ids:r.map((e=>e.id))});l(e)&&(R.value=e.data.map((e=>{const{database:t}=e;return l(t)&&(t.addtime_show=t.addtime.split(" ")[0],t.is_time_rule=Math.round(Date.now()/1e3)-t.st_time>2592e3&&t.total>10240),{...e,addtime_show:e.addtime.split(" ")[0],is_time_rule:Math.round(Date.now()/1e3)-e.st_time>2592e3&&e.total>10240}})))})(),(async()=>{const{message:e}=await v();l(e)&&(m.value=e.status,f.value=e.status_db)})(),t({onConfirm:async({hide:e})=>{await(p?.(e))}}),(e,t)=>{const s=i,o=$,d=n;return b(),y("div",F,[w("div",q,[_(s,{name:"base-warning",size:"34",color:"#f0a020"}),G]),w("div",H,[(b(!0),y(k,null,j(z(R),(e=>(b(),y("div",{key:e.name,class:"content-item"},[w("div",J,[w("div",O,[_(o,null,{default:C((()=>[T("Site: "+D(e.name),1)])),_:2},1024)]),_(d,{trigger:"hover"},{trigger:C((()=>[w("div",W,[Z,w("div",K,D(e.path),1),w("div",null,[L,e.limit?(b(),y(k,{key:0},[Q,X],64)):(b(),y("span",Y,D(z(a)(e.total)),1)),ee])])])),default:C((()=>[w("div",null,[e.limit?(b(),y("p",te," Note: This directory may contain important data. Exercise caution when performing this operation. ")):M("",!0),w("p",null,[w("span",null,"Directory: "+D(e.path),1),w("span",null," ("+D((e.limit?"greater than ":"")+z(a)(e.total))+")",1)])])])),_:2},1024),w("div",ae,[_(d,{trigger:"hover",disabled:!e.is_time_rule},{trigger:C((()=>[w("div",null,[le,w("span",{class:S({"text-error":e.is_time_rule})},D(e.addtime_show),3)])])),default:C((()=>[w("div",null,[ie,w("p",null,"Time: "+D(e.addtime_show),1)])])),_:2},1032,["disabled"])])]),z(h)&&z(l)(e.database)?(b(),y("div",ne,[w("div",se,[_(o,null,{default:C((()=>[T("DB: "+D(e.name),1)])),_:2},1024)]),w("div",oe,[_(d,{trigger:"hover"},{trigger:C((()=>[T("Size: "+D(z(a)(e.database.total)),1)])),default:C((()=>[w("div",null,[de,w("p",null,"Database: "+D(z(a)(e.database.total)),1)])])),_:2},1024)]),w("div",re,[_(d,{trigger:"hover",disabled:!e.database.is_time_rule},{trigger:C((()=>[w("div",null,[ce,w("span",{class:S({"text-error":e.database.is_time_rule})},D(e.addtime_show),3)])])),default:C((()=>[w("div",null,[ue,w("p",null,"Time: "+D(e.database.addtime_show),1)])])),_:2},1032,["disabled"])])])):M("",!0)])))),128))]),w("div",pe,[z(h)&&!z(f)?(b(),y("div",me,fe)):M("",!0),z(E)&&!z(m)?(b(),y("div",ve,he)):M("",!0),z(P)>0?(b(),y("div",xe,[ge,w("span",be,D(z(P)),1),ye])):(b(),y("div",we," Note: please read the above information carefully to prevent site data from being deleted by mistake "))])])}}}),ke=s(_e,[["__scopeId","data-v-cdf052c1"]]),je={class:"p-24px"},Ce={class:"flex pl-12px"},Te={class:"flex-1 ml-14px pt-8px"},De=w("div",{class:"text-16px font-bold text-#111"},[w("div",null,"This will delete the selected website profile."),w("div",{class:"mt-20px"}," If the check box below is checked, the corresponding content will be deleted ")],-1),ze=w("span",{class:"mr-8px"},"Database",-1),Me=w("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1),Se={class:"flex items-center h-40px mt-24px mx-12px pl-48px bg-#f0f0f0 text-14px"},Ee=w("span",null,"Result:",-1),Re={class:"mx-12px"},Pe=w("span",null,"=",-1),Ne={class:"w-80px ml-12px"};e("default",h({__name:"index",props:{data:{}},setup(e,{expose:t}){const a=e,{rows:l}=a.data,s=B(),u=o(),v=x(null),h=x([]),k=g((()=>1===h.value.length&&"ftp"===h.value[0])),j=x(0),M=x(0),S=x(null),E=x(!1),R=x("");let $=null;const A=e=>{I((()=>{(e=>{R.value=e,E.value=!0,v.value?.focus(),$&&clearTimeout($),$=window.setTimeout((()=>{E.value=!1}),3e3)})(e)}))()},F=async e=>{1===l.length?(await q(l[0],!0),u.setRefresh(!0),e?.()):G(e)},q=async(e,t=!1)=>{const a=h.value.reduce(((e,t)=>(e[t]=1,e)),{});return await p(Object.assign({id:e.id,webname:e.name},a),t)},G=e=>{c({title:"Delete site",hideClose:!0,component:m,data:{title:"Delete site",api:q,data:l,callback:t=>{e(),H(t)}}})},H=e=>{u.setRefresh(!0),c({title:"Batch delete site results",width:440,footer:!0,component:f,data:{title:"Delete site",data:e,status:"done",columns:[{key:"name",title:"Site name",ellipsis:{tooltip:{width:"trigger"}}}]}})};return S.value=null,j.value=Math.round(9*Math.random()+1),M.value=Math.round(9*Math.random()+1),t({onConfirm:async({hide:e})=>null==S.value||null==S.value?(A("The result cannot be null"),!1):S.value!==j.value+M.value?(A("The calculation is incorrect"),!1):void(0===h.value.length||k.value?await F(e):(c({title:1===l.length?`Verify information twice, delete site [${l[0].name}]`:"Verify the information twice and delete sites in batches",width:740,footer:!0,data:{rows:l,type:h.value,delSite:F},component:ke}),e()))}),(e,t)=>{const a=i,l=U,o=d,c=V,u=r,p=n;return b(),y("div",je,[w("div",Ce,[_(a,{name:"base-warning",size:"34",color:"#f0a020"}),w("div",Te,[De,_(c,{value:z(h),"onUpdate:value":t[0]||(t[0]=e=>P(h)?h.value=e:null)},{default:C((()=>[_(o,{size:32,class:"items-center h-24px mt-24px"},{default:C((()=>[_(l,{value:"ftp"},{default:C((()=>[T("FTP")])),_:1}),_(l,{value:"database"},{default:C((()=>[ze,Me])),_:1}),_(l,{value:"path"},{default:C((()=>[T("Document Root")])),_:1})])),_:1})])),_:1},8,["value"])])]),w("div",Se,[Ee,w("span",Re,D(z(j))+" + "+D(z(M)),1),Pe,w("div",Ne,[_(p,{show:z(E),"onUpdate:show":t[2]||(t[2]=e=>P(E)?E.value=e:null),trigger:"manual",placement:"top-start","arrow-point-to-center":!0,style:N({"--n-color":z(s).errorColor,"--n-text-color":"#fff"})},{trigger:C((()=>[_(u,{ref_key:"inputRef",ref:v,value:z(S),"onUpdate:value":t[1]||(t[1]=e=>P(S)?S.value=e:null),size:"small","show-button":!1,placeholder:""},null,8,["value"])])),default:C((()=>[w("div",null,D(z(R)),1)])),_:1},8,["show","style"])])])])}}}))}}}));
