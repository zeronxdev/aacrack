import{_ as e}from"./index57.js?v=1720690738171";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import{_ as a,a as l}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1720690738171";import{u as s,_ as i}from"./useTableData.js?v=1720690738171";import{l as o,m as n}from"./index24.js?v=1720690738171";import{j as p,k as r,m as u,B as d,G as m}from"./index.js?v=1720690738171";import{u as c}from"./useLoading.js?v=1720690738171";import{l as _,ad as g,a as h,p as y,f as b,S as v,U as j,V as k,P as f,q as w,a3 as x,W as F,b as L,r as T,A as R,Z as U}from"./vue.js?v=1720690738171";import{_ as W}from"./Select.js?v=1720690738171";import"./Tabs.js?v=1720690738171";import"./omit.js?v=1720690738171";import"./useTableColumns.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./DataTable.js?v=1720690738171";import"./Checkbox.js?v=1720690738171";import"./Ellipsis.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./Skeleton.js?v=1720690738171";import"./index49.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171";import"./index47.js?v=1720690738171";import"./data.js?v=1720690738171";import"./php.js?v=1720690738171";import"./useAccount.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang4.js?v=1720690738171";import"./index50.js?v=1720690738171";import"./Alert.js?v=1720690738171";import"./Tag.js?v=1720690738171";const A=_({__name:"index",setup(e){const{t:n}=g(),m=h("ftpRowData"),{loading:_,setLoading:T}=c(),{keys:R,table:U,columns:W}=s([{key:"user",title:n("Public.tableRow.Username"),minWidth:110},{key:"ip",title:n("Ftp.Label.Login"),minWidth:110},{key:"status",title:n("Ftp.Label.State"),minWidth:110,render:e=>y("span",{style:{color:"login succeeded"===e.status?"#67C23A":"#F56C6C"}},e.status)},{key:"in_time",title:n("Ftp.Label.LoginTime"),minWidth:110},{key:"out_time",title:n("Ftp.Label.LogoutTime"),minWidth:110}]),A=b({p:1,limit:10,search:""}),D=async()=>{try{T(!0);const{message:e}=await o({user_name:m.name,...A});p(e)&&(U.data=r(e.data)?e.data:[],U.total=u(e.page))}finally{T(!1)}};return D(),(e,s)=>{const o=d,n=a,p=i,r=l,u=t;return v(),j(u,null,{toolsLeft:k((()=>[f(o,{onClick:D},{default:k((()=>[w(x(e.$t("Ftp.Analysis.Index_32")),1)])),_:1})])),toolsRight:k((()=>[f(n,{value:F(A).search,"onUpdate:value":s[0]||(s[0]=e=>F(A).search=e),width:"280",placeholder:e.$t("Ftp.Placeholder.Index_7"),onSearch:D},null,8,["value","placeholder"])])),table:k((()=>[f(p,{"checked-row-keys":F(R),"onUpdate:checkedRowKeys":s[1]||(s[1]=e=>L(R)?R.value=e:null),loading:F(_),data:F(U).data,columns:F(W)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:k((()=>[f(r,{page:F(A).p,"onUpdate:page":s[2]||(s[2]=e=>F(A).p=e),"page-size":F(A).limit,"onUpdate:pageSize":s[3]||(s[3]=e=>F(A).limit=e),"item-count":F(U).total,onRefresh:D},null,8,["page","page-size","item-count"])])),_:1})}}}),D=_({__name:"index",setup(e){const{t:o}=g(),{loading:_,setLoading:y}=c(),T=h("ftpRowData"),R=b([{label:o("Ftp.Label.All"),value:"all"},{label:o("Ftp.Label.UploadLabel"),value:"upload"},{label:o("Ftp.Label.Download"),value:"download"},{label:o("Ftp.Table.Delete"),value:"delete"},{label:o("Ftp.Label.Rename"),value:"rename"}]),{keys:U,table:A,columns:D}=s([{key:"user",title:o("Public.tableRow.Username"),minWidth:110,render:e=>e.name||"--"},{key:"ip",title:o("Ftp.Table.OperatingIP"),minWidth:110},{key:"file",title:o("Ftp.Table.Document"),minWidth:110,ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:o("Ftp.Table.OperationType"),minWidth:110},{key:"time",title:o("Ftp.Table.Time"),minWidth:110}]),S=b({p:1,limit:10,search:"",type:"all"}),C=async()=>{try{y(!0);const{message:e}=await n({user_name:T.name,...S});p(e)&&(A.data=r(e.data)?e.data:[],A.total=u(e.page))}finally{y(!1)}};return C(),(e,s)=>{const o=d,n=W,p=a,r=m,u=i,c=l,g=t;return v(),j(g,null,{toolsLeft:k((()=>[f(o,{onClick:C},{default:k((()=>[w(x(e.$t("Ftp.Analysis.Index_32")),1)])),_:1})])),toolsRight:k((()=>[f(r,null,{default:k((()=>[f(n,{value:F(S).type,"onUpdate:value":[s[0]||(s[0]=e=>F(S).type=e),C],options:F(R),class:"w-120px"},null,8,["value","options"]),f(p,{value:F(S).search,"onUpdate:value":s[1]||(s[1]=e=>F(S).search=e),width:"280",placeholder:e.$t("Ftp.Placeholder.Index_7"),onSearch:C},null,8,["value","placeholder"])])),_:1})])),table:k((()=>[f(u,{"checked-row-keys":F(U),"onUpdate:checkedRowKeys":s[2]||(s[2]=e=>L(U)?U.value=e:null),loading:F(_),data:F(A).data,columns:F(D)},null,8,["checked-row-keys","loading","data","columns"])])),pageRight:k((()=>[f(c,{page:F(S).p,"onUpdate:page":s[3]||(s[3]=e=>F(S).p=e),"page-size":F(S).limit,"onUpdate:pageSize":s[4]||(s[4]=e=>F(S).limit=e),"item-count":F(A).total,onRefresh:C},null,8,["page","page-size","item-count"])])),_:1})}}}),S={class:"p-8 overflow-y-hidden"},C=_({__name:"index",props:{row:{}},setup(t){const{t:a}=g(),l=T(null),s=t,{row:i}=s;R("ftpRowData",i);const o=T("login"),n=[{key:"login",label:a("Ftp.Table.Login"),component:A},{key:"action",label:a("Ftp.Table.Action"),component:D}];return(t,a)=>{const s=e;return v(),U("div",S,[f(s,{ref_key:"logsTabs",ref:l,value:F(o),"onUpdate:value":a[0]||(a[0]=e=>L(o)?o.value=e:null),data:n},null,8,["value"])])}}});export{C as default};
