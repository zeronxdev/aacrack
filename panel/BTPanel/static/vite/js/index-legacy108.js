System.register(["./index-legacy.js?v=1720690738171","./index-legacy111.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1720690738171","./useTableData-legacy.js?v=1720690738171","./index-legacy85.js?v=1720690738171","./site-legacy2.js?v=1720690738171","./useLoading-legacy.js?v=1720690738171","./useTableColumns-legacy.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1720690738171","./index-legacy57.js?v=1720690738171","./index-legacy53.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1720690738171","./index-legacy49.js?v=1720690738171","./form.vue_vue_type_script_setup_true_lang-legacy.js?v=1720690738171","./useAccount-legacy.js?v=1720690738171","./php-legacy.js?v=1720690738171","./Space-legacy.js?v=1720690738171","./InputGroupLabel-legacy.js?v=1720690738171","./InputGroup-legacy.js?v=1720690738171","./index-legacy112.js?v=1720690738171","./Spin-legacy.js?v=1720690738171","./Progress-legacy.js?v=1720690738171"],(function(e,a){"use strict";var t,l,i,n,s,o,r,d,u,c,p,m,h,v,y,f,w,g,_,b,x,k,P,U,C,L,S,R,T,E,j,D,N,A,I,$,q,B,M,H,K,z,O,W,F,V,X,G,Q,Y,Z,J,ee,ae,te,le,ie,ne,se,oe,re,de,ue,ce,pe,me,he,ve,ye,fe,we,ge,_e,be,xe,ke,Pe,Ue,Ce,Le,Se,Re,Te,Ee,je,De,Ne,Ae,Ie,$e,qe,Be,Me,He,Ke,ze,Oe,We,Fe,Ve,Xe,Ge,Qe,Ye,Ze,Je,ea,aa,ta,la,ia,na,sa,oa,ra,da,ua,ca,pa,ma,ha,va,ya,fa,wa,ga,_a,ba,xa,ka,Pa,Ua,Ca,La,Sa,Ra,Ta,Ea,ja,Da,Na,Aa,Ia,$a,qa;return{setters:[e=>{t=e.e,l=e.h,i=e.n,n=e.k,s=e.B,o=e.g,r=e.v,d=e.j,u=e.aj,c=e.a9,p=e.G,m=e.q,h=e.p,v=e.b8,y=e.cC,f=e.z,w=e.cv,g=e.a,_=e.b1,b=e.cJ,x=e.H},e=>{k=e._},e=>{P=e.s},e=>{U=e.A,C=e.a,L=e.P,S=e.q,R=e.l,T=e.r,E=e.S,j=e.Z,D=e._,N=e.V,A=e.W,I=e.b,$=e.f,q=e.a1,B=e.F,M=e.af,H=e.t,K=e.U,z=e.x,O=e.al,W=e.a3,F=e.a5,V=e.a6,X=e.ag,G=e.k,Q=e.n},e=>{Y=e._},e=>{Z=e._},e=>{J=e.u,ee=e._},e=>{ae=e._},e=>{te=e.X,le=e.V,ie=e.W,ne=e.aQ,se=e.aR,oe=e.aS,re=e.aT,de=e.aU,ue=e.Y,ce=e.Z,pe=e._,me=e.$,he=e.a0,ve=e.a1,ye=e.a2,fe=e.a3,we=e.a4,ge=e.a5,_e=e.a6,be=e.a7,xe=e.a8,ke=e.a9,Pe=e.aa,Ue=e.ab,Ce=e.ac,Le=e.ad,Se=e.ae,Re=e.aV,Te=e.aW,Ee=e.af,je=e.ag,De=e.ah,Ne=e.ai,Ae=e.aj,Ie=e.al,$e=e.am,qe=e.an,Be=e.aX,Me=e.aY,He=e.aZ,Ke=e.a_,ze=e.a$,Oe=e.b0,We=e.b1,Fe=e.ao,Ve=e.ap,Xe=e.aq,Ge=e.ar,Qe=e.as,Ye=e.at,Ze=e.au,Je=e.av,ea=e.aw,aa=e.ax,ta=e.ay,la=e.az,ia=e.aA,na=e.aB,sa=e.aC,oa=e.aD,ra=e.aE,da=e.aF,ua=e.aG},e=>{ca=e.u},e=>{pa=e.B,ma=e.b,ha=e._,va=e.i},e=>{ya=e._},e=>{fa=e._,wa=e.a},e=>{ga=e._},e=>{_a=e._},e=>{ba=e._},e=>{xa=e._,ka=e.a},e=>{Pa=e._},e=>{Ua=e._},e=>{Ca=e._,La=e.a,Sa=e.b,Ra=e.c},e=>{Ta=e.b},e=>{Ea=e.a,ja=e.b},e=>{Da=e._},e=>{Na=e._},e=>{Aa=e._},e=>{Ia=e._},e=>{$a=e._},e=>{qa=e._}],execute:function(){var Ba=document.createElement("style");Ba.textContent=".warning[data-v-24287f9c]{padding:8px;border-radius:4px;background-color:#fdf6ec;color:#e6a23c}\n",document.head.appendChild(Ba),e("u",Ha);const Ma=Symbol("server-list");function Ha(){return C(Ma)}function Ka({delDomain:e}){return{key:"action",title:"OPT",width:80,align:"right",render:a=>L(pa,{options:[{label:"Del",onClick:()=>{l({title:`Delete domain [${a.name}]`,content:"Are you sure to delete this domain name?",onConfirm:async({hide:t})=>{await e(a),t()}})}}]},null)}}const za={class:"flex justify-between items-center mb-24px"},Oa={class:"w-400px"},Wa=D("p",null,"A domain per line, the default port is 80",-1),Fa=D("p",null,"Wildcard domain format: *.domain.com",-1),Va=D("p",null,"To add another port, the format is www.domain.com:88",-1),Xa={class:"pr-40px"},Ga=R({__name:"index",setup(e,{expose:a}){const{data:l}=Ha(),o=T(""),r=async()=>{""!==o.value.trim()?(await te({id:l.id,webname:l.name,domain:o.value.trim().split("\n").join(",")}),o.value="",f()):i.error("Domain name cannot be empty")},d=async e=>{await le({id:l.id,webname:l.name,domain:e.name,port:e.port}),f()},{keys:u,table:c,columns:p}=J([{type:"selection",width:40},{key:"name",title:"Domain name",render:e=>L(t,{href:`http://${e.name}:${e.port}`,target:"_blank"},{default:()=>[e.name]})},{key:"port",title:"Port",width:100},Ka({delDomain:d})]),m=()=>{c.data.length>1?p.value[p.value.length-1]=Ka({delDomain:d}):p.value[p.value.length-1]={key:"action",title:"OPT",width:80,align:"right",render:()=>L("span",{class:"text-default"},[S("Inoperable")])}},h=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete",desc:"Please be cautious, The selected item will be [delete] after confirmation",api:e=>le({id:l.id,webname:l.name,domain:e.name,port:e.port},!1),done:()=>{f()},columns:[{key:"name",title:"Domain name",ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:v,setLoading:y}=ca(),f=async()=>{try{y(!0);const e={id:l.id},{message:a}=await ie(e);c.data=n(a)?a:[],m()}finally{u.value=[],y(!1)}};return f(),a({init:f}),(e,a)=>{const t=ae,l=s,i=ee,n=Z,d=Y;return E(),j("div",null,[D("div",za,[D("div",Oa,[L(t,{value:A(o),"onUpdate:value":a[0]||(a[0]=e=>I(o)?o.value=e:null)},{default:N((()=>[Wa,Fa,Va])),_:1},8,["value"])]),D("div",Xa,[L(l,{type:"primary",onClick:r},{default:N((()=>[S("Add")])),_:1})])]),L(d,null,{table:N((()=>[L(i,{"checked-row-keys":A(u),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>I(u)?u.value=e:null),loading:A(v),"max-height":400,data:A(c).data,columns:A(p)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:N((()=>[L(n,{"checked-row-keys":A(u),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>I(u)?u.value=e:null),data:A(c).data,options:h},null,8,["checked-row-keys","data"])])),_:1})])}}}),Qa=D("div",null,"Domain name",-1),Ya={class:"w-140px"},Za=D("div",null,"Subdir",-1),Ja={class:"w-120px"},et=R({__name:"index",setup(e,{expose:t}){const h=q((()=>r((()=>a.import("./rewrite-legacy.js?v=1720690738171")),void 0))),{data:v}=Ha(),y=$({domain:"",dirName:null}),f=T([]),w=async()=>{const e=y.dirName;""!==y.domain.trim()?null!==e?(await se({id:v.id,domain:y.domain,dirName:e}),R()):i.error("Subdirectory name cannot be empty"):i.error("Domain cannot be empty")},g=o("Configurate rewirte rules",{data:"",filename:"",rlist:[]}),_=e=>{g.data.filename=e.filename,g.data.fileContent=e.data,g.data.rlist=e.rlist,g.show=!0},{keys:b,table:x,columns:k}=J([{type:"selection",width:40},{key:"domain",title:"Domain name",ellipsis:{tooltip:{width:"trigger"}}},{key:"port",title:"Port",width:80},{key:"path",title:"Subdir",width:120,ellipsis:{tooltip:{width:"trigger"}}},ma({width:130,options:e=>[{label:"URL rewrite",onClick:()=>{(async e=>{try{const{message:a}=await oe({id:e.id});d(a)&&_(a)}catch(a){const t=u(a,"meesage.result","");t?i.error(t):l({title:"Tips",content:"Are you sure to create a independent URL rewrite rule for this subdirectory?",onConfirm:async({hide:a})=>{const{message:t}=await re({id:e.id});d(t)&&_(t),a()}})}})(e)}},{label:"Del",onClick:()=>{l({title:`Are you sure to delete this [${e.path}] subdirectory binding?`,content:"Are you sure to delete this subdirectory binding?",onConfirm:async({hide:a})=>{await ne({id:e.id}),R(),a()}})}}]})]),P=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete",desc:"Please be cautious, The selected item will be [delete] after confirmation",api:e=>ne({id:e.id},!1),done:()=>{R()},columns:[{key:"domain",title:"Domain name",ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:U,setLoading:C}=ca(),R=()=>{y.domain="",y.dirName=null,(async()=>{try{C(!0);const{message:e}=await de({id:v.id});if(d(e)){const{dirs:a,binding:t}=e;n(a)&&a.length>0?(f.value=a.map((e=>({label:e,value:e}))),y.dirName=a[0]):(f.value=[],y.dirName=null),x.data=n(t)?t:[]}}finally{b.value=[],C(!1)}})()};return R(),t({init:R}),(e,a)=>{const t=c,l=p,i=ya,n=s,o=ee,r=Z,d=Y,u=m;return E(),j("div",null,[L(l,{class:"items-center",size:16},{default:N((()=>[L(l,{class:"items-center"},{default:N((()=>[Qa,D("div",Ya,[L(t,{value:A(y).domain,"onUpdate:value":a[0]||(a[0]=e=>A(y).domain=e),placeholder:""},null,8,["value"])])])),_:1}),L(l,{class:"items-center"},{default:N((()=>[Za,D("div",Ja,[L(i,{value:A(y).dirName,"onUpdate:value":a[1]||(a[1]=e=>A(y).dirName=e),options:A(f)},null,8,["value","options"])])])),_:1}),L(n,{type:"primary",onClick:w},{default:N((()=>[S("Add")])),_:1})])),_:1}),L(d,{class:"mt-16px"},{table:N((()=>[L(o,{"checked-row-keys":A(b),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>I(b)?b.value=e:null),loading:A(U),"max-height":440,data:A(x).data,columns:A(k)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:N((()=>[L(r,{"checked-row-keys":A(b),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>I(b)?b.value=e:null),data:A(x).data,options:P},null,8,["checked-row-keys","data"])])),_:1}),L(u,{show:A(g).show,"onUpdate:show":a[4]||(a[4]=e=>A(g).show=e),title:A(g).title,data:A(g).data,width:600,"min-height":488,component:A(h)},null,8,["show","title","data","component"])])}}}),at={class:"pt-16px"},tt={class:"flex-1"},lt={class:"w-240px"},it=D("div",{class:"mt-8px text-desc"}," Some programs need to specify a secondary directory as the working directory ",-1),nt={class:"flex-1"},st={class:"w-240px"},ot=D("div",{class:"mt-12px text-desc"}," Select your working directory click Save, e.g, ThinkPHP5, Laravel ",-1),rt={class:"my-16px"},dt=D("div",{class:"text-desc"},"(Base directory limit) (open_basedir)",-1),ut=D("div",{class:"text-desc"},null,-1),ct={class:"my-20px"},pt=D("div",{class:"text-desc"},null,-1),mt={class:"w-240px"},ht={class:"w-240px"},vt={class:"w-240px"},yt=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),l=T("");let n="";const o=async()=>{""!==l.value.trim()?l.value!==n?(await ue({id:t.id,name:t.name,path:l.value}),P()):i.success("Same as original path, no need to change!"):i.error("Please select web directory")},r=T(null),m=T([]),v=async()=>{null!==r.value?(await ce({id:t.id,runPath:r.value}),P()):i.error("Please select runtime directory")},y=T(!1),f=async()=>{await pe({id:t.id,path:t.path}),P()},w=T(!1),g=async()=>{await me({id:t.id}),P()},_=T(!1),b=$({username_get:"",password_get_1:"",password_get_2:""}),x=async e=>{e||(await he({id:t.id}),P())},k=async()=>{""!==b.username_get.trim()?""!==b.password_get_1.trim()?""!==b.password_get_2.trim()?b.username_get.trim().length<3||b.password_get_1.trim().length<3?i.error("Username cannot be less than 3 digits!"):b.password_get_1.trim()===b.password_get_2.trim()?(await ve({id:t.id,username:b.username_get,password:b.password_get_1}),b.username_get="",b.password_get_1="",b.password_get_2="",P()):i.error("The passwords entered twice are inconsistent!"):i.error("Please input repeat password!"):i.error("Please input password!"):i.error("Please input username!")},P=()=>{(async()=>{const{message:e}=await ye({id:t.id});d(e)&&(l.value=e.result||"/www",n=l.value)})(),(async()=>{const{message:e}=await fe({id:t.id,path:t.path});if(d(e)){r.value=u(e,"runPath.runPath",null),y.value=u(e,"userini",!1),w.value=u(e,"logs.result",!1),_.value=u(e,"pass.result",!1);const a=u(e,"runPath.dirs",[]);m.value=a.map((e=>({label:e,value:e})))}})()};return P(),a({init:P}),(e,a)=>{const t=ga,i=s,n=p,d=fa,u=ya,P=h,U=ha,C=c,R=wa;return E(),j("div",at,[L(R,{"label-width":"140"},{default:N((()=>[L(d,{label:"Site directory","show-feedback":!1},{default:N((()=>[D("div",tt,[L(n,null,{default:N((()=>[D("div",lt,[L(t,{value:A(l),"onUpdate:value":a[0]||(a[0]=e=>I(l)?l.value=e:null)},null,8,["value"])]),L(i,{type:"primary",onClick:o},{default:N((()=>[S("Save")])),_:1})])),_:1}),it])])),_:1}),L(d,{class:"mt-16px",label:"Running directory","show-feedback":!1},{default:N((()=>[D("div",nt,[L(n,null,{default:N((()=>[D("div",st,[L(u,{value:A(r),"onUpdate:value":a[1]||(a[1]=e=>I(r)?r.value=e:null),options:A(m)},null,8,["value","options"])]),L(i,{type:"primary",onClick:v},{default:N((()=>[S("Save")])),_:1})])),_:1}),ot])])),_:1}),D("div",rt,[L(P,{dashed:""})]),L(d,{label:"Anti-XSS attack","show-feedback":!1},{default:N((()=>[L(n,{class:"items-center"},{default:N((()=>[L(U,{value:A(y),"onUpdate:value":[a[2]||(a[2]=e=>I(y)?y.value=e:null),f]},null,8,["value"]),dt])),_:1})])),_:1}),L(d,{class:"mt-16px",label:"Write access log","show-feedback":!1},{default:N((()=>[L(n,{class:"items-center"},{default:N((()=>[L(U,{value:A(w),"onUpdate:value":[a[3]||(a[3]=e=>I(w)?w.value=e:null),g]},null,8,["value"]),ut])),_:1})])),_:1}),D("div",ct,[L(P,{dashed:""})]),L(d,{label:"Password access","show-feedback":!1},{default:N((()=>[L(n,{class:"items-center"},{default:N((()=>[L(U,{value:A(_),"onUpdate:value":[a[4]||(a[4]=e=>I(_)?_.value=e:null),x]},null,8,["value"]),pt])),_:1})])),_:1}),A(_)?(E(),j(B,{key:0},[L(d,{class:"mt-16px",label:"Authorized account","show-feedback":!1},{default:N((()=>[D("div",mt,[L(C,{value:A(b).username_get,"onUpdate:value":a[5]||(a[5]=e=>A(b).username_get=e),placeholder:"Please leave blank if not modified"},null,8,["value"])])])),_:1}),L(d,{class:"mt-16px",label:"Password access","show-feedback":!1},{default:N((()=>[D("div",ht,[L(C,{value:A(b).password_get_1,"onUpdate:value":a[6]||(a[6]=e=>A(b).password_get_1=e),type:"password",placeholder:"Please leave blank if not modified"},null,8,["value"])])])),_:1}),L(d,{class:"mt-16px",label:"Repeat password","show-feedback":!1},{default:N((()=>[D("div",vt,[L(C,{value:A(b).password_get_2,"onUpdate:value":a[7]||(a[7]=e=>A(b).password_get_2=e),type:"password",placeholder:"Please leave blank if not modified"},null,8,["value"])])])),_:1}),L(d,{class:"mt-16px",label:" ","show-feedback":!1},{default:N((()=>[L(i,{type:"primary",onClick:k},{default:N((()=>[S("Save")])),_:1})])),_:1})],64)):M("",!0)])),_:1})])}}}),ft={class:"p-20px"},wt={class:"w-280px"},gt={class:"w-280px"},_t={class:"w-280px"},bt={class:"w-280px"},xt=D("li",null,"After the path is protected, you need to enter the account password to access it.",-1),kt=D("li",null," For example, if I set the protection directory /test/ , then I need to enter the account password to access http://aaa.com/test/ ",-1),Pt=R({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{isEdit:l,siteId:i,row:n,getList:s}=t.data,o=T(null),r=$({name:"",site_dir:"",username:"",password:""}),d={name:{required:!0,message:"Please enter the name",trigger:["blur","input"]},site_dir:{required:!0,message:"Please enter the path",trigger:["blur","input"]},username:{required:!0,message:"Please enter the username",trigger:["blur","input"]},password:{required:!0,message:"Please enter the password",trigger:["blur","input"]}};return l&&n&&(r.name=n.name,r.site_dir=n.site_dir),a({onConfirm:async({hide:e})=>{await(o.value?.validate()),l?await we({id:i,name:r.name,username:r.username,password:r.password}):await ge({...H(r),id:i}),s?.(),e()}}),(e,a)=>{const t=c,i=fa,n=wa,s=ba;return E(),j("div",ft,[L(n,{ref_key:"formRef",ref:o,model:A(r),rules:d},{default:N((()=>[L(i,{label:"Name",path:"name"},{default:N((()=>[D("div",wt,[L(t,{value:A(r).name,"onUpdate:value":a[0]||(a[0]=e=>A(r).name=e),disabled:A(l),placeholder:""},null,8,["value","disabled"])])])),_:1}),L(i,{label:"Path",path:"site_dir"},{default:N((()=>[D("div",gt,[L(t,{value:A(r).site_dir,"onUpdate:value":a[1]||(a[1]=e=>A(r).site_dir=e),disabled:A(l),placeholder:"Enter the path: /text/，/test/api"},null,8,["value","disabled"])])])),_:1}),L(i,{label:"Username",path:"username"},{default:N((()=>[D("div",_t,[L(t,{value:A(r).username,"onUpdate:value":a[2]||(a[2]=e=>A(r).username=e),placeholder:""},null,8,["value"])])])),_:1}),L(i,{label:"Password",path:"password"},{default:N((()=>[D("div",bt,[L(t,{value:A(r).password,"onUpdate:value":a[3]||(a[3]=e=>A(r).password=e),placeholder:""},null,8,["value"])])])),_:1})])),_:1},8,["model"]),L(s,{class:"mt-4px"},{default:N((()=>[xt,kt])),_:1})])}}}),Ut=D("li",null,"After setting, you need to enter the password to access it.",-1),Ct=D("li",null," For example, if I set the limit path /test/, then I need to enter the account password to access http://aaa.com/test/ ",-1),Lt=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),{keys:i,table:n,columns:r}=J([{type:"selection",width:40},{key:"name",title:"Name",ellipsis:{tooltip:{width:"trigger"}}},{key:"site_dir",title:"Path",ellipsis:{tooltip:{width:"trigger"}}},ma({width:130,options:e=>[{label:"Edit",onClick:()=>{f(e)}},{label:"Del",onClick:()=>{l({title:`Delete [${e.name}]`,content:"Are you sure to delete this directory?",onConfirm:async({hide:a})=>{await _e({id:t.id,name:e.name}),h(),a()}})}}]})]),u=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete",desc:"Please be cautious, The selected item will be [delete] after confirmation",columns:[r.value[1]],api:e=>_e({id:t.id,name:e.name},!1),done:()=>{h()}}}],{loading:c,setLoading:p}=ca(),h=async()=>{try{p(!0);const{message:e}=await be({id:t.id});if(d(e)){n.data=[];for(const[a,l]of Object.entries(e))if(t.name===a){n.data=l;break}}}finally{i.value=[],p(!1)}},v=o("Add limit access",{row:void 0,siteId:t.id,isEdit:!1,getList:h}),y=()=>{v.data.isEdit=!1,v.title="Add limit access",v.show=!0},f=e=>{v.data.row=e,v.data.isEdit=!0,v.title="Edit limit access",v.show=!0};return h(),a({init:h}),(e,a)=>{const t=s,l=ee,o=Z,d=Y,p=ba,h=m;return E(),j("div",null,[L(d,null,{toolsLeft:N((()=>[L(t,{type:"primary",onClick:y},{default:N((()=>[S("Add limit access")])),_:1})])),table:N((()=>[L(l,{"checked-row-keys":A(i),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>I(i)?i.value=e:null),"row-key":"name",loading:A(c),"max-height":440,data:A(n).data,columns:A(r)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:N((()=>[L(o,{"checked-row-keys":A(i),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>I(i)?i.value=e:null),"row-key":"name",data:A(n).data,options:u},null,8,["checked-row-keys","data"])])),_:1}),L(p,{class:"mt-16px"},{default:N((()=>[Ut,Ct])),_:1}),L(h,{show:A(v).show,"onUpdate:show":a[2]||(a[2]=e=>A(v).show=e),title:A(v).title,data:A(v).data,width:480,footer:!0,component:Pt},null,8,["show","title","data"])])}}}),St={class:"p-20px"},Rt={class:"w-280px"},Tt={class:"w-280px"},Et={class:"w-280px"},jt=D("li",null,"Name: The rule name.",-1),Dt=D("li",null," Suffix: Indicates the suffix that is not allowed to access, if there are more than one, separate with'|' ",-1),Nt=D("li",null,"Path: Quote rules in this directory. e.g: /a/",-1),At=D("li",null,"For Example, if you want to deny http://test.com/a/index.php",-1),It=D("li",null,"Please fill in [ /a/ ]",-1),$t=R({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{isEdit:l,siteName:i,row:n,getList:s}=t.data,o=T(null),r=$({deny_name:"",suffix:"php|jsp",dir:""}),d={deny_name:{required:!0,message:"Please enter the name",trigger:["blur","input"]},suffix:{required:!0,message:"Please enter the path",trigger:["blur","input"]},dir:{required:!0,message:"Please enter the username",trigger:["blur","input"]}},u=()=>({...H(r),dir:r.dir.replace(/\/$/,"")+"/",website:i});return l&&n&&(r.deny_name=n.name,r.suffix=n.suffix,r.dir=n.dir),a({onConfirm:async({hide:e})=>{await(o.value?.validate()),l?await xe(u()):await ke(u()),s?.(),e()}}),(e,a)=>{const t=c,i=fa,n=wa,s=ba;return E(),j("div",St,[L(n,{ref_key:"formRef",ref:o,model:A(r),rules:d},{default:N((()=>[L(i,{label:"Name",path:"deny_name"},{default:N((()=>[D("div",Rt,[L(t,{value:A(r).deny_name,"onUpdate:value":a[0]||(a[0]=e=>A(r).deny_name=e),disabled:A(l),placeholder:"The rule name"},null,8,["value","disabled"])])])),_:1}),L(i,{label:"Suffix",path:"suffix"},{default:N((()=>[D("div",Tt,[L(t,{value:A(r).suffix,"onUpdate:value":a[1]||(a[1]=e=>A(r).suffix=e),placeholder:"Suffixes that are not allowed"},null,8,["value"])])])),_:1}),L(i,{label:"Path",path:"dir"},{default:N((()=>[D("div",Et,[L(t,{value:A(r).dir,"onUpdate:value":a[2]||(a[2]=e=>A(r).dir=e),placeholder:"Quote rules in this directory. e.g: /a/"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),L(s,{class:"mt-4px"},{default:N((()=>[jt,Dt,Nt,At,It])),_:1})])}}}),qt=D("li",null," Suffix: Indicates the suffix that is not allowed to access, if there are more than one, separate with'|'. ",-1),Bt=D("li",null,"Path: Quote rules in this directory. e.g: /a/",-1),Mt=D("li",null,"For Example, if you want to deny http://test.com/a/index.php",-1),Ht=D("li",null,"Please fill in [ /a/ ]",-1),Kt=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),{keys:i,table:r,columns:d}=J([{type:"selection",width:40},{key:"name",title:"Name",ellipsis:{tooltip:{width:"trigger"}}},{key:"dir",title:"Path",ellipsis:{tooltip:{width:"trigger"}}},{key:"suffix",title:"Suffix",ellipsis:{tooltip:{width:"trigger"}}},ma({width:130,options:e=>[{label:"Edit",onClick:()=>{f(e)}},{label:"Del",onClick:()=>{l({title:`Delete [${e.name}]`,content:"Are you sure to delete this directory?",onConfirm:async({hide:a})=>{await Pe({website:t.name,deny_name:e.name}),h(),a()}})}}]})]),u=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete",desc:"Please be cautious, The selected item will be [delete] after confirmation",columns:[d.value[1]],api:e=>Pe({website:t.name,deny_name:e.name},!1),done:()=>{h()}}}],{loading:c,setLoading:p}=ca(),h=async()=>{try{p(!0);const{message:e}=await Ue({website:t.name});r.data=n(e)?e:[]}finally{i.value=[],p(!1)}},v=o("Add limit access",{row:void 0,siteName:t.name,isEdit:!1,getList:h}),y=()=>{v.data.row=void 0,v.data.isEdit=!1,v.title="Add limit access",v.show=!0},f=e=>{v.data.row=e,v.data.isEdit=!0,v.title="Edit limit access",v.show=!0};return h(),a({init:h}),(e,a)=>{const t=s,l=ee,n=Z,o=Y,p=ba,h=m;return E(),j("div",null,[L(o,null,{toolsLeft:N((()=>[L(t,{type:"primary",onClick:y},{default:N((()=>[S("Add deny access")])),_:1})])),table:N((()=>[L(l,{"checked-row-keys":A(i),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>I(i)?i.value=e:null),"row-key":"name",loading:A(c),"max-height":440,data:A(r).data,columns:A(d)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:N((()=>[L(n,{"checked-row-keys":A(i),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>I(i)?i.value=e:null),"row-key":"name",data:A(r).data,options:u},null,8,["checked-row-keys","data"])])),_:1}),L(p,{class:"mt-16px"},{default:N((()=>[qt,Bt,Mt,Ht])),_:1}),L(h,{show:A(v).show,"onUpdate:show":a[2]||(a[2]=e=>A(v).show=e),title:A(v).title,data:A(v).data,width:480,footer:!0,component:$t},null,8,["show","title","data"])])}}}),zt=R({__name:"index",setup(e){const a=T("limit"),t=[{key:"limit",label:"Limit access",component:Lt},{key:"deny",label:"Deny access",component:Kt}];return(e,l)=>{const i=_a;return E(),K(i,{value:A(a),"onUpdate:value":l[0]||(l[0]=e=>I(a)?a.value=e:null),data:t},null,8,["value"])}}}),Ot={class:"pt-8px"},Wt={class:"w-200px"},Ft={class:"flex flex-col"},Vt={class:"w-200px"},Xt=D("div",{class:"mt-8px text-desc"},"* Limit of max concurrency",-1),Gt={class:"flex flex-col"},Qt={class:"w-200px"},Yt=D("div",{class:"mt-8px text-desc"},"* Limit of single IP accessing max concurrency",-1),Zt={class:"flex flex-col"},Jt={class:"w-200px"},el=D("div",{class:"mt-8px text-desc"},"* Limit the max traffic limit per request (unit: KB)",-1),al=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),l=T(null),i=$({status:!1,type:0,perserver:300,perip:25,limit_rate:512}),n={perserver:{trigger:["blur","change"],validator:()=>!!i.perserver||new Error("请输入并发限制")},perip:{trigger:["blur","change"],validator:()=>!!i.perip||new Error("请输入单IP限制")},limit_rate:{trigger:["blur","change"],validator:()=>!!i.limit_rate||new Error("请输入流量限制")}},o=T([{label:"BBS/Blog",value:0,items:{perserver:300,perip:25,limit_rate:512}},{label:"Photofolio",value:1,items:{perserver:200,perip:10,limit_rate:1024}},{label:"Download",value:2,items:{perserver:50,perip:3,limit_rate:2048}},{label:"Mall",value:3,items:{perserver:500,perip:10,limit_rate:2048}},{label:"Portal",value:4,items:{perserver:400,perip:15,limit_rate:1024}},{label:"Corporate",value:5,items:{perserver:60,perip:10,limit_rate:512}},{label:"Video",value:6,items:{perserver:150,perip:4,limit_rate:1024}},{label:"Customize",value:7,items:{perserver:0,perip:0,limit_rate:0}}]),r=async e=>{e?p():(await Ce({id:t.id}),m())},u=(e,a)=>{const{items:t}=a;d(t)&&c(t)},c=e=>{i.perserver=e.perserver,i.perip=e.perip,i.limit_rate=e.limit_rate},p=async()=>{await(l.value?.validate()),await Le({id:t.id,perserver:i.perserver,perip:i.perip,limit_rate:i.limit_rate}),m()},m=async()=>{const{message:e}=await Se({id:t.id});d(e)&&(i.status=0!=e.perserver,c(o.value[0].items),v(e.perserver)&&0!=e.perserver&&(i.perserver=e.perserver),v(e.perip)&&0!=e.perip&&(i.perip=e.perip),v(e.limit_rate)&&0!=e.limit_rate&&(i.limit_rate=e.limit_rate))};return m(),a({init:m}),(e,a)=>{const t=xa,d=fa,c=ya,m=y,h=s,v=wa;return E(),j("div",Ot,[L(v,{ref_key:"formRef",ref:l,"label-width":"150",class:"px-8px",model:A(i),rules:n},{default:N((()=>[L(d,{label:" "},{default:N((()=>[L(t,{checked:A(i).status,"onUpdate:checked":[a[0]||(a[0]=e=>A(i).status=e),r]},{default:N((()=>[S(" Turn on traffic control ")])),_:1},8,["checked"])])),_:1}),L(d,{label:"Limit plan",path:"type"},{default:N((()=>[D("div",Wt,[L(c,{value:A(i).type,"onUpdate:value":[a[1]||(a[1]=e=>A(i).type=e),u],options:A(o)},null,8,["value","options"])])])),_:1}),L(d,{label:"Limit of concurrency",path:"perserver"},{default:N((()=>[D("div",Ft,[D("div",Vt,[L(m,{value:A(i).perserver,"onUpdate:value":a[2]||(a[2]=e=>A(i).perserver=e),"show-button":!1,min:0},null,8,["value"])]),Xt])])),_:1}),L(d,{label:"Block single IP",path:"perip"},{default:N((()=>[D("div",Gt,[D("div",Qt,[L(m,{value:A(i).perip,"onUpdate:value":a[3]||(a[3]=e=>A(i).perip=e),"show-button":!1,min:0},null,8,["value"])]),Yt])])),_:1}),L(d,{label:"Traffic control",path:"limit_rate"},{default:N((()=>[D("div",Zt,[D("div",Jt,[L(m,{value:A(i).limit_rate,"onUpdate:value":a[4]||(a[4]=e=>A(i).limit_rate=e),"show-button":!1,min:0},null,8,["value"])]),el])])),_:1}),L(d,{label:" "},{default:N((()=>[L(h,{type:"primary",onClick:p},{default:N((()=>[S("Save")])),_:1})])),_:1})])),_:1},8,["model"])])}}}),tl={class:"w-420px"},ll={class:"mt-8px"},il=D("li",null,"Default indexes, one per line, priority top-to-bottom.",-1),nl=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),l=T(""),i=async()=>{const{message:e}=await Re({id:t.id});d(e)&&(l.value=f(e.result)?e.result.split(",").join("\n"):"")},n=async()=>{await Te({id:t.id,Index:l.value.trim().split("\n").join(",")}),i()};return i(),a({init:i}),(e,a)=>{const t=c,i=s,o=ba;return E(),j("div",null,[D("div",tl,[L(t,{value:A(l),"onUpdate:value":a[0]||(a[0]=e=>I(l)?l.value=e:null),type:"textarea",autosize:{minRows:12,maxRows:12},placeholder:""},null,8,["value"])]),D("div",ll,[L(i,{type:"primary",onClick:n},{default:N((()=>[S("Save")])),_:1})]),L(o,{class:"mt-16px"},{default:N((()=>[il])),_:1})])}}}),sl={class:"mt-8px"},ol=D("li",null,"This is primary configuration file of the site.",-1),rl=D("li",null,"Do not modify it at will if you do not know configuration rules.",-1),dl=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),l=w(),i=T(null),n=T((()=>{const{webserver:e}=l;return`/www/server/panel/vhost/${"openlitespeed"===e?`${e}/detail`:e}/${t.name}.conf`})()),o=async()=>{i.value?.getContent()},r=()=>{i.value?.saveFile()};return z((()=>{o()})),a({init:o}),(e,a)=>{const t=s,l=ba;return E(),j("div",null,[L(Pa,{ref_key:"configRef",ref:i,path:A(n),"onUpdate:path":a[0]||(a[0]=e=>I(n)?n.value=e:null),height:"500"},null,8,["path"]),D("div",sl,[L(t,{type:"primary",onClick:r},{default:N((()=>[S("Save")])),_:1})]),L(l,{class:"mt-16px"},{default:N((()=>[ol,rl])),_:1})])}}}),ul={class:"p-8"},cl=D("li",null,"Directory temporarily only supports reading alarm operation",-1),pl=R({__name:"form",setup(e,{expose:a}){const t=T(null),l=T(!1),i={path:{required:!0,message:"Please select the file directory",trigger:["blur","change"]},operation:{type:"array",required:!0,trigger:"change",message:"please select"}},n=$({path:"",operation:[]}),s=(e,a)=>{"dir"===a.type?(l.value=!0,n.operation=[0]):(l.value=!1,n.operation=[0,1,2])};return a({onConfirm:async()=>{await(t.value?.validate())}}),(e,a)=>{const o=ga,r=fa,d=xa,u=Da,c=ka,m=wa,h=p,v=ba;return E(),j("div",ul,[L(h,null,{default:N((()=>[L(m,{ref_key:"formRef",ref:t,model:A(n),rules:i},{default:N((()=>[L(r,{label:"Detection path",path:"path"},{default:N((()=>[L(o,{disabled:"",value:A(n).path,"onUpdate:value":a[0]||(a[0]=e=>A(n).path=e),"checked-type":["dir","file"],placeholder:"Please select the file directory",onChange:s},null,8,["value"])])),_:1}),L(r,{label:"Alert operation",path:"operation"},{default:N((()=>[L(c,{value:A(n).operation,"onUpdate:value":a[1]||(a[1]=e=>A(n).operation=e)},{default:N((()=>[L(u,null,{default:N((()=>[L(d,{value:0},{default:N((()=>[S(" Read ")])),_:1}),L(d,{value:1,disabled:A(l)},{default:N((()=>[S(" delete ")])),_:1},8,["disabled"]),L(d,{value:2,disabled:A(l)},{default:N((()=>[S(" Modify/increase ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["value"])])),_:1})])),_:1},8,["model"])])),_:1}),L(v,{class:"mt-16px"},{default:N((()=>[cl])),_:1})])}}}),ml={class:"p-5"},hl=D("img",{src:Ca,class:"w-5"},null,-1),vl={class:"mt-16px"},yl=D("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). ",-1),fl=D("li",null,"Police frequency: 60 seconds of alarm behavior will only send an alarm once",-1),wl=R({__name:"monitor",setup(e){const a=T(!1),t=T(!1),l=T([{key:"path",title:"path",ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:"type",ellipsis:{tooltip:{width:"trigger"}}},{key:"operation",title:"Alert operation",ellipsis:{tooltip:{width:"trigger"}}},{key:"name",title:"operate",ellipsis:{tooltip:{width:"trigger"}}}]),i=T([]);return(e,n)=>{const o=s,r=p,d=ee,u=ba,c=m;return E(),j("div",ml,[D("div",null,[L(r,{justify:"space-between"},{default:N((()=>[L(o,{type:"primary",onClick:n[0]||(n[0]=e=>a.value=!0)},{default:N((()=>[S(" Add monitor ")])),_:1}),L(o,null,{icon:N((()=>[hl])),_:1})])),_:1})]),D("div",vl,[L(d,{loading:A(t),"loading-num":6,data:A(i),columns:A(l)},null,8,["loading","data","columns"])]),D("div",null,[L(u,{class:"mt-16px"},{default:N((()=>[yl,fl,D("li",null,[L(o,{text:"",class:"color-#20a53a"},{default:N((()=>[S("Tutorial")])),_:1})])])),_:1})]),L(c,{show:A(a),"onUpdate:show":n[1]||(n[1]=e=>I(a)?a.value=e:null),title:"Add file monitor",width:500,"min-height":148,footer:!0,component:pl},null,8,["show"])])}}}),gl=g({},[["render",function(e,a){return E(),j("div",null,"555")}]]),_l=e=>(F("data-v-24287f9c"),e=e(),V(),e),bl={class:"box mt-16px"},xl=_l((()=>D("div",null,"Site protection",-1))),kl=_l((()=>D("div",null,"today: 0",-1))),Pl=_l((()=>D("div",null,"Total alarm: 0",-1))),Ul={key:0,class:"items-center warning"},Cl=_l((()=>D("img",{src:Sa,class:"h-8"},null,-1))),Ll={class:"warning"},Sl={class:"color-#f23836"},Rl=_l((()=>D("li",null," Based on the PHP kernel monitoring tools, real -time monitoring of other invasive behaviors such as Trojan horses and vulnerabilities, I found that Trojan supports automatic isolation ",-1))),Tl=_l((()=>D("li",null," The security alarm will monitor the behavior of the current website access to the non -current website file (for example: your site a.COM visited the file or directory of the site B.COM). When you wait for a cache, please do not turn on this option ",-1))),El=_l((()=>D("img",{src:La,class:"h-10"},null,-1))),jl=R({__name:"index",props:{isInstall:{type:Boolean,default:!1},phpVersion:{default:"PHP"}},setup(e){const a=w(),i=T(!1),n=T(!1),o=T(!1),r=e,d=_(),u=()=>{Ta({source:114})},c=()=>{const e=i.value?"Open the site security alarm":"Close the site security alarm",a=i.value?"After opening, the alarm notice will be sent when the safety problem is detected. Do you continue?":"After closing, the website will no longer receive a security alarm. Do you continue?";l({title:e,content:a,onConfirm:async()=>{const e=Ea(i.value);console.log(e,"result")},onPublicClose:()=>{i.value=!i.value}})};return(e,l)=>{const h=ha,v=p,y=s,f=ba,w=t,g=Ua,_=m;return E(),j(B,null,[D("div",bl,[L(g,{install:A(d).isPro,class:"install"},O({default:N((()=>[L(v,{class:"items-center color-#666"},{default:N((()=>[xl,D("div",null,[L(h,{value:A(i),"onUpdate:value":[l[0]||(l[0]=e=>I(i)?i.value=e:null),c]},null,8,["value"])]),kl,Pl,A(i)?M("",!0):(E(),j("div",Ul,[Cl,D("span",Ll,[S(" Please open "),D("span",Sl,"PHP-"+W(r.phpVersion),1),S(" protection first ")])]))])),_:1}),L(v,{class:"mt-16px"},{default:N((()=>[L(y,{onClick:l[1]||(l[1]=e=>n.value=!0)},{default:N((()=>[S("Monitor")])),_:1}),L(y,{onClick:l[2]||(l[2]=e=>o.value=!0)},{default:N((()=>[S("Trigger log")])),_:1})])),_:1}),L(f,{class:"mt-16px"},{default:N((()=>[Rl,Tl])),_:1})])),_:2},[r.isInstall?{name:"desc",fn:N((()=>[L(v,{class:"items-center"},{default:N((()=>[El,D("span",null,[S("If you need to use the [PHP website security alarm] function, please buy first "),L(w,{onClick:u},{default:N((()=>[S("click to buy")])),_:1})])])),_:1})])),key:"0"}:{name:"desc",fn:N((()=>[L(v,{class:"items-center"},{default:N((()=>[D("img",{src:La,class:"h-10"}),D("span",null,[S("Currently not installed [PHP website security alarm], "),L(w,null,{default:N((()=>[S("Click to install")])),_:1})])])),_:1})])),key:"1"}]),1032,["install"])]),L(_,{show:A(n),"onUpdate:show":l[3]||(l[3]=e=>I(n)?n.value=e:null),title:"XXXXmonitor",width:1e3,"min-height":148,footer:!1,component:wl},null,8,["show"]),L(_,{show:A(o),"onUpdate:show":l[4]||(l[4]=e=>I(o)?o.value=e:null),title:`[${A(a).siteName}] Site security log`,width:1e3,"min-height":148,footer:!1,component:gl},null,8,["show","title"])],64)}}}),Dl=g(jl,[["__scopeId","data-v-24287f9c"]]),Nl=D("div",null,"PHP version",-1),Al={class:"w-140px"},Il=D("li",null,"Select the version according to your program requirements",-1),$l=D("li",null,"Try not to use PHP5.2 unless you have to, as this can reduce your server security",-1),ql=D("li",null," PHP7 does not support the MySQL extension. The default installation is mysqli and mysql-pdo ",-1),Bl=D("li",null," [Customize] You can customize the PHP connection information by selecting the available PHP connection configuration ",-1),Ml=D("li",null,"[Customize] Currently only support NGINX",-1),Hl=D("li",null,"Support TCP or UNIX configuration. Example: 192.168.1.25:9001 or unix:/tmp/php8.sock",-1),Kl={class:"my-16px"},zl=D("div",null,"Session isolation",-1),Ol=D("li",null," When enabled, session files will be stored in a separate folder, not in a common storage location with other sites ",-1),Wl=D("li",null," Do not enable this option if you are saving sessions to caches such as memcache/redis in your PHP configuration ",-1),Fl={key:0,class:"my-16px"},Vl=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),l=w(),o=T(null),r=T(!1),u=T(!1);let c="";const m=T([]),v=async()=>{null!==o.value?(await Ee({siteName:t.name,version:o.value,other:c}),l.setRefresh(!0),g()):i.error("请选择PHP版本")},y=async()=>{const{message:e}=await Ae({id:t.id});d(e)&&(r.value=e.result)},f=async e=>{await je({id:t.id,act:e?1:0}),y()},g=()=>{(async()=>{const{message:e}=await ja();d(e)&&(u.value=e.php_status)})(),y(),(async()=>{const{message:e}=await Ne();n(e)&&(m.value=e.reverse().map((e=>({label:e.name,value:e.version}))))})(),(async()=>{const{message:e}=await De({siteName:t.name});d(e)&&(o.value=e.phpversion,c=e.php_other||"")})()};return g(),a({init:g}),(e,a)=>{const t=ya,l=s,i=p,n=ba,d=h,c=ha;return E(),j("div",null,[L(i,{class:"items-center"},{default:N((()=>[Nl,D("div",Al,[L(t,{value:A(o),"onUpdate:value":a[0]||(a[0]=e=>I(o)?o.value=e:null),options:A(m)},null,8,["value","options"])]),D("div",null,[L(l,{type:"primary",onClick:v},{default:N((()=>[S("Switch")])),_:1})])])),_:1}),L(n,{class:"mt-16px"},{default:N((()=>[Il,$l,ql,Bl,Ml,Hl])),_:1}),D("div",Kl,[L(d,{dashed:""})]),L(i,{class:"items-center"},{default:N((()=>[zl,D("div",null,[L(c,{value:A(r),"onUpdate:value":[a[1]||(a[1]=e=>I(r)?r.value=e:null),f]},null,8,["value"])])])),_:1}),L(n,{class:"mt-16px"},{default:N((()=>[Ol,Wl])),_:1}),A(b)?(E(),j("div",Fl,[L(d,{dashed:""}),L(Dl,{isInstall:A(u),phpVersion:A(o)},null,8,["isInstall","phpVersion"])])):M("",!0)])}}}),Xl={class:"mr-16px text-#777"},Gl={key:1,class:"text-#777"},Ql={class:"w-200px mr-8px"},Yl={class:"w-200px mr-8px"},Zl=R({__name:"index",setup(e,{expose:a}){const t=w(),{data:l}=Ha(),o=T(!1),r=T("--"),u=T("--"),p=T(l.cache_status),m=T(null),h=T([]),v=T(""),y=async()=>{await Ie({s_id:l.id,version:u.value}),b()},f=async e=>{await $e({version:l.php_version,sitename:l.name,act:e}),l.cache_status=e,t.setRefresh(!0)},g=async()=>{await qe({s_id:l.id})},_=async()=>{m.value?""!==v.value.trim()?await Be({s_id:l.id,user:m.value,new_pass:v.value}):i.error("Please enter new password"):i.error("Please select user")},b=async()=>{const e=i.loading("Getting Wordpress information, please wait...");try{await(async()=>{const{message:e}=await Me({s_id:l.id});d(e)&&(r.value=e.local_v,u.value=e.online_v,o.value=e.update)})(),await(async()=>{const{message:e}=await He({s_id:l.id});n(e)&&e.length>0?(h.value=e.map((e=>({label:e,value:e}))),m.value=e[0]):(h.value=[],m.value=null)})()}finally{e.close()}};return b(),a({init:b}),(e,a)=>{const t=s,l=fa,i=xa,n=ya,d=c,w=wa;return E(),j("div",null,[L(w,null,{default:N((()=>[L(l,{label:"WP Version"},{default:N((()=>[A(o)?(E(),j(B,{key:0},[D("div",Xl,"The current version is: "+W(A(r)),1),L(t,{type:"primary",onClick:y},{default:N((()=>[S("Upgrade to "+W(A(u)),1)])),_:1})],64)):(E(),j("span",Gl,"The latest version"))])),_:1}),L(l,{label:"Cache"},{default:N((()=>[L(i,{checked:A(p),"onUpdate:checked":[a[0]||(a[0]=e=>I(p)?p.value=e:null),f],class:"mr-16px"},{default:N((()=>[S(" Open cache ")])),_:1},8,["checked"]),L(t,{type:"primary",onClick:g},{default:N((()=>[S("Purge all cache")])),_:1})])),_:1}),L(l,{label:"Reset password"},{default:N((()=>[D("div",Ql,[L(n,{value:A(m),"onUpdate:value":a[1]||(a[1]=e=>I(m)?m.value=e:null),options:A(h)},null,8,["value","options"])]),D("div",Yl,[L(d,{value:A(v),"onUpdate:value":a[2]||(a[2]=e=>I(v)?v.value=e:null),placeholder:"Please enter a new password"},null,8,["value"])]),L(t,{type:"primary",onClick:_},{default:N((()=>[S("Save password")])),_:1})])),_:1})])),_:1})])}}}),Jl={class:"pt-8px"},ei={class:"w-180px mr-8px"},ai={class:"w-180px"},ti={class:"w-180px"},li={class:"w-280px"},ii={class:"w-180px"},ni={class:"w-180px"},si={class:"w-280px"},oi={class:"flex-1"},ri={key:0,class:"mb-16px text-error"},di={key:1,class:"mb-16px text-error"},ui=R({__name:"index",setup(e,{expose:a}){const{data:i}=Ha(),n=$({composer_version:"",php_version:"auto",composer_args:"install",composer_cmd:"",repo:"repos.packagist",composer_user:"www",composer_path:i.path}),o=T([]),r=[{label:"Install",value:"install"},{label:"Update",value:"update"}],u=[{label:"Official(packagist.org)",value:"repos.packagist"}],p=[{label:"www(recommend)",value:"www"},{label:"root(not suggested)",value:"root"}],m=T(""),h=T(""),v=async()=>{await Ke({repo:n.repo}),_()},y=async()=>{await ze({path:i.path}),_()},w=()=>{l({title:"Execute Composer",content:"The impact of Composer execution depends on the composer.json configuration file in this directory, Continue?",onConfirm:async()=>{await Oe({php_version:n.php_version,composer_args:n.composer_args,composer_cmd:n.composer_cmd,repo:n.repo,path:n.composer_path,user:n.composer_user}),_()}})},g=()=>{o.value.unshift({label:"Auto",value:"auto"})},_=async()=>{const{message:e}=await We({path:i.path});d(e)&&(n.composer_version=e.result,e.comp_json&&(m.value=e.comp_json),f(e.comp_lock)&&(h.value=e.comp_lock),o.value=e.php_versions.filter((e=>"00"!==e.version)).map((e=>({label:e.name,value:e.version}))),g())};return g(),_(),a({init:_}),(e,a)=>{const l=c,i=s,d=fa,f=ya,g=ga,_=t,b=wa;return E(),j("div",Jl,[L(b,{class:"px-8px"},{default:N((()=>[L(d,{label:"Version",path:"composer_version"},{default:N((()=>[D("div",ei,[L(l,{value:A(n).composer_version,"onUpdate:value":a[0]||(a[0]=e=>A(n).composer_version=e),disabled:!0,placeholder:""},null,8,["value"])]),L(i,{onClick:v},{default:N((()=>[S("Update")])),_:1})])),_:1}),L(d,{label:"PHP",path:"php_version"},{default:N((()=>[D("div",ai,[L(f,{value:A(n).php_version,"onUpdate:value":a[1]||(a[1]=e=>A(n).php_version=e),options:A(o)},null,8,["value","options"])])])),_:1}),L(d,{label:"Parameters",path:"composer_args"},{default:N((()=>[D("div",ti,[L(f,{value:A(n).composer_args,"onUpdate:value":a[2]||(a[2]=e=>A(n).composer_args=e),options:r},null,8,["value"])])])),_:1}),L(d,{label:"Extra commands",path:"composer_cmd"},{default:N((()=>[D("div",li,[L(l,{value:A(n).composer_cmd,"onUpdate:value":a[3]||(a[3]=e=>A(n).composer_cmd=e),placeholder:"App name or full Composer command"},null,8,["value"])])])),_:1}),L(d,{label:"Source",path:"repo"},{default:N((()=>[D("div",ii,[L(f,{value:A(n).repo,"onUpdate:value":a[4]||(a[4]=e=>A(n).repo=e),options:u},null,8,["value"])])])),_:1}),L(d,{label:"User",path:"composer_user"},{default:N((()=>[D("div",ni,[L(f,{value:A(n).composer_user,"onUpdate:value":a[5]||(a[5]=e=>A(n).composer_user=e),options:p},null,8,["value"])])])),_:1}),L(d,{label:"Dir",path:"composer_path"},{default:N((()=>[D("div",si,[L(g,{value:A(n).composer_path,"onUpdate:value":a[6]||(a[6]=e=>A(n).composer_path=e)},null,8,["value"])])])),_:1}),L(d,{label:" ","show-feedback":!1},{default:N((()=>[D("div",oi,[A(m)?(E(),j("div",ri,W(A(m)),1)):M("",!0),A(h)?(E(),j("div",di,[D("span",null,W(A(h)),1),L(_,{onClick:y},{default:N((()=>[S("[Delete]")])),_:1})])):M("",!0),L(i,{type:"primary",onClick:w},{default:N((()=>[S("Execute")])),_:1})])])),_:1})])),_:1})])}}}),ci={class:"px-20px py-24px"},pi={class:"w-120px"},mi={class:"w-120px"},hi={class:"w-200px"},vi={class:"w-200px"},yi={class:"w-200px"},fi=D("li",null," Type: The domain name selected or the path entered will be redirected to the specified URL ",-1),wi=D("li",null,"Target URL: Fill in the URL address you need to redirect to",-1),gi=D("li",null,"Mode: use 301 for permanent redirection and 302 for temporary redirection",-1),_i=D("li",null," Keep URI parameters: Whether the redirected URL has the sub-path or parameters of the source URL ",-1),bi=D("li",null,"Keep URI parameters: http://b.com/1.html ---\x3e http://a.com/1.html",-1),xi=D("li",null,"NOT Keep URI parameters: http://b.com/1.html ---\x3e http://a.com",-1),ki=R({__name:"form",props:{data:{}},setup(e,{expose:a}){const t=e,{isEdit:l,siteId:i,siteName:s,row:o,getList:r}=t.data,d=T(null),u=$({redirectname:`${(new Date).valueOf()}`,type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),m={redirectdomain:{trigger:["change"],validator:()=>0!==u.redirectdomain.length||new Error("Please select redirected domain")},redirectpath:{trigger:["blur","input"],validator:()=>""!==u.redirectpath.trim()||new Error("Please input redirect path")},tourl:{trigger:["blur","input"],validator:()=>""!==u.tourl.trim()||new Error("Please input target url")}},h=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],v=[{label:"301",value:"301"},{label:"302",value:"302"}],y=T([]),f=()=>{u.redirectdomain=[],u.redirectpath=""},{loading:w,setLoading:g}=ca();return l&&o&&(u.redirectname=o.redirectname,u.type=o.type,u.holdpath=o.holdpath,u.redirecttype=o.redirecttype,u.redirectpath=o.redirectpath,u.domainorpath=o.domainorpath,u.redirectdomain=o.redirectdomain,u.tourl=o.tourl),(async()=>{try{g(!0);const{message:e}=await ie({id:i});y.value=n(e)?e.map((e=>({label:e.name,value:e.name}))):[]}finally{g(!1)}})(),a({onConfirm:async({hide:e})=>{await(d.value?.validate());const a={...H(u),sitename:s};l?await Ve(a):await Fe(a),r?.(),e()}}),(e,a)=>{const t=ha,l=fa,i=p,n=ya,s=c,o=wa,r=ba;return E(),j("div",ci,[L(o,{ref_key:"formRef",ref:d,model:A(u),rules:m},{default:N((()=>[L(i,{size:60},{default:N((()=>[L(l,{label:"Enable"},{default:N((()=>[L(t,{value:A(u).type,"onUpdate:value":a[0]||(a[0]=e=>A(u).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1}),L(l,{label:"Keep URI param","label-width":"120"},{default:N((()=>[L(t,{value:A(u).holdpath,"onUpdate:value":a[1]||(a[1]=e=>A(u).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})])),_:1}),L(i,{size:30},{default:N((()=>[L(l,{label:"Type"},{default:N((()=>[D("div",pi,[L(n,{value:A(u).domainorpath,"onUpdate:value":[a[2]||(a[2]=e=>A(u).domainorpath=e),f],options:h},null,8,["value"])])])),_:1}),L(l,{label:"Mode","label-width":"70"},{default:N((()=>[D("div",mi,[L(n,{value:A(u).redirecttype,"onUpdate:value":a[3]||(a[3]=e=>A(u).redirecttype=e),options:v},null,8,["value"])])])),_:1})])),_:1}),"domain"===A(u).domainorpath?(E(),K(l,{key:0,label:"Source",path:"redirectdomain"},{default:N((()=>[D("div",hi,[L(n,{value:A(u).redirectdomain,"onUpdate:value":a[4]||(a[4]=e=>A(u).redirectdomain=e),multiple:!0,loading:A(w),options:A(y),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1})):M("",!0),"path"===A(u).domainorpath?(E(),K(l,{key:1,label:"Redirect path",path:"redirectpath"},{default:N((()=>[D("div",vi,[L(s,{value:A(u).redirectpath,"onUpdate:value":a[5]||(a[5]=e=>A(u).redirectpath=e),placeholder:""},null,8,["value"])])])),_:1})):M("",!0),L(l,{label:"Target URL",path:"tourl"},{default:N((()=>[D("div",yi,[L(s,{value:A(u).tourl,"onUpdate:value":a[6]||(a[6]=e=>A(u).tourl=e),placeholder:""},null,8,["value"])])])),_:1})])),_:1},8,["model"]),L(r,{class:"mt-12px"},{default:N((()=>[fi,wi,gi,_i,bi,xi])),_:1})])}}}),Pi={class:"p-20px"},Ui={class:"mt-12px"},Ci=D("li",null," This is the configuration file of the load balancing. Not modify if you do not understand the configuration rules. ",-1),Li=R({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:l,siteName:n,getList:o}=t.data,r=a,u=w(),c=T(""),p=T(""),m=T(""),h=async()=>{const{message:e}=await Ge({path:m.value,data:c.value,encoding:p.value});d(e)&&i.success(e.msg),o?.(),r("close")};return(async()=>{const{message:e}=await Xe({sitename:n,redirectname:l.redirectname,webserver:u.webserver});d(e)&&(m.value=e.file,c.value=e.data,p.value=e.encoding)})(),(e,a)=>{const t=s,l=ba;return E(),j("div",Pi,[L(Pa,{value:A(c),"onUpdate:value":a[0]||(a[0]=e=>I(c)?c.value=e:null),height:350,"show-tips":!1},null,8,["value"]),D("div",Ui,[L(t,{type:"primary",onClick:h},{default:N((()=>[S("Save")])),_:1})]),L(l,{class:"mt-24px"},{default:N((()=>[Ci])),_:1})])}}}),Si=R({__name:"index",setup(e,{expose:a}){const{data:i}=Ha(),r=e=>({sitename:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:d,table:u,columns:c}=J([{type:"selection",width:40},{key:"sitename",title:"Type",ellipsis:{tooltip:{width:"trigger"}}},{key:"redirecttype",title:"Mode",width:90},{key:"holdpath",title:"Keep URI param",width:140,render:e=>L(t,{type:1===e.holdpath?"primary":"error",onClick:async()=>{await Qe({...r(e),type:e.type,holdpath:1===e.holdpath?0:1,status:e.type}),e.holdpath=1===e.holdpath?0:1}},{default:()=>[1===e.holdpath?"Enable":"Turn off"]})},{key:"type",title:"Status",width:100,render:e=>L(va,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async a=>{await Qe({...r(e),type:a,holdpath:e.holdpath,status:e.type}),e.type=a}},null)},ma({width:120,options:e=>[{label:"Conf",onClick:()=>{b(e)}},{label:"Edit",onClick:()=>{g(e)}},{label:"Del",onClick:()=>{l({title:`Delete redirection [${e.redirectname}]`,content:"Are you sure to delete the redirection?",onConfirm:async({hide:a})=>{await Ye({sitename:i.name,redirectname:e.redirectname}),y(),a()}})}}]})]),p=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete",desc:"Please be cautious, The selected item will be [delete] after confirmation",columns:[c.value[1]],api:e=>Ye({sitename:i.name,redirectname:e.redirectname},!1),done:()=>{y()}}}],{loading:h,setLoading:v}=ca(),y=async()=>{try{v(!0);const{message:e}=await Ze({sitename:i.name});u.data=n(e)?e:[]}finally{d.value=[],v(!1)}},f=o("Create redirection",{row:void 0,siteId:i.id,siteName:i.name,isEdit:!1,getList:y}),w=()=>{f.data.row=void 0,f.data.isEdit=!1,f.title="Create redirection",f.show=!0},g=e=>{f.data.row=e,f.data.isEdit=!0,f.title=`Modify redirection [${e.redirectname}]`,f.show=!0},_=o("",{row:void 0,siteName:i.name,getList:y}),b=e=>{_.data.row=e,_.title=`Edit profile [${e.redirectname}]`,_.show=!0};return y(),a({init:y}),(e,a)=>{const t=s,l=ee,i=Z,n=Y,o=m;return E(),j("div",null,[L(n,null,{toolsLeft:N((()=>[L(t,{type:"primary",onClick:w},{default:N((()=>[S("Add redirection")])),_:1})])),table:N((()=>[L(l,{"checked-row-keys":A(d),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>I(d)?d.value=e:null),"row-key":"redirectname",loading:A(h),"max-height":440,data:A(u).data,columns:A(c)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:N((()=>[L(i,{"checked-row-keys":A(d),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>I(d)?d.value=e:null),"row-key":"redirectname",data:A(u).data,options:p},null,8,["checked-row-keys","data"])])),_:1}),L(o,{show:A(f).show,"onUpdate:show":a[2]||(a[2]=e=>A(f).show=e),title:A(f).title,data:A(f).data,width:660,footer:!0,component:ki},null,8,["show","title","data"]),L(o,{show:A(_).show,"onUpdate:show":a[3]||(a[3]=e=>A(_).show=e),title:A(_).title,data:A(_).data,width:580,component:Li},null,8,["show","title","data"])])}}}),Ri={class:"px-20px py-24px"},Ti={class:"w-220px"},Ei={class:"w-220px"},ji={class:"w-220px"},Di={class:"w-220px"},Ni={class:"w-220px"},Ai={class:"w-220px"},Ii={class:"w-220px"},$i=D("span",null,"Add content replacement",-1),qi=D("li",null," Proxy dir: When accessing this dir, the content of the target URL will be displayed (Advanced Needs) ",-1),Bi=D("li",null," Target URL:Fill in the website you need to proxy, the target URL must be an accessible URL ",-1),Mi=D("li",null," Sent Domain: Add the domain name to the request header and pass it to the proxy server ",-1),Hi=D("li",null," Content replacement: Nginx exclusive, replace the content of the website with the specified content ",-1),Ki=R({__name:"form",props:{data:{}},setup(e,{expose:a}){const l=e,{isEdit:i,siteName:n,row:o,getList:r}=l.data,d=T(null),u=$({type:1,proxyname:"",cachetime:1,proxydir:"/",proxysite:"http://",todomain:"$host",cache:0,advanced:0,sitename:n}),m={proxyname:{trigger:["blur","input"],validator:()=>""!==u.proxyname.trim()||new Error("Please input proxy name")},cachetime:{trigger:["blur","input"],validator:()=>!(1===u.cache&&!u.cachetime)||new Error("Please input cache time")},proxydir:{trigger:["blur","input"],validator:()=>1!==u.advanced||""!==u.proxydir.trim()||new Error("Please input proxy dir")},proxysite:{trigger:["blur","input"],validator:()=>""!==u.proxysite.trim()||new Error("Please input target url")},todomain:{trigger:["blur","input"],validator:()=>""!==u.todomain.trim()||new Error("Please input sent Domain")}},h=e=>{e=(e=e.replace(/^http[s]?:\/\//,"")).replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(e)?u.todomain="$host":u.todomain=e},v=T([]),f=()=>{v.value.length>=3||v.value.push({sub1:"",sub2:""})};return f(),(()=>{if(i&&o){u.type=o.type,u.cache=o.cache,u.advanced=o.advanced,u.proxyname=o.proxyname,u.cachetime=o.cachetime,u.proxydir=o.proxydir,u.proxysite=o.proxysite,u.todomain=o.todomain,u.sitename=o.sitename;const e=o.subfilter.filter((e=>""!==e.sub1||""!==e.sub2));e.length>0&&(v.value=e)}})(),a({onConfirm:async({hide:e})=>{await(d.value?.validate());const a=(()=>{const e=[{sub1:"",sub2:""},{sub1:"",sub2:""},{sub1:"",sub2:""}];return e.forEach(((e,a)=>{v.value.length-1<a||(e.sub1=v.value[a].sub1,e.sub2=v.value[a].sub2)})),{...H(u),subfilter:e}})();i?await ea(a):await Je(a),r?.(),e()}}),(e,a)=>{const l=ha,n=fa,o=p,r=c,w=y,g=Na,_=Aa,b=t,x=s,k=wa,P=ba;return E(),j("div",Ri,[L(k,{ref_key:"formRef",ref:d,model:A(u),rules:m},{default:N((()=>[L(o,{size:32},{default:N((()=>[L(n,{label:"Enable proxy"},{default:N((()=>[L(l,{value:A(u).type,"onUpdate:value":a[0]||(a[0]=e=>A(u).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1}),L(n,{label:"Enable cache","label-width":"100"},{default:N((()=>[L(l,{value:A(u).cache,"onUpdate:value":a[1]||(a[1]=e=>A(u).cache=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1}),L(n,{label:"Advanced feature","label-width":"126"},{default:N((()=>[L(l,{value:A(u).advanced,"onUpdate:value":a[2]||(a[2]=e=>A(u).advanced=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})])),_:1}),L(n,{label:"Proxy name"},{default:N((()=>[D("div",Ti,[L(r,{value:A(u).proxyname,"onUpdate:value":a[3]||(a[3]=e=>A(u).proxyname=e),disabled:A(i),placeholder:""},null,8,["value","disabled"])])])),_:1}),1===A(u).cache?(E(),K(n,{key:0,label:"Cache time",path:"cachetime"},{default:N((()=>[D("div",Ei,[L(_,null,{default:N((()=>[L(w,{value:A(u).cachetime,"onUpdate:value":a[4]||(a[4]=e=>A(u).cachetime=e),min:1,"show-button":!1,placeholder:""},null,8,["value"]),L(g,{class:"w-70px text-center"},{default:N((()=>[S(W(A(u).cachetime>1?"Minutes":"Minute"),1)])),_:1})])),_:1})])])),_:1})):M("",!0),1===A(u).advanced?(E(),K(n,{key:1,label:"Proxy dir",path:"proxydir"},{default:N((()=>[D("div",ji,[L(r,{value:A(u).proxydir,"onUpdate:value":a[5]||(a[5]=e=>A(u).proxydir=e),placeholder:""},null,8,["value"])])])),_:1})):M("",!0),L(n,{label:"Target URL"},{default:N((()=>[D("div",Di,[L(r,{value:A(u).proxysite,"onUpdate:value":[a[6]||(a[6]=e=>A(u).proxysite=e),h],placeholder:""},null,8,["value"])])])),_:1}),L(n,{label:"Sent Domain"},{default:N((()=>[D("div",Ni,[L(r,{value:A(u).todomain,"onUpdate:value":a[7]||(a[7]=e=>A(u).todomain=e),placeholder:""},null,8,["value"])])])),_:1}),L(n,{label:"Content replace"},{default:N((()=>[L(o,{class:"flex-1",vertical:""},{default:N((()=>[(E(!0),j(B,null,X(A(v),((e,a)=>(E(),K(o,{key:`${a+1}`,class:"items-center"},{default:N((()=>[D("div",Ai,[L(r,{value:e.sub1,"onUpdate:value":a=>e.sub1=a,placeholder:"Source Text"},null,8,["value","onUpdate:value"])]),D("div",Ii,[L(r,{value:e.sub2,"onUpdate:value":a=>e.sub2=a,placeholder:"Replace to, can be blank"},null,8,["value","onUpdate:value"])]),D("div",null,[L(b,{type:"error",disabled:0===a&&1===A(v).length,onClick:e=>(e=>{v.value.length<=1||v.value.splice(e,1)})(a)},{default:N((()=>[S(" Del ")])),_:2},1032,["disabled","onClick"])])])),_:2},1024)))),128)),D("div",null,[L(x,{type:"primary",disabled:A(v).length>=3,onClick:f},{default:N((()=>[$i])),_:1},8,["disabled"])])])),_:1})])),_:1})])),_:1},8,["model"]),L(P,{class:"mt-12px"},{default:N((()=>[qi,Bi,Mi,Hi])),_:1})])}}}),zi={class:"p-20px"},Oi={class:"mt-12px"},Wi=D("li",null," This is the configuration file of the load balancing. Not modify if you do not understand the configuration rules. ",-1),Fi=R({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:a}){const t=e,{row:l,siteName:n,getList:o}=t.data,r=a,u=w(),c=T(""),p=T(""),m=T(""),h=async()=>{const{message:e}=await ta({path:m.value,data:c.value,encoding:p.value});d(e)&&i.success(e.msg),o?.(),r("close")};return(async()=>{const{message:e}=await aa({sitename:n,proxyname:l.proxyname,webserver:u.webserver});d(e)&&(m.value=e.file,c.value=e.data,p.value=e.encoding)})(),(e,a)=>{const t=s,l=ba;return E(),j("div",zi,[L(Pa,{value:A(c),"onUpdate:value":a[0]||(a[0]=e=>I(c)?c.value=e:null),height:350,"show-tips":!1},null,8,["value"]),D("div",Oi,[L(t,{type:"primary",onClick:h},{default:N((()=>[S("Save")])),_:1})]),L(l,{class:"mt-24px"},{default:N((()=>[Wi])),_:1})])}}}),Vi=R({__name:"index",setup(e,{expose:a}){const{data:i}=Ha(),r=e=>({proxyname:e.proxyname,sitename:e.sitename,proxydir:e.proxydir,proxysite:e.proxysite,todomain:e.todomain,subfilter:e.subfilter,advanced:e.advanced,cachetime:e.cachetime}),{keys:d,table:u,columns:c}=J([{type:"selection",width:40},{key:"proxyname",title:"Name",width:80,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxydir",title:"Proxy dir",width:90,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxysite",title:"Target URL",ellipsis:{tooltip:{width:"trigger"}},render:e=>L("a",{class:"text-primary text-primary-hover",href:e.proxysite,target:"_blank"},[e.proxysite])},{key:"cache",title:"Cache",width:90,render:e=>L(t,{type:1===e.cache?"primary":"error",onClick:async()=>{await ea({...r(e),type:e.type,cache:1===e.cache?0:1}),e.cache=1===e.cache?0:1}},{default:()=>[1===e.cache?"Enabled":"Disabled"]})},{key:"type",title:"Status",width:90,render:e=>L(va,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async a=>{await ea({...r(e),type:a,cache:e.cache}),e.type=a}},null)},ma({width:120,options:e=>[{label:"Conf",onClick:()=>{b(e)}},{label:"Edit",onClick:()=>{g(e)}},{label:"Del",onClick:()=>{l({title:`Delete reverse proxy [${e.proxyname}]`,content:"Are you sure to delete from list?",onConfirm:async({hide:a})=>{await la({sitename:i.name,proxyname:e.proxyname}),y(),a()}})}}]})]),p=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete",desc:"Please be cautious, The selected item will be [delete] after confirmation",api:e=>la({sitename:i.name,proxyname:e.proxyname},!1),done:()=>{y()},columns:[{key:"proxyname",title:"Name",ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:h,setLoading:v}=ca(),y=async()=>{try{v(!0);const{message:e}=await ia({sitename:i.name});u.data=n(e)?e:[]}finally{d.value=[],v(!1)}},f=o("Create reverse proxy",{row:void 0,siteName:i.name,isEdit:!1,getList:y}),w=()=>{f.data.row=void 0,f.data.isEdit=!1,f.title="Create reverse proxy",f.show=!0},g=e=>{f.data.row=e,f.data.isEdit=!0,f.title=`Modify redirection [${e.proxyname}]`,f.show=!0},_=o("",{row:void 0,siteName:i.name,getList:y}),b=e=>{_.data.row=e,_.title=`Edit profile [${e.proxyname}]`,_.show=!0};return y(),a({init:y}),(e,a)=>{const t=s,l=ee,i=Z,n=Y,o=m;return E(),j("div",null,[L(n,null,{toolsLeft:N((()=>[L(t,{type:"primary",onClick:w},{default:N((()=>[S("Add reverse proxy")])),_:1})])),table:N((()=>[L(l,{"checked-row-keys":A(d),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>I(d)?d.value=e:null),"row-key":"proxyname",loading:A(h),"max-height":440,data:A(u).data,columns:A(c)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:N((()=>[L(i,{"checked-row-keys":A(d),"onUpdate:checkedRowKeys":a[1]||(a[1]=e=>I(d)?d.value=e:null),"row-key":"proxyname",data:A(u).data,options:p},null,8,["checked-row-keys","data"])])),_:1}),L(o,{show:A(f).show,"onUpdate:show":a[2]||(a[2]=e=>A(f).show=e),title:A(f).title,data:A(f).data,width:660,footer:!0,component:Ki},null,8,["show","title","data"]),L(o,{show:A(_).show,"onUpdate:show":a[3]||(a[3]=e=>A(_).show=e),title:A(_).title,data:A(_).data,width:580,component:Fi},null,8,["show","title","data"])])}}}),Xi={class:"pt-8px"},Gi=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),l=T();return a({init:()=>{l.value.init()}}),(e,a)=>(E(),j("div",Xi,[L(Ra,{ref_key:"formRef",ref:l,site:A(t)},null,8,["site"])]))}}),Qi=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),l=T("None"),{loading:i,setLoading:n}=ca(),s=async()=>{try{n(!0);const{message:e}=await na({siteName:t.name});d(e)&&(l.value=f(e.result)?e.result:"None")}finally{n(!1)}};return s(),a({init:s}),(e,a)=>{const t=Ia,n=$a;return E(),K(n,{class:"h-560px",show:A(i)},{default:N((()=>[L(t,{log:A(l)},null,8,["log"])])),_:1},8,["show"])}}}),Yi=R({__name:"index",setup(e,{expose:a}){const{data:t}=Ha(),l=T("None"),{loading:i,setLoading:n}=ca(),s=async()=>{try{n(!0);const{message:e}=await sa({siteName:t.name});d(e)&&(l.value=f(e.result)?e.result:"None")}finally{n(!1)}};return s(),a({init:s}),(e,a)=>{const t=Ia,n=$a;return E(),K(n,{class:"h-560px",show:A(i)},{default:N((()=>[L(t,{log:A(l)},null,8,["log"])])),_:1},8,["show"])}}}),Zi=R({__name:"logs",props:{data:{}},setup(e){const a=e,{type:t,path:l}=a.data,i=T(""),{loading:n,setLoading:s}=ca();return(async()=>{try{s(!0);const{message:e}=await oa({type:t,path:l});d(e)&&(i.value=e.result)}finally{s(!1)}})(),(e,a)=>{const t=Ia,l=$a;return E(),K(l,{class:"w-650px h-550px bg-#282C34",show:A(n)},{default:N((()=>[L(t,{log:A(i)},null,8,["log"])])),_:1},8,["show"])}}}),Ji=D("li",null,[S(" Log analysis: Scan the logs(/www/wwwroot/.log) for requests with attack (types include: "),D("span",{class:"text-error"},"xss,sql,san,php"),S(") ")],-1),en=D("li",null,"Analyzed log data contains intercepted requests",-1),an=D("li",null,"By default, the last scan data is displayed (if not, please click log scan)",-1),tn=D("li",null,"If the log file is too large, scanning may take a long time, please be patient",-1),ln={class:"w-400px p-20px"},nn=D("div",{class:"mb-16px"},"Scanning, scanning progress...",-1),sn=R({__name:"index",setup(e,{expose:a}){const n=w(),{data:o}=Ha(),r=G((()=>{let e="";switch(n.webserver){case"nginx":e=".log";break;case"apache":e="-access_log";break;default:e="_ols.access_log"}return`/www/wwwlogs/${o.name}${e}`})),u=G((()=>{const e=r.value.split("/");return e[e.length-1]})),c=()=>{l({title:"Scan website logs",content:`It is recommended to perform security analysis when the server load is low. This time, the [${u.value}] file will be scanned. It may take a long time. Do you want to continue?`,onConfirm:async({hide:e})=>{await ra({path:r.value}),e(),v()}})},p=T(!1),h=T(0),v=async()=>{p.value=!0,y()},y=(e=0)=>{let a=setTimeout((async()=>{const{message:e}=await da({path:r.value});d(e)&&(h.value=e.result,h.value>=100?(i.success("Scan complete"),p.value=!1,h.value=0,P(),clearTimeout(a)):y(1e3))}),e)},f=e=>{x({title:`[${e}] log details`,data:{type:e,path:r.value},component:Zi})},{table:g,columns:_}=J([{key:"start_time",title:"Date"},{key:"time",title:"Time",render:e=>`${e.time.substring(0,4)} s`},{key:"xss",title:"XSS",render:e=>e.xss>0?L("span",{class:"text-error"},[e.xss]):e.xss},{key:"sql",title:"SQL",render:e=>e.sql>0?L("span",{class:"text-error"},[e.sql]):e.sql},{key:"san",title:"Sacn",render:e=>e.san>0?L("span",{class:"text-error"},[e.san]):e.san},{key:"php",title:"PHP",render:e=>e.php>0?L("span",{class:"text-error"},[e.php]):e.php},{key:"ip",title:"IP (top100)",render:e=>e.ip>0?L(t,{onClick:()=>{f("ip")}},{default:()=>[e.ip]}):e.ip},{key:"url",title:"URL (top100)",render:e=>e.url>0?L(t,{onClick:()=>{f("url")}},{default:()=>[e.url]}):e.url}]),{loading:b,setLoading:k}=ca(),P=async()=>{try{k(!0);const{message:e}=await ua({path:r.value});d(e)&&(g.data=[e])}finally{k(!1)}},U=()=>{P()};return U(),a({init:U}),(e,a)=>{const l=s,i=ee,n=Y,o=ba,r=qa,d=m;return E(),j("div",null,[L(n,null,{toolsLeft:N((()=>[L(l,{type:"primary",onClick:c},{default:N((()=>[S("Log scan")])),_:1})])),table:N((()=>[L(i,{loading:A(b),"loading-num":1,data:A(g).data,columns:A(_)},null,8,["loading","data","columns"])])),_:1}),L(o,{class:"mt-16px"},{default:N((()=>[Ji,en,an,tn,D("li",null,[L(t,{href:"https://forum.aapanel.com/d/3351-nginx-waf-instructions",target:"_blank"},{default:N((()=>[S(" aaPanel WAF ")])),_:1}),S(" can effectively block such attacks ")])])),_:1}),L(d,{show:A(p),"onUpdate:show":a[0]||(a[0]=e=>I(p)?p.value=e:null)},{default:N((()=>[D("div",ln,[nn,L(r,{type:"line",status:"success",height:24,percentage:A(h),"border-radius":4,"indicator-placement":"inside"},null,8,["percentage"])])])),_:1},8,["show"])])}}}),on=R({__name:"index",setup(e,{expose:a}){const{config:t}=Ha(),l=T("access"),i=T(),n=[{key:"access",label:"Access log",component:Qi},{key:"error",label:"Error log",component:Yi},{key:"security",label:"Log Security Analysis",component:sn}];return l.value=t.subMenu||"access",t.subMenu="",a({init:()=>{l.value="access",Q((()=>{i.value?.init()}))}}),(e,a)=>{const t=_a;return E(),K(t,{value:A(l),"onUpdate:value":a[0]||(a[0]=e=>I(l)?l.value=e:null),ref_key:"tabsRef",ref:i,data:n},null,8,["value"])}}}),rn={class:"h-full"},dn=R({__name:"index",props:{siteInfo:{},config:{}},setup(e){const t=w(),{siteName:l}=P(t),i=q((()=>r((()=>a.import("./index-legacy124.js?v=1720690738171")),void 0))),n=q((()=>r((()=>a.import("./old-legacy4.js?v=1720690738171")),void 0))),s=e,{siteInfo:o,config:d}=s;l.value=s.siteInfo.name;const u=T();o&&U(Ma,{data:o,config:d});const c=T("domain"),p=[{key:"domain",label:"Domain Manager",component:Ga},{key:"subdirectory",label:"Subdirectory binding",component:et},{key:"directory",label:"Site directory",component:yt},{key:"access",label:"Limit access",component:zt},{key:"traffic",label:"Traffic control",component:al},{key:"rewrite",label:"URL rewrite",component:i},{key:"document",label:"Default indexes",component:nl},{key:"config",label:"Config",component:dl},{key:"ssl",label:"SSL",component:n},{key:"php",label:"PHP version",component:Vl},{key:"wordpress",label:"Wordpress Setting",show:"WP"===o?.project_type,component:Zl},{key:"composer",label:"Composer",component:ui},{key:"redirect",label:"Redirect",component:Si},{key:"proxy",label:"Reverse proxy",component:Vi},{key:"hotlink",label:"Hotlink Protection",component:Gi},{key:"logs",label:"Response log",component:on}];return c.value=d.menu||"domain",d.menu="",(e,a)=>{const t=k;return E(),j("div",rn,[L(t,{value:A(c),"onUpdate:value":a[0]||(a[0]=e=>I(c)?c.value=e:null),ref_key:"tabsRef",ref:u,data:p},null,8,["value"])])}}}),un=Object.freeze(Object.defineProperty({__proto__:null,default:dn},Symbol.toStringTag,{value:"Module"}));e("i",un)}}}));
