import{a as t,_ as a,n as e,b2 as s,h as r,B as o,q as i}from"./index.js?v=1720690738171";import{s as n,b as p,r as l,c as d,d as c}from"./index25.js?v=1720690738171";import{l as m,S as u,Z as v,_ as y,a3 as x,aj as f,a5 as j,a6 as _,r as w,P as b,F as T,ag as g,U as S,W as h,V as C,q as k,b as I}from"./vue.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./useLoop.js?v=1720690738171";import"./useTableColumns.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./useAccount.js?v=1720690738171";import"./index42.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Countdown.js?v=1720690738171";import"./Select.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./use-theme-vars.js?v=1720690738171";import"./useTableData.js?v=1720690738171";import"./Skeleton.js?v=1720690738171";import"./DataTable.js?v=1720690738171";import"./Checkbox.js?v=1720690738171";import"./Ellipsis.js?v=1720690738171";import"./omit.js?v=1720690738171";import"./useLoading.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1720690738171";import"./index72.js?v=1720690738171";import"./data.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang9.js?v=1720690738171";import"./Tabs.js?v=1720690738171";const L=(t=>(j("data-v-ffc5901a"),t=t(),_(),t))((()=>y("div",{class:"mark"},null,-1))),W=t(m({__name:"info",props:{data:{}},setup:t=>(t,a)=>(u(),v("div",{class:f(["info",t.data.type])},[L,y("div",null,x("start"===t.data.type?t.data.startText:t.data.loadText+"..."),1)],2))}),[["__scopeId","data-v-ffc5901a"]]),E=t=>(j("data-v-c1026149"),t=t(),_(),t),P={class:"w-466px p-16px text-[#555]"},R={class:"flex items-center text-error"},q=E((()=>y("span",{class:"ml-8px leading-17px"}," Warning, If this server is a container, please cancel ",-1))),D=E((()=>y("div",{class:"my-10px leading-26px"}," Safe reboot helps protect files, and will do the following: ",-1))),M={class:"safe-restart"},Q=t(m({__name:"index",emits:["setConfirm"],setup(t,{expose:r,emit:o}){const i=o,c=w([{type:"start",startText:"Stop web service",loadText:"Stopping web service"},{type:"start",startText:"Stop MySQL service",loadText:"Stopping MySQL service"},{type:"start",startText:"Start to reboot server",loadText:"Start to reboot server"},{type:"start",startText:"Waiting server to start",loadText:"Waiting server to start"}]),m=()=>{setTimeout((async()=>{try{await d(),e.success("Server rebooted successfully!"),s()}catch(t){m()}}),1e3)};return r({onConfirm:async()=>{i("setConfirm",{loading:!0,disabled:!0});try{await(async()=>{c.value[0].type="load",await n(),c.value[0].type="done"})(),await(async()=>{c.value[1].type="load",await p(),c.value[1].type="done"})(),await(async()=>{c.value[2].type="load",await l(),c.value[2].type="done"})(),await(async()=>{c.value[3].type="load";try{await d()}finally{c.value[3].type="done"}})(),m()}catch(t){c.value.forEach((t=>{t.type="start"})),i("setConfirm",{loading:!1,disabled:!1})}}}),(t,e)=>{const s=a;return u(),v("div",P,[y("div",R,[b(s,{name:"common-ask",size:"17"}),q]),D,y("div",M,[(u(!0),v(T,null,g(h(c),(t=>(u(),S(W,{key:t.startText,data:t},null,8,["data"])))),128))])])}}}),[["__scopeId","data-v-c1026149"]]),U={class:"flex items-center justify-center h-110px px-30px"},z=t(m({__name:"index",setup(t){const a=w(!1),e=()=>{a.value=!0},n=()=>{r({title:"Restart panel service",content:"Panel service will restart, continue?",onConfirm:async()=>{await c(!0),s(3e3)}})};return(t,s)=>{const r=o,p=i;return u(),v("div",U,[b(r,{type:"primary",onClick:e},{default:C((()=>[k("Restart server")])),_:1}),b(r,{type:"primary",class:"ml-32px",onClick:n},{default:C((()=>[k("Restart panel")])),_:1}),b(p,{show:h(a),"onUpdate:show":s[0]||(s[0]=t=>I(a)?a.value=t:null),title:"Safely reboot server",footer:!0,component:Q},null,8,["show"])])}}}),[["__scopeId","data-v-a1d72b1f"]]);export{z as default};
