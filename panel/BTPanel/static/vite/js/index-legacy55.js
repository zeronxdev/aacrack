System.register(["./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1720690738171","./useTableData-legacy.js?v=1720690738171","./index-legacy.js?v=1720690738171","./useTableColumns-legacy.js?v=1720690738171","./useLoading-legacy.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./Skeleton-legacy.js?v=1720690738171","./DataTable-legacy.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./Ellipsis-legacy.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./Tag-legacy.js?v=1720690738171","./Empty-legacy.js?v=1720690738171","./omit-legacy.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./Progress-legacy.js?v=1720690738171"],(function(e,t){"use strict";var l,a,i,s,n,r,o,u,c,d,g,y,p,h,m,w,f,k,j,b,_,v,x,C;return{setters:[e=>{l=e._},e=>{a=e.u,i=e._},e=>{s=e.u,n=e.K,r=e.J,o=e.ds,u=e.dz,c=e.h,d=e.dA,g=e.dB,y=e.k,p=e.n,h=e.dC,m=e.B},e=>{w=e.b},e=>{f=e.u},e=>{k=e.l,j=e.S,b=e.Z,_=e.P,v=e.V,x=e.q,C=e.W},null,null,null,null,null,null,null,null,null,null],execute:function(){const t={class:"p-20px"};e("default",k({__name:"index",props:{data:{}},setup(e){const k=e,{sid:L}=k.data,D=s(),B=async()=>{if(null===L)throw p.error("Please select remote database!"),new Error("sid is null");await h({sid:L}),F()},{table:z,columns:E}=a([{key:"name",title:"File name",width:180,ellipsis:{tooltip:{width:"trigger"}}},{key:"filepath",title:"File path",ellipsis:{tooltip:{width:"trigger"}}},{key:"mtime",title:"Backup time",width:150,render:e=>n(e.mtime)},{key:"size",title:"File size",width:80,render:e=>r(e.size)},{key:"sid",title:"Backup location",width:120,render:e=>{let t="--";for(let l=0;l<D.remoteList.length;l++)if(`${D.remoteList[l].id}`===e.sid){t=D.remoteList[l].ps||D.remoteList[l].db_host;break}return t}},w({width:100,options:e=>[{label:"Repair",onClick:()=>{o({text:"Overwrite the data",title:"Overwrite the data",content:`Data will be overwritten using [${e.name}], Do you want to continue?`,onConfirm:async({hide:t})=>{if(null===L)throw new Error("sid is null");await u({file:e.filepath,sid:L}),D.setRefresh(!0),t()}})}},{label:"Del",onClick:()=>{c({title:"Delete backup",content:`Whether to delete the [${e.name}] backup`,onConfirm:async({hide:t})=>{await d({file:e.filepath}),F(),t()}})}}]})]),{loading:S,setLoading:T}=f(),F=async()=>{try{T(!0);const{message:e}=await g();z.data=y(e)?e:[]}finally{T(!1)}};return F(),(e,a)=>{const s=m,n=i,r=l;return j(),b("div",t,[_(r,null,{toolsLeft:v((()=>[_(s,{type:"primary",onClick:B},{default:v((()=>[x("Backup")])),_:1})])),table:v((()=>[_(n,{"max-height":400,loading:C(S),columns:C(E),data:C(z).data},null,8,["loading","columns","data"])])),_:1})])}}}))}}}));
