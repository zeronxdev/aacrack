import{_ as e}from"./index53.js?v=1720690738171";import{_ as a,a as t}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import{j as s,a9 as l,B as i}from"./index.js?v=1720690738171";import{aH as r,R as n}from"./site2.js?v=1720690738171";import{l as d,d as c,r as o,f as u,S as p,Z as h,P as m,V as f,_ as v,W as x,q as g}from"./vue.js?v=1720690738171";import{_ as w}from"./Checkbox.js?v=1720690738171";const _="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='200.00px'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23fc732f'%20d='M512%20992C246.912%20992%2032%20777.088%2032%20512%2032%20246.912%20246.912%2032%20512%2032c265.088%200%20480%20214.912%20480%20480%200%20265.088-214.912%20480-480%20480zM480%20256v352a32%2032%200%200%200%2064%200V256a32%2032%200%200%200-64%200z%20m-16%20528a48%2048%200%201%200%2096%200%2048%2048%200%200%200-96%200z'%20/%3e%3c/svg%3e",b="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='200.00px'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23fc732f'%20d='M512%20913.92c-228.352%200-414.208-185.856-414.208-414.208S283.648%2086.016%20512%2086.016c228.352%200%20414.208%20185.856%20414.208%20414.208s-185.856%20413.696-414.208%20413.696z%20m0-776.704c-200.192%200-363.008%20162.816-363.008%20363.008%200%20200.192%20162.816%20363.008%20363.008%20363.008s363.008-162.816%20363.008-363.008c0-200.192-162.816-363.008-363.008-363.008z'%20/%3e%3cpath%20fill='%23fc732f'%20d='M512.512%20672.256h-1.536c-13.824%200-24.576-11.264-24.576-24.576V256.512c0-13.824%2011.264-24.576%2024.576-24.576h1.536c13.824%200%2024.576%2011.264%2024.576%2024.576v391.168c0.512%2013.824-10.752%2024.576-24.576%2024.576z'%20/%3e%3cpath%20fill='%23fc732f'%20d='M512%20749.568m-25.6%200a25.6%2025.6%200%201%200%2051.2%200%2025.6%2025.6%200%201%200-51.2%200Z'%20/%3e%3c/svg%3e",y="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20class='icon'%20width='200px'%20height='200.00px'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill='%23666666'%20d='M896.128%20378.752a29.888%2029.888%200%200%201-27.52-18.304%20388.224%20388.224%200%200%200-715.392%200%2029.888%2029.888%200%201%201-54.976-23.296%20448%20448%200%200%201%20825.6%200%2029.888%2029.888%200%200%201-27.52%2041.6z'%20/%3e%3cpath%20fill='%23666666'%20d='M510.912%20959.168a448.576%20448.576%200%200%201-412.672-274.176%2029.888%2029.888%200%201%201%2054.976-23.296%20388.224%20388.224%200%200%200%20715.392%200%2029.888%2029.888%200%201%201%2054.976%2023.296%20447.424%20447.424%200%200%201-412.736%20274.176z'%20/%3e%3cpath%20fill='%23666666'%20d='M92.992%20393.472a29.888%2029.888%200%200%201-29.952-29.952V180.224a29.952%2029.952%200%200%201%2059.84%200V363.52a29.888%2029.888%200%200%201-29.888%2029.952z'%20/%3e%3cpath%20fill='%23666666'%20d='M276.352%20393.472H93.056a29.952%2029.952%200%200%201%200-59.84h183.296a29.952%2029.952%200%200%201%200%2059.84z'%20/%3e%3cpath%20fill='%23666666'%20d='M929.216%20864.768a29.952%2029.952%200%200%201-29.952-29.952V651.52a29.952%2029.952%200%201%201%2059.84%200v183.296a29.952%2029.952%200%200%201-29.888%2029.952z'%20/%3e%3cpath%20fill='%23666666'%20d='M929.216%20681.6h-183.296a29.952%2029.952%200%201%201%200-59.84h183.296a29.952%2029.952%200%200%201%200%2059.84z'%20/%3e%3c/svg%3e",D={class:"w-300px"},E={class:"w-300px"},k={class:"w-300px"},z={class:"flex flex-col"},R=v("li",null,[g(" By default, resources are allowed to be accessed directly, "),v("br"),g(" i.e, requests with empty HTTP_REFERER are not restricted. ")],-1),T=v("li",null," Multiple URL suffixes and domains should be separated by comma (,), such as png,jpeg,zip,js ",-1),C=v("li",null,"When hotlink protection is triggered, the 404 status is returned directly",-1),M=d({__name:"form",props:{site:{}},emits:["changeHotlink"],setup(d,{expose:_,emit:b}){const y=b,M=c(d,"site"),V=o(null),j=u({fix:"",domains:"",return_rule:"",status:!1,http_status:!1}),U={fix:{trigger:["blur","change"],validator:()=>""!==j.fix.trim()||new Error("URL suffix cannot be empty!")},return_rule:{trigger:["blur","change"],validator:()=>""!==j.return_rule.trim()||new Error("Anti-theft chain domain name cannot be empty!")}},G=()=>{S()},P=()=>{S()},S=async()=>{var e;await(null==(e=V.value)?void 0:e.validate()),await r({id:M.value.id,name:M.value.name,fix:j.fix,domains:j.domains.trim().split("\n").join(","),return_rule:j.return_rule,status:j.status,http_status:j.http_status}),y("changeHotlink",j.status),B()},B=async()=>{const{message:e}=await n({id:M.value.id,name:M.value.name});s(e)&&(j.fix=e.fix,j.domains=e.domains.split(",").join("\n"),j.return_rule=e.return_rule,j.status=e.status,j.http_status="true"===e.http_status)};return B(),_({init:B}),(s,r)=>{const n=l,d=a,c=w,o=i,u=t,_=e;return p(),h("div",null,[m(u,{ref_key:"formRef",ref:V,class:"px-8px",model:x(j),rules:U},{default:f((()=>[m(d,{label:"URL suffix",path:"fix"},{default:f((()=>[v("div",D,[m(n,{value:x(j).fix,"onUpdate:value":r[0]||(r[0]=e=>x(j).fix=e),disabled:x(j).status,placeholder:""},null,8,["value","disabled"])])])),_:1}),m(d,{label:"Access domain"},{default:f((()=>[v("div",E,[m(n,{value:x(j).domains,"onUpdate:value":r[1]||(r[1]=e=>x(j).domains=e),type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:""},null,8,["value"])])])),_:1}),m(d,{label:"Response",path:"return_rule"},{default:f((()=>[v("div",k,[m(n,{value:x(j).return_rule,"onUpdate:value":r[2]||(r[2]=e=>x(j).return_rule=e),disabled:x(j).status,placeholder:""},null,8,["value","disabled"])])])),_:1}),m(d,{label:" "},{default:f((()=>[v("div",z,[m(c,{checked:x(j).status,"onUpdate:checked":[r[3]||(r[3]=e=>x(j).status=e),G]},{default:f((()=>[g(" Enable hotlink protection ")])),_:1},8,["checked"]),m(c,{checked:x(j).http_status,"onUpdate:checked":[r[4]||(r[4]=e=>x(j).http_status=e),P],class:"mt-16px"},{default:f((()=>[g(" Allow empty HTTP_REFERER requests ")])),_:1},8,["checked"])])])),_:1}),m(d,{label:" ","show-feedback":!1},{default:f((()=>[m(o,{type:"primary",onClick:S},{default:f((()=>[g("Save")])),_:1})])),_:1})])),_:1},8,["model"]),m(_,{class:"mt-20px"},{default:f((()=>[R,T,C])),_:1})])}}});export{y as _,b as a,_ as b,M as c};
