System.register(["./vue-legacy.js?v=1720690738171","./index-legacy.js?v=1720690738171","./Tag-legacy.js?v=1720690738171","./Empty-legacy.js?v=1720690738171"],(function(e,n){"use strict";var o,t,l,i,r,a,s,d,u,c,p,h,v,b,f,g,m,w,x,y,C,S,F,z,T,O,R,P,k,M,$,B,I,A,E,D,L,N,_,j,H,W,K,V,U,q,G,Y,X,J,Q,Z,ee,ne,oe,te,le,ie,re,ae,se,de,ue,ce,pe,he,ve,be,fe,ge,me,we,xe,ye,Ce,Se;return{setters:[e=>{o=e.l,t=e.x,l=e.E,i=e.G,r=e.k,a=e.r,s=e.p,d=e.L,u=e.y,c=e.a,p=e.J,h=e.d,v=e.w,b=e.A,f=e.n,g=e.I,m=e.F,w=e.B,x=e.M},e=>{y=e.bV,C=e.bW,S=e.aV,F=e.bo,z=e.bP,T=e.bX,O=e.bS,R=e.bn,P=e.bY,k=e.bu,M=e.aD,$=e.bF,B=e.bZ,I=e.a_,A=e.b_,E=e.ax,D=e.aA,L=e.az,N=e.av,_=e.aP,j=e.aE,H=e.aG,W=e.aF,K=e.aH,V=e.aI,U=e.be,q=e.bm,G=e.bK,Y=e.aJ,X=e.b$,J=e.aM,Q=e.bg,Z=e.aX,ee=e.c0,ne=e.bv,oe=e.bd,te=e.c1,le=e.c2,ie=e.c3,re=e.b3,ae=e.aQ,se=e.bC,de=e.c4,ue=e.bk,ce=e.c5,pe=e.bD,he=e.c6,ve=e.c7,be=e.c8,fe=e.c9,ge=e.bw,me=e.ca,we=e.cb,xe=e.aS},e=>{ye=e._},e=>{Ce=e.e,Se=e._}],execute:function(){function n(e){switch(typeof e){case"string":return e||void 0;case"number":return String(e);default:return}}function Fe(e){const n=e.filter((e=>void 0!==e));if(0!==n.length)return 1===n.length?n[0]:n=>{e.forEach((e=>{e&&e(n)}))}}function ze(e){return e&-e}e({c:Ge,g:n,m:Fe});class Te{constructor(e,n){this.l=e,this.min=n;const o=new Array(e+1);for(let t=0;t<e+1;++t)o[t]=0;this.ft=o}add(e,n){if(0===n)return;const{l:o,ft:t}=this;for(e+=1;e<=o;)t[e]+=n,e+=ze(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(void 0===e&&(e=this.l),e<=0)return 0;const{ft:n,min:o,l:t}=this;if(e>t)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let l=e*o;for(;e>0;)l+=n[e],e-=ze(e);return l}getBound(e){let n=0,o=this.l;for(;o>n;){const t=Math.floor((n+o)/2),l=this.sum(t);if(l>e)o=t;else{if(!(l<e))return t;if(n===t)return this.sum(n+1)<=e?n+1:t;n=t}}return n}}let Oe,Re;function Pe(){return"undefined"==typeof document?1:(void 0===Re&&(Re="chrome"in window?window.devicePixelRatio:1),Re)}const ke=T(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[T("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[T("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),Me=e("V",o({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(e){const n=y();ke.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:C,ssr:n}),t((()=>{const{defaultScrollIndex:n,defaultScrollKey:o}=e;null!=n?w({index:n}):null!=o&&w({key:o})}));let o=!1,s=!1;l((()=>{o=!1,s?w({top:f.value,left:b}):s=!0})),i((()=>{o=!0,s||(s=!0)}));const d=r((()=>{const n=new Map,{keyField:o}=e;return e.items.forEach(((e,t)=>{n.set(e[o],t)})),n})),u=a(null),c=a(void 0),p=new Map,h=r((()=>{const{items:n,itemSize:o,keyField:t}=e,l=new Te(n.length,o);return n.forEach(((e,n)=>{const o=e[t],i=p.get(o);void 0!==i&&l.add(n,i)})),l})),v=a(0);let b=0;const f=a(0),g=S((()=>Math.max(h.value.getBound(f.value-F(e.paddingTop))-1,0))),m=r((()=>{const{value:n}=c;if(void 0===n)return[];const{items:o,itemSize:t}=e,l=g.value,i=Math.min(l+Math.ceil(n/t+1),o.length-1),r=[];for(let e=l;e<=i;++e)r.push(o[e]);return r})),w=(e,n)=>{if("number"==typeof e)return void P(e,n,"auto");const{left:o,top:t,index:l,key:i,position:r,behavior:a,debounce:s=!0}=e;if(void 0!==o||void 0!==t)P(o,t,a);else if(void 0!==l)T(l,a,s);else if(void 0!==i){const e=d.value.get(i);void 0!==e&&T(e,a,s)}else"bottom"===r?P(0,Number.MAX_SAFE_INTEGER,a):"top"===r&&P(0,0,a)};let x,z=null;function T(n,o,t){const{value:l}=h,i=l.sum(n)+F(e.paddingTop);if(t){x=n,null!==z&&window.clearTimeout(z),z=window.setTimeout((()=>{x=void 0,z=null}),16);const{scrollTop:e,offsetHeight:t}=u.value;if(i>e){const r=l.get(n);i+r<=e+t||u.value.scrollTo({left:0,top:i+r-t,behavior:o})}else u.value.scrollTo({left:0,top:i,behavior:o})}else u.value.scrollTo({left:0,top:i,behavior:o})}function P(e,n,o){u.value.scrollTo({left:e,top:n,behavior:o})}const k=!("undefined"!=typeof document&&(void 0===Oe&&(Oe="matchMedia"in window&&window.matchMedia("(pointer:coarse)").matches),Oe));let M=!1;function $(){const{value:e}=u;null!=e&&(f.value=e.scrollTop,b=e.scrollLeft)}function B(e){let n=e;for(;null!==n;){if("none"===n.style.display)return!0;n=n.parentElement}return!1}return{listHeight:c,listStyle:{overflow:"auto"},keyToIndex:d,itemsStyle:r((()=>{const{itemResizable:n}=e,o=R(h.value.sum());return v.value,[e.itemsStyle,{boxSizing:"content-box",height:n?"":o,minHeight:n?o:"",paddingTop:R(e.paddingTop),paddingBottom:R(e.paddingBottom)}]})),visibleItemsStyle:r((()=>(v.value,{transform:`translateY(${R(h.value.sum(g.value))})`}))),viewportItems:m,listElRef:u,itemsElRef:a(null),scrollTo:w,handleListResize:function(n){if(o)return;if(B(n.target))return;if(n.contentRect.height===c.value)return;c.value=n.contentRect.height;const{onResize:t}=e;void 0!==t&&t(n)},handleListScroll:function(n){var o;null===(o=e.onScroll)||void 0===o||o.call(e,n),k&&M||$()},handleListWheel:function(n){var o;if(null===(o=e.onWheel)||void 0===o||o.call(e,n),k){const e=u.value;if(null!=e){if(0===n.deltaX){if(0===e.scrollTop&&n.deltaY<=0)return;if(e.scrollTop+e.offsetHeight>=e.scrollHeight&&n.deltaY>=0)return}n.preventDefault(),e.scrollTop+=n.deltaY/Pe(),e.scrollLeft+=n.deltaX/Pe(),$(),M=!0,O((()=>{M=!1}))}}},handleItemResize:function(n,t){var l,i,r;if(o)return;if(e.ignoreItemResize)return;if(B(t.target))return;const{value:a}=h,s=d.value.get(n),c=a.get(s),b=null!==(r=null===(i=null===(l=t.borderBoxSize)||void 0===l?void 0:l[0])||void 0===i?void 0:i.blockSize)&&void 0!==r?r:t.contentRect.height;if(b===c)return;0==b-e.itemSize?p.delete(n):p.set(n,b-e.itemSize);const f=b-c;if(0===f)return;a.add(s,f);const g=u.value;if(null!=g){if(void 0===x){const e=a.sum(s);g.scrollTop>e&&g.scrollBy(0,f)}else(s<x||s===x&&b+a.sum(s)>g.scrollTop+g.offsetHeight)&&g.scrollBy(0,f);$()}v.value++}}},render(){const{itemResizable:e,keyField:n,keyToIndex:o,visibleItemsTag:t}=this;return s(z,{onResize:this.handleListResize},{default:()=>{var l,i;return s("div",d(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[0!==this.items.length?s("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[s(t,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map((t=>{const l=t[n],i=o.get(l),r=this.$slots.default({item:t,index:i})[0];return e?s(z,{key:l,onResize:e=>this.handleItemResize(l,e)},{default:()=>r}):(r.key=l,r)}))})]):null===(i=(l=this.$slots).empty)||void 0===i?void 0:i.call(l)])}})}}));function $e(e,n){n&&(t((()=>{const{value:o}=e;o&&P.registerHandler(o,n)})),u((()=>{const{value:n}=e;n&&P.unregisterHandler(n)})))}const Be=o({name:"Checkmark",render:()=>s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},s("g",{fill:"none"},s("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}),Ie=e("F",o({props:{onFocus:Function,onBlur:Function},setup:e=>()=>s("div",{style:"width: 0; height: 0",tabindex:0,onFocus:e.onFocus,onBlur:e.onBlur})})),Ae={height:"calc(var(--n-option-height) * 7.6)",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"},Ee=e("i",k({name:"InternalSelectMenu",common:M,peers:{Scrollbar:$,Empty:Ce},self:e=>{const{borderRadius:n,popoverColor:o,textColor3:t,dividerColor:l,textColor2:i,primaryColorPressed:r,textColorDisabled:a,primaryColor:s,opacityDisabled:d,hoverColor:u,fontSizeSmall:c,fontSizeMedium:p,fontSizeLarge:h,fontSizeHuge:v,heightSmall:b,heightMedium:f,heightLarge:g,heightHuge:m}=e;return Object.assign(Object.assign({},Ae),{optionFontSizeSmall:c,optionFontSizeMedium:p,optionFontSizeLarge:h,optionFontSizeHuge:v,optionHeightSmall:b,optionHeightMedium:f,optionHeightLarge:g,optionHeightHuge:m,borderRadius:n,color:o,groupHeaderTextColor:t,actionDividerColor:l,optionTextColor:i,optionTextColorPressed:r,optionTextColorDisabled:a,optionTextColorActive:s,optionOpacityDisabled:d,optionCheckColor:s,optionColorPending:u,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:u,actionTextColor:i,loadingColor:s})}})),De=o({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const{valueRef:n,pendingTmNodeRef:o,multipleRef:t,valueSetRef:l,renderLabelRef:i,renderOptionRef:r,labelFieldRef:a,valueFieldRef:s,showCheckmarkRef:d,nodePropsRef:u,handleOptionClick:p,handleOptionMouseEnter:h}=c(A),v=S((()=>{const{value:n}=o;return!!n&&e.tmNode.key===n.key}));return{multiple:t,isGrouped:S((()=>{const{tmNode:n}=e,{parent:o}=n;return o&&"group"===o.rawNode.type})),showCheckmark:d,nodeProps:u,isPending:v,isSelected:S((()=>{const{value:o}=n,{value:i}=t;if(null===o)return!1;const r=e.tmNode.rawNode[s.value];if(i){const{value:e}=l;return e.has(r)}return o===r})),labelField:a,renderLabel:i,renderOption:r,handleMouseMove:function(n){const{tmNode:o}=e,{value:t}=v;o.disabled||t||h(n,o)},handleMouseEnter:function(n){const{tmNode:o}=e;o.disabled||h(n,o)},handleClick:function(n){const{tmNode:o}=e;o.disabled||p(n,o)}}},render(){const{clsPrefix:e,tmNode:{rawNode:n},isSelected:o,isPending:t,isGrouped:l,showCheckmark:i,nodeProps:r,renderOption:a,renderLabel:d,handleClick:u,handleMouseEnter:c,handleMouseMove:h}=this,v=function(e,n){return s(p,{name:"fade-in-scale-up-transition"},{default:()=>e?s(I,{clsPrefix:n,class:`${n}-base-select-option__check`},{default:()=>s(Be)}):null})}(o,e),b=d?[d(n,o),i&&v]:[B(n[this.labelField],n,o),i&&v],f=null==r?void 0:r(n),g=s("div",Object.assign({},f,{class:[`${e}-base-select-option`,n.class,null==f?void 0:f.class,{[`${e}-base-select-option--disabled`]:n.disabled,[`${e}-base-select-option--selected`]:o,[`${e}-base-select-option--grouped`]:l,[`${e}-base-select-option--pending`]:t,[`${e}-base-select-option--show-checkmark`]:i}],style:[(null==f?void 0:f.style)||"",n.style||""],onClick:Fe([u,null==f?void 0:f.onClick]),onMouseenter:Fe([c,null==f?void 0:f.onMouseenter]),onMousemove:Fe([h,null==f?void 0:f.onMousemove])}),s("div",{class:`${e}-base-select-option__content`},b));return n.render?n.render({node:g,option:n,selected:o}):a?a({node:g,option:n,selected:o}):g}}),Le=o({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:e,renderOptionRef:n,labelFieldRef:o,nodePropsRef:t}=c(A);return{labelField:o,nodeProps:t,renderLabel:e,renderOption:n}},render(){const{clsPrefix:e,renderLabel:n,renderOption:o,nodeProps:t,tmNode:{rawNode:l}}=this,i=null==t?void 0:t(l),r=n?n(l,!1):B(l[this.labelField],l,!1),a=s("div",Object.assign({},i,{class:[`${e}-base-select-group-header`,null==i?void 0:i.class]}),r);return l.render?l.render({node:a,option:l}):o?o({node:a,option:l,selected:!1}):a}}),Ne=E("base-select-menu","\n line-height: 1.5;\n outline: none;\n z-index: 0;\n position: relative;\n border-radius: var(--n-border-radius);\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n background-color: var(--n-color);\n",[E("scrollbar","\n max-height: var(--n-height);\n "),E("virtual-list","\n max-height: var(--n-height);\n "),E("base-select-option","\n min-height: var(--n-option-height);\n font-size: var(--n-option-font-size);\n display: flex;\n align-items: center;\n ",[D("content","\n z-index: 1;\n white-space: nowrap;\n text-overflow: ellipsis;\n overflow: hidden;\n ")]),E("base-select-group-header","\n min-height: var(--n-option-height);\n font-size: .93em;\n display: flex;\n align-items: center;\n "),E("base-select-menu-option-wrapper","\n position: relative;\n width: 100%;\n "),D("loading, empty","\n display: flex;\n padding: 12px 32px;\n flex: 1;\n justify-content: center;\n "),D("loading","\n color: var(--n-loading-color);\n font-size: var(--n-loading-size);\n "),D("header","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-bottom: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),D("action","\n padding: 8px var(--n-option-padding-left);\n font-size: var(--n-option-font-size);\n transition: \n color .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n border-top: 1px solid var(--n-action-divider-color);\n color: var(--n-action-text-color);\n "),E("base-select-group-header","\n position: relative;\n cursor: default;\n padding: var(--n-option-padding);\n color: var(--n-group-header-text-color);\n "),E("base-select-option","\n cursor: pointer;\n position: relative;\n padding: var(--n-option-padding);\n transition:\n color .3s var(--n-bezier),\n opacity .3s var(--n-bezier);\n box-sizing: border-box;\n color: var(--n-option-text-color);\n opacity: 1;\n ",[L("show-checkmark","\n padding-right: calc(var(--n-option-padding-right) + 20px);\n "),N("&::before",'\n content: "";\n position: absolute;\n left: 4px;\n right: 4px;\n top: 0;\n bottom: 0;\n border-radius: var(--n-border-radius);\n transition: background-color .3s var(--n-bezier);\n '),N("&:active","\n color: var(--n-option-text-color-pressed);\n "),L("grouped","\n padding-left: calc(var(--n-option-padding-left) * 1.5);\n "),L("pending",[N("&::before","\n background-color: var(--n-option-color-pending);\n ")]),L("selected","\n color: var(--n-option-text-color-active);\n ",[N("&::before","\n background-color: var(--n-option-color-active);\n "),L("pending",[N("&::before","\n background-color: var(--n-option-color-active-pending);\n ")])]),L("disabled","\n cursor: not-allowed;\n ",[_("selected","\n color: var(--n-option-text-color-disabled);\n "),L("selected","\n opacity: var(--n-option-opacity-disabled);\n ")]),D("check","\n font-size: 16px;\n position: absolute;\n right: calc(var(--n-option-padding-right) - 4px);\n top: calc(50% - 7px);\n color: var(--n-option-check-color);\n transition: color .3s var(--n-bezier);\n ",[j({enterScale:"0.5"})])])]),_e=e("N",o({name:"InternalSelectMenu",props:Object.assign(Object.assign({},H.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(e){const{mergedClsPrefixRef:n,mergedRtlRef:o}=W(e),l=K("InternalSelectMenu",o,n),i=H("InternalSelectMenu","-internal-select-menu",Ne,Ee,e,h(e,"clsPrefix")),s=a(null),d=a(null),c=a(null),p=r((()=>e.treeMate.getFlattenedNodes())),g=r((()=>X(p.value))),m=a(null);function w(){const{value:n}=m;n&&!e.treeMate.getNode(n.key)&&(m.value=null)}let x;v((()=>e.show),(n=>{n?x=v((()=>e.treeMate),(()=>{e.resetMenuOnOptionsChange?(e.autoPending?function(){const{treeMate:n}=e;let o=null;const{value:t}=e;null===t?o=n.getFirstAvailableNode():(o=e.multiple?n.getNode((t||[])[(t||[]).length-1]):n.getNode(t),o&&!o.disabled||(o=n.getFirstAvailableNode())),O(o||null)}():w(),f(R)):w()}),{immediate:!0}):null==x||x()}),{immediate:!0}),u((()=>{null==x||x()}));const y=r((()=>F(i.value.self[J("optionHeight",e.size)]))),C=r((()=>Q(i.value.self[J("padding",e.size)]))),S=r((()=>e.multiple&&Array.isArray(e.value)?new Set(e.value):new Set)),z=r((()=>{const e=p.value;return e&&0===e.length}));function T(n){const{onScroll:o}=e;o&&o(n)}function O(e,n=!1){m.value=e,n&&R()}function R(){var n,o;const t=m.value;if(!t)return;const l=g.value(t.key);null!==l&&(e.virtualScroll?null===(n=d.value)||void 0===n||n.scrollTo({index:l}):null===(o=c.value)||void 0===o||o.scrollTo({index:l,elSize:y.value}))}b(A,{handleOptionMouseEnter:function(e,n){n.disabled||O(n,!1)},handleOptionClick:function(n,o){o.disabled||function(n){const{onToggle:o}=e;o&&o(n)}(o)},valueSetRef:S,pendingTmNodeRef:m,nodePropsRef:h(e,"nodeProps"),showCheckmarkRef:h(e,"showCheckmark"),multipleRef:h(e,"multiple"),valueRef:h(e,"value"),renderLabelRef:h(e,"renderLabel"),renderOptionRef:h(e,"renderOption"),labelFieldRef:h(e,"labelField"),valueFieldRef:h(e,"valueField")}),b(ee,s),t((()=>{const{value:e}=c;e&&e.sync()}));const P=r((()=>{const{size:n}=e,{common:{cubicBezierEaseInOut:o},self:{height:t,borderRadius:l,color:r,groupHeaderTextColor:a,actionDividerColor:s,optionTextColorPressed:d,optionTextColor:u,optionTextColorDisabled:c,optionTextColorActive:p,optionOpacityDisabled:h,optionCheckColor:v,actionTextColor:b,optionColorPending:f,optionColorActive:g,loadingColor:m,loadingSize:w,optionColorActivePending:x,[J("optionFontSize",n)]:y,[J("optionHeight",n)]:C,[J("optionPadding",n)]:S}}=i.value;return{"--n-height":t,"--n-action-divider-color":s,"--n-action-text-color":b,"--n-bezier":o,"--n-border-radius":l,"--n-color":r,"--n-option-font-size":y,"--n-group-header-text-color":a,"--n-option-check-color":v,"--n-option-color-pending":f,"--n-option-color-active":g,"--n-option-color-active-pending":x,"--n-option-height":C,"--n-option-opacity-disabled":h,"--n-option-text-color":u,"--n-option-text-color-active":p,"--n-option-text-color-disabled":c,"--n-option-text-color-pressed":d,"--n-option-padding":S,"--n-option-padding-left":Q(S,"left"),"--n-option-padding-right":Q(S,"right"),"--n-loading-color":m,"--n-loading-size":w}})),{inlineThemeDisabled:k}=e,M=k?V("internal-select-menu",r((()=>e.size[0])),P,e):void 0,$={selfRef:s,next:function(){const{value:e}=m;e&&O(e.getNext({loop:!0}),!0)},prev:function(){const{value:e}=m;e&&O(e.getPrev({loop:!0}),!0)},getPendingTmNode:function(){const{value:e}=m;return e||null}};return $e(s,e.onResize),Object.assign({mergedTheme:i,mergedClsPrefix:n,rtlEnabled:l,virtualListRef:d,scrollbarRef:c,itemSize:y,padding:C,flattenedNodes:p,empty:z,virtualListContainer(){const{value:e}=d;return null==e?void 0:e.listElRef},virtualListContent(){const{value:e}=d;return null==e?void 0:e.itemsElRef},doScroll:T,handleFocusin:function(n){var o,t;(null===(o=s.value)||void 0===o?void 0:o.contains(n.target))&&(null===(t=e.onFocus)||void 0===t||t.call(e,n))},handleFocusout:function(n){var o,t;(null===(o=s.value)||void 0===o?void 0:o.contains(n.relatedTarget))||null===(t=e.onBlur)||void 0===t||t.call(e,n)},handleKeyUp:function(n){var o;Z(n,"action")||null===(o=e.onKeyup)||void 0===o||o.call(e,n)},handleKeyDown:function(n){var o;Z(n,"action")||null===(o=e.onKeydown)||void 0===o||o.call(e,n)},handleMouseDown:function(n){var o;null===(o=e.onMousedown)||void 0===o||o.call(e,n),e.focusable||n.preventDefault()},handleVirtualListResize:function(){var e;null===(e=c.value)||void 0===e||e.sync()},handleVirtualListScroll:function(e){var n;null===(n=c.value)||void 0===n||n.sync(),T(e)},cssVars:k?void 0:P,themeClass:null==M?void 0:M.themeClass,onRender:null==M?void 0:M.onRender},$)},render(){const{$slots:e,virtualScroll:n,clsPrefix:o,mergedTheme:t,themeClass:l,onRender:i}=this;return null==i||i(),s("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${o}-base-select-menu`,this.rtlEnabled&&`${o}-base-select-menu--rtl`,l,this.multiple&&`${o}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},U(e.header,(e=>e&&s("div",{class:`${o}-base-select-menu__header`,"data-header":!0,key:"header"},e))),this.loading?s("div",{class:`${o}-base-select-menu__loading`},s(q,{clsPrefix:o,strokeWidth:20})):this.empty?s("div",{class:`${o}-base-select-menu__empty`,"data-empty":!0},Y(e.empty,(()=>[s(Se,{theme:t.peers.Empty,themeOverrides:t.peerOverrides.Empty})]))):s(G,{ref:"scrollbarRef",theme:t.peers.Scrollbar,themeOverrides:t.peerOverrides.Scrollbar,scrollable:this.scrollable,container:n?this.virtualListContainer:void 0,content:n?this.virtualListContent:void 0,onScroll:n?void 0:this.doScroll},{default:()=>n?s(Me,{ref:"virtualListRef",class:`${o}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:e})=>e.isGroup?s(Le,{key:e.key,clsPrefix:o,tmNode:e}):e.ignored?null:s(De,{clsPrefix:o,key:e.key,tmNode:e})}):s("div",{class:`${o}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map((e=>e.isGroup?s(Le,{key:e.key,clsPrefix:o,tmNode:e}):s(De,{clsPrefix:o,key:e.key,tmNode:e}))))}),U(e.action,(e=>e&&[s("div",{class:`${o}-base-select-menu__action`,"data-action":!0,key:"action"},e),s(Ie,{onFocus:this.onTabOut,key:"focus-detector"})])))}})),je={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"},He=k({name:"InternalSelection",common:M,peers:{Popover:ne},self:e=>{const{borderRadius:n,textColor2:o,textColorDisabled:t,inputColor:l,inputColorDisabled:i,primaryColor:r,primaryColorHover:a,warningColor:s,warningColorHover:d,errorColor:u,errorColorHover:c,borderColor:p,iconColor:h,iconColorDisabled:v,clearColor:b,clearColorHover:f,clearColorPressed:g,placeholderColor:m,placeholderColorDisabled:w,fontSizeTiny:x,fontSizeSmall:y,fontSizeMedium:C,fontSizeLarge:S,heightTiny:F,heightSmall:z,heightMedium:T,heightLarge:O}=e;return Object.assign(Object.assign({},je),{fontSizeTiny:x,fontSizeSmall:y,fontSizeMedium:C,fontSizeLarge:S,heightTiny:F,heightSmall:z,heightMedium:T,heightLarge:O,borderRadius:n,textColor:o,textColorDisabled:t,placeholderColor:m,placeholderColorDisabled:w,color:l,colorDisabled:i,colorActive:l,border:`1px solid ${p}`,borderHover:`1px solid ${a}`,borderActive:`1px solid ${r}`,borderFocus:`1px solid ${a}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${oe(r,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${oe(r,{alpha:.2})}`,caretColor:r,arrowColor:h,arrowColorDisabled:v,loadingColor:r,borderWarning:`1px solid ${s}`,borderHoverWarning:`1px solid ${d}`,borderActiveWarning:`1px solid ${s}`,borderFocusWarning:`1px solid ${d}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${oe(s,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${oe(s,{alpha:.2})}`,colorActiveWarning:l,caretColorWarning:s,borderError:`1px solid ${u}`,borderHoverError:`1px solid ${c}`,borderActiveError:`1px solid ${u}`,borderFocusError:`1px solid ${c}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${oe(u,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${oe(u,{alpha:.2})}`,colorActiveError:l,caretColorError:u,clearColor:b,clearColorHover:f,clearColorPressed:g})}}),We=N([E("base-selection","\n --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);\n --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);\n position: relative;\n z-index: auto;\n box-shadow: none;\n width: 100%;\n max-width: 100%;\n display: inline-block;\n vertical-align: bottom;\n border-radius: var(--n-border-radius);\n min-height: var(--n-height);\n line-height: 1.5;\n font-size: var(--n-font-size);\n ",[E("base-loading","\n color: var(--n-loading-color);\n "),E("base-selection-tags","min-height: var(--n-height);"),D("border, state-border","\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n pointer-events: none;\n border: var(--n-border);\n border-radius: inherit;\n transition:\n box-shadow .3s var(--n-bezier),\n border-color .3s var(--n-bezier);\n "),D("state-border","\n z-index: 1;\n border-color: #0000;\n "),E("base-suffix","\n cursor: pointer;\n position: absolute;\n top: 50%;\n transform: translateY(-50%);\n right: 10px;\n ",[D("arrow","\n font-size: var(--n-arrow-size);\n color: var(--n-arrow-color);\n transition: color .3s var(--n-bezier);\n ")]),E("base-selection-overlay","\n display: flex;\n align-items: center;\n white-space: nowrap;\n pointer-events: none;\n position: absolute;\n top: 0;\n right: 0;\n bottom: 0;\n left: 0;\n padding: var(--n-padding-single);\n transition: color .3s var(--n-bezier);\n ",[D("wrapper","\n flex-basis: 0;\n flex-grow: 1;\n overflow: hidden;\n text-overflow: ellipsis;\n ")]),E("base-selection-placeholder","\n color: var(--n-placeholder-color);\n ",[D("inner","\n max-width: 100%;\n overflow: hidden;\n ")]),E("base-selection-tags","\n cursor: pointer;\n outline: none;\n box-sizing: border-box;\n position: relative;\n z-index: auto;\n display: flex;\n padding: var(--n-padding-multiple);\n flex-wrap: wrap;\n align-items: center;\n width: 100%;\n vertical-align: bottom;\n background-color: var(--n-color);\n border-radius: inherit;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n "),E("base-selection-label","\n height: var(--n-height);\n display: inline-flex;\n width: 100%;\n vertical-align: bottom;\n cursor: pointer;\n outline: none;\n z-index: auto;\n box-sizing: border-box;\n position: relative;\n transition:\n color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier),\n background-color .3s var(--n-bezier);\n border-radius: inherit;\n background-color: var(--n-color);\n align-items: center;\n ",[E("base-selection-input","\n font-size: inherit;\n line-height: inherit;\n outline: none;\n cursor: pointer;\n box-sizing: border-box;\n border:none;\n width: 100%;\n padding: var(--n-padding-single);\n background-color: #0000;\n color: var(--n-text-color);\n transition: color .3s var(--n-bezier);\n caret-color: var(--n-caret-color);\n ",[D("content","\n text-overflow: ellipsis;\n overflow: hidden;\n white-space: nowrap; \n ")]),D("render-label","\n color: var(--n-text-color);\n ")]),_("disabled",[N("&:hover",[D("state-border","\n box-shadow: var(--n-box-shadow-hover);\n border: var(--n-border-hover);\n ")]),L("focus",[D("state-border","\n box-shadow: var(--n-box-shadow-focus);\n border: var(--n-border-focus);\n ")]),L("active",[D("state-border","\n box-shadow: var(--n-box-shadow-active);\n border: var(--n-border-active);\n "),E("base-selection-label","background-color: var(--n-color-active);"),E("base-selection-tags","background-color: var(--n-color-active);")])]),L("disabled","cursor: not-allowed;",[D("arrow","\n color: var(--n-arrow-color-disabled);\n "),E("base-selection-label","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n ",[E("base-selection-input","\n cursor: not-allowed;\n color: var(--n-text-color-disabled);\n "),D("render-label","\n color: var(--n-text-color-disabled);\n ")]),E("base-selection-tags","\n cursor: not-allowed;\n background-color: var(--n-color-disabled);\n "),E("base-selection-placeholder","\n cursor: not-allowed;\n color: var(--n-placeholder-color-disabled);\n ")]),E("base-selection-input-tag","\n height: calc(var(--n-height) - 6px);\n line-height: calc(var(--n-height) - 6px);\n outline: none;\n display: none;\n position: relative;\n margin-bottom: 3px;\n max-width: 100%;\n vertical-align: bottom;\n ",[D("input","\n font-size: inherit;\n font-family: inherit;\n min-width: 1px;\n padding: 0;\n background-color: #0000;\n outline: none;\n border: none;\n max-width: 100%;\n overflow: hidden;\n width: 1em;\n line-height: inherit;\n cursor: pointer;\n color: var(--n-text-color);\n caret-color: var(--n-caret-color);\n "),D("mirror","\n position: absolute;\n left: 0;\n top: 0;\n white-space: pre;\n visibility: hidden;\n user-select: none;\n -webkit-user-select: none;\n opacity: 0;\n ")]),["warning","error"].map((e=>L(`${e}-status`,[D("state-border",`border: var(--n-border-${e});`),_("disabled",[N("&:hover",[D("state-border",`\n box-shadow: var(--n-box-shadow-hover-${e});\n border: var(--n-border-hover-${e});\n `)]),L("active",[D("state-border",`\n box-shadow: var(--n-box-shadow-active-${e});\n border: var(--n-border-active-${e});\n `),E("base-selection-label",`background-color: var(--n-color-active-${e});`),E("base-selection-tags",`background-color: var(--n-color-active-${e});`)]),L("focus",[D("state-border",`\n box-shadow: var(--n-box-shadow-focus-${e});\n border: var(--n-border-focus-${e});\n `)])])])))]),E("base-selection-popover","\n margin-bottom: -3px;\n display: flex;\n flex-wrap: wrap;\n margin-right: -8px;\n "),E("base-selection-tag-wrapper","\n max-width: 100%;\n display: inline-flex;\n padding: 0 7px 3px 0;\n ",[N("&:last-child","padding-right: 0;"),E("tag","\n font-size: 14px;\n max-width: 100%;\n ",[D("content","\n line-height: 1.25;\n text-overflow: ellipsis;\n overflow: hidden;\n ")])])]),Ke=o({name:"InternalSelection",props:Object.assign(Object.assign({},H.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(e){const{mergedClsPrefixRef:n,mergedRtlRef:o}=W(e),l=K("InternalSelection",o,n),i=a(null),s=a(null),d=a(null),u=a(null),c=a(null),p=a(null),b=a(null),m=a(null),w=a(null),x=a(null),y=a(!1),C=a(!1),S=a(!1),F=H("InternalSelection","-internal-selection",We,He,e,h(e,"clsPrefix")),z=r((()=>e.clearable&&!e.disabled&&(S.value||e.active))),T=r((()=>e.selectedOption?e.renderTag?e.renderTag({option:e.selectedOption,handleClose:()=>{}}):e.renderLabel?e.renderLabel(e.selectedOption,!0):B(e.selectedOption[e.labelField],e.selectedOption,!0):e.placeholder)),O=r((()=>{const n=e.selectedOption;if(n)return n[e.labelField]})),R=r((()=>e.multiple?!(!Array.isArray(e.selectedOptions)||!e.selectedOptions.length):null!==e.selectedOption));function P(){var n;const{value:o}=i;if(o){const{value:t}=s;t&&(t.style.width=`${o.offsetWidth}px`,"responsive"!==e.maxTagCount&&(null===(n=w.value)||void 0===n||n.sync({showAllItemsBeforeCalculate:!1})))}}function k(n){const{onPatternInput:o}=e;o&&o(n)}function M(n){!function(n){const{onDeleteOption:o}=e;o&&o(n)}(n)}v(h(e,"active"),(e=>{e||function(){const{value:e}=x;e&&(e.style.display="none")}()})),v(h(e,"pattern"),(()=>{e.multiple&&f(P)}));const $=a(!1);let I=null,A=null;function E(){null!==A&&window.clearTimeout(A)}v(R,(e=>{e||(y.value=!1)})),t((()=>{g((()=>{const n=p.value;n&&(e.disabled?n.removeAttribute("tabindex"):n.tabIndex=C.value?-1:0)}))})),$e(d,e.onResize);const{inlineThemeDisabled:D}=e,L=r((()=>{const{size:n}=e,{common:{cubicBezierEaseInOut:o},self:{borderRadius:t,color:l,placeholderColor:i,textColor:r,paddingSingle:a,paddingMultiple:s,caretColor:d,colorDisabled:u,textColorDisabled:c,placeholderColorDisabled:p,colorActive:h,boxShadowFocus:v,boxShadowActive:b,boxShadowHover:f,border:g,borderFocus:m,borderHover:w,borderActive:x,arrowColor:y,arrowColorDisabled:C,loadingColor:S,colorActiveWarning:z,boxShadowFocusWarning:T,boxShadowActiveWarning:O,boxShadowHoverWarning:R,borderWarning:P,borderFocusWarning:k,borderHoverWarning:M,borderActiveWarning:$,colorActiveError:B,boxShadowFocusError:I,boxShadowActiveError:A,boxShadowHoverError:E,borderError:D,borderFocusError:L,borderHoverError:N,borderActiveError:_,clearColor:j,clearColorHover:H,clearColorPressed:W,clearSize:K,arrowSize:V,[J("height",n)]:U,[J("fontSize",n)]:q}}=F.value,G=Q(a),Y=Q(s);return{"--n-bezier":o,"--n-border":g,"--n-border-active":x,"--n-border-focus":m,"--n-border-hover":w,"--n-border-radius":t,"--n-box-shadow-active":b,"--n-box-shadow-focus":v,"--n-box-shadow-hover":f,"--n-caret-color":d,"--n-color":l,"--n-color-active":h,"--n-color-disabled":u,"--n-font-size":q,"--n-height":U,"--n-padding-single-top":G.top,"--n-padding-multiple-top":Y.top,"--n-padding-single-right":G.right,"--n-padding-multiple-right":Y.right,"--n-padding-single-left":G.left,"--n-padding-multiple-left":Y.left,"--n-padding-single-bottom":G.bottom,"--n-padding-multiple-bottom":Y.bottom,"--n-placeholder-color":i,"--n-placeholder-color-disabled":p,"--n-text-color":r,"--n-text-color-disabled":c,"--n-arrow-color":y,"--n-arrow-color-disabled":C,"--n-loading-color":S,"--n-color-active-warning":z,"--n-box-shadow-focus-warning":T,"--n-box-shadow-active-warning":O,"--n-box-shadow-hover-warning":R,"--n-border-warning":P,"--n-border-focus-warning":k,"--n-border-hover-warning":M,"--n-border-active-warning":$,"--n-color-active-error":B,"--n-box-shadow-focus-error":I,"--n-box-shadow-active-error":A,"--n-box-shadow-hover-error":E,"--n-border-error":D,"--n-border-focus-error":L,"--n-border-hover-error":N,"--n-border-active-error":_,"--n-clear-size":K,"--n-clear-color":j,"--n-clear-color-hover":H,"--n-clear-color-pressed":W,"--n-arrow-size":V}})),N=D?V("internal-selection",r((()=>e.size[0])),L,e):void 0;return{mergedTheme:F,mergedClearable:z,mergedClsPrefix:n,rtlEnabled:l,patternInputFocused:C,filterablePlaceholder:T,label:O,selected:R,showTagsPanel:y,isComposing:$,counterRef:b,counterWrapperRef:m,patternInputMirrorRef:i,patternInputRef:s,selfRef:d,multipleElRef:u,singleElRef:c,patternInputWrapperRef:p,overflowRef:w,inputTagElRef:x,handleMouseDown:function(n){e.active&&e.filterable&&n.target!==s.value&&n.preventDefault()},handleFocusin:function(n){var o;n.relatedTarget&&(null===(o=d.value)||void 0===o?void 0:o.contains(n.relatedTarget))||function(n){const{onFocus:o}=e;o&&o(n)}(n)},handleClear:function(n){!function(n){const{onClear:o}=e;o&&o(n)}(n)},handleMouseEnter:function(){S.value=!0},handleMouseLeave:function(){S.value=!1},handleDeleteOption:M,handlePatternKeyDown:function(n){if("Backspace"===n.key&&!$.value&&!e.pattern.length){const{selectedOptions:n}=e;(null==n?void 0:n.length)&&M(n[n.length-1])}},handlePatternInputInput:function(n){const{value:o}=i;if(o){const e=n.target.value;o.textContent=e,P()}e.ignoreComposition&&$.value?I=n:k(n)},handlePatternInputBlur:function(n){var o;C.value=!1,null===(o=e.onPatternBlur)||void 0===o||o.call(e,n)},handlePatternInputFocus:function(n){var o;C.value=!0,null===(o=e.onPatternFocus)||void 0===o||o.call(e,n)},handleMouseEnterCounter:function(){e.active||(E(),A=window.setTimeout((()=>{R.value&&(y.value=!0)}),100))},handleMouseLeaveCounter:function(){E()},handleFocusout:function(n){var o;(null===(o=d.value)||void 0===o?void 0:o.contains(n.relatedTarget))||function(n){const{onBlur:o}=e;o&&o(n)}(n)},handleCompositionEnd:function(){$.value=!1,e.ignoreComposition&&k(I),I=null},handleCompositionStart:function(){$.value=!0},onPopoverUpdateShow:function(e){e||(E(),y.value=!1)},focus:function(){var n,o,t;e.filterable?(C.value=!1,null===(n=p.value)||void 0===n||n.focus()):e.multiple?null===(o=u.value)||void 0===o||o.focus():null===(t=c.value)||void 0===t||t.focus()},focusInput:function(){const{value:e}=s;e&&(function(){const{value:e}=x;e&&(e.style.display="inline-block")}(),e.focus())},blur:function(){var n,o;if(e.filterable)C.value=!1,null===(n=p.value)||void 0===n||n.blur(),null===(o=s.value)||void 0===o||o.blur();else if(e.multiple){const{value:e}=u;null==e||e.blur()}else{const{value:e}=c;null==e||e.blur()}},blurInput:function(){const{value:e}=s;e&&e.blur()},updateCounter:function(e){const{value:n}=b;n&&n.setTextContent(`+${e}`)},getCounter:function(){const{value:e}=m;return e},getTail:function(){return s.value},renderLabel:e.renderLabel,cssVars:D?void 0:L,themeClass:null==N?void 0:N.themeClass,onRender:null==N?void 0:N.onRender}},render(){const{status:e,multiple:o,size:t,disabled:l,filterable:i,maxTagCount:r,bordered:a,clsPrefix:d,ellipsisTagPopoverProps:u,onRender:c,renderTag:p,renderLabel:h}=this;null==c||c();const v="responsive"===r,b="number"==typeof r,f=v||b,g=s(le,null,{default:()=>s(te,{clsPrefix:d,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var e,n;return null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)}})});let w;if(o){const{labelField:e}=this,n=n=>s("div",{class:`${d}-base-selection-tag-wrapper`,key:n.value},p?p({option:n,handleClose:()=>{this.handleDeleteOption(n)}}):s(ye,{size:t,closable:!n.disabled,disabled:l,onClose:()=>{this.handleDeleteOption(n)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>h?h(n,!0):B(n[e],n,!0)})),o=()=>(b?this.selectedOptions.slice(0,r):this.selectedOptions).map(n),a=i?s("div",{class:`${d}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},s("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:l,value:this.pattern,autofocus:this.autofocus,class:`${d}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),s("span",{ref:"patternInputMirrorRef",class:`${d}-base-selection-input-tag__mirror`},this.pattern)):null,c=v?()=>s("div",{class:`${d}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},s(ye,{size:t,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:l})):void 0;let x;if(b){const e=this.selectedOptions.length-r;e>0&&(x=s("div",{class:`${d}-base-selection-tag-wrapper`,key:"__counter__"},s(ye,{size:t,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:l},{default:()=>`+${e}`})))}const y=v?i?s(ie,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:o,counter:c,tail:()=>a}):s(ie,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:o,counter:c}):b&&x?o().concat(x):o(),C=f?()=>s("div",{class:`${d}-base-selection-popover`},v?o():this.selectedOptions.map(n)):void 0,S=f?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},u):null,F=this.selected||this.active&&(this.pattern||this.isComposing)?null:s("div",{class:`${d}-base-selection-placeholder ${d}-base-selection-overlay`},s("div",{class:`${d}-base-selection-placeholder__inner`},this.placeholder)),z=i?s("div",{ref:"patternInputWrapperRef",class:`${d}-base-selection-tags`},y,v?null:a,g):s("div",{ref:"multipleElRef",class:`${d}-base-selection-tags`,tabindex:l?void 0:0},y,g);w=s(m,null,f?s(re,Object.assign({},S,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>z,default:C}):z,F)}else if(i){const e=this.pattern||this.isComposing,o=this.active?!e:!this.selected,t=!this.active&&this.selected;w=s("div",{ref:"patternInputWrapperRef",class:`${d}-base-selection-label`,title:this.patternInputFocused?void 0:n(this.label)},s("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${d}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:l,disabled:l,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),t?s("div",{class:`${d}-base-selection-label__render-label ${d}-base-selection-overlay`,key:"input"},s("div",{class:`${d}-base-selection-overlay__wrapper`},p?p({option:this.selectedOption,handleClose:()=>{}}):h?h(this.selectedOption,!0):B(this.label,this.selectedOption,!0))):null,o?s("div",{class:`${d}-base-selection-placeholder ${d}-base-selection-overlay`,key:"placeholder"},s("div",{class:`${d}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,g)}else w=s("div",{ref:"singleElRef",class:`${d}-base-selection-label`,tabindex:this.disabled?void 0:0},void 0!==this.label?s("div",{class:`${d}-base-selection-input`,title:n(this.label),key:"input"},s("div",{class:`${d}-base-selection-input__content`},p?p({option:this.selectedOption,handleClose:()=>{}}):h?h(this.selectedOption,!0):B(this.label,this.selectedOption,!0))):s("div",{class:`${d}-base-selection-placeholder ${d}-base-selection-overlay`,key:"placeholder"},s("div",{class:`${d}-base-selection-placeholder__inner`},this.placeholder)),g);return s("div",{ref:"selfRef",class:[`${d}-base-selection`,this.rtlEnabled&&`${d}-base-selection--rtl`,this.themeClass,e&&`${d}-base-selection--${e}-status`,{[`${d}-base-selection--active`]:this.active,[`${d}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${d}-base-selection--disabled`]:this.disabled,[`${d}-base-selection--multiple`]:this.multiple,[`${d}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},w,a?s("div",{class:`${d}-base-selection__border`}):null,a?s("div",{class:`${d}-base-selection__state-border`}):null)}});function Ve(e){return"group"===e.type}function Ue(e){return"ignored"===e.type}function qe(e,n){try{return!!(1+n.toString().toLowerCase().indexOf(e.trim().toLowerCase()))}catch(o){return!1}}function Ge(e,n){return{getIsGroup:Ve,getIgnored:Ue,getKey:n=>Ve(n)?n.name||n.key||"key-required":n[e],getChildren:e=>e[n]}}const Ye=e("s",k({name:"Select",common:M,peers:{InternalSelection:He,InternalSelectMenu:Ee},self:function(e){const{boxShadow2:n}=e;return{menuBoxShadow:n}}})),Xe=N([E("select","\n z-index: auto;\n outline: none;\n width: 100%;\n position: relative;\n "),E("select-menu","\n margin: 4px 0;\n box-shadow: var(--n-menu-box-shadow);\n ",[j({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),Je=Object.assign(Object.assign({},H.props),{to:pe.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array});e("_",o({name:"Select",props:Je,setup(e){const{mergedClsPrefixRef:n,mergedBorderedRef:o,namespaceRef:t,inlineThemeDisabled:l}=W(e),i=H("Select","-select",Xe,Ye,e,n),s=a(e.defaultValue),d=h(e,"value"),u=ae(d,s),c=a(!1),p=a(""),b=r((()=>{const{valueField:n,childrenField:o}=e,t=Ge(n,o);return ge($.value,t)})),f=r((()=>function(e,n,o){const t=new Map;return e.forEach((e=>{Ve(e)?e[o].forEach((e=>{t.set(e[n],e)})):t.set(e[n],e)})),t}(k.value,e.valueField,e.childrenField))),g=a(!1),m=ae(h(e,"show"),g),w=a(null),x=a(null),y=a(null),{localeRef:C}=se("Select"),S=r((()=>{var n;return null!==(n=e.placeholder)&&void 0!==n?n:C.value.placeholder})),F=de(e,["items","options"]),z=[],T=a([]),O=a([]),R=a(new Map),P=r((()=>{const{fallbackOption:n}=e;if(void 0===n){const{labelField:n,valueField:o}=e;return e=>({[n]:String(e),[o]:e})}return!1!==n&&(e=>Object.assign(n(e),{value:e}))})),k=r((()=>O.value.concat(T.value).concat(F.value))),M=r((()=>{const{filter:n}=e;if(n)return n;const{labelField:o,valueField:t}=e;return(e,n)=>{if(!n)return!1;const l=n[o];if("string"==typeof l)return qe(e,l);const i=n[t];return"string"==typeof i?qe(e,i):"number"==typeof i&&qe(e,String(i))}})),$=r((()=>{if(e.remote)return F.value;{const{value:n}=k,{value:o}=p;return o.length&&e.filterable?function(e,n,o,t){return n?function e(l){if(!Array.isArray(l))return[];const i=[];for(const r of l)if(Ve(r)){const n=e(r[t]);n.length&&i.push(Object.assign({},r,{[t]:n}))}else{if(Ue(r))continue;n(o,r)&&i.push(r)}return i}(e):e}(n,M.value,o,e.childrenField):n}}));function B(n){const o=e.remote,{value:t}=R,{value:l}=f,{value:i}=P,r=[];return n.forEach((e=>{if(l.has(e))r.push(l.get(e));else if(o&&t.has(e))r.push(t.get(e));else if(i){const n=i(e);n&&r.push(n)}})),r}const I=r((()=>{if(e.multiple){const{value:e}=u;return Array.isArray(e)?B(e):[]}return null})),A=r((()=>{const{value:n}=u;return e.multiple||Array.isArray(n)||null===n?null:B([n])[0]||null})),E=ue(e),{mergedSizeRef:D,mergedDisabledRef:L,mergedStatusRef:N}=E;function _(n,o){const{onChange:t,"onUpdate:value":l,onUpdateValue:i}=e,{nTriggerFormChange:r,nTriggerFormInput:a}=E;t&&xe(t,n,o),i&&xe(i,n,o),l&&xe(l,n,o),s.value=n,r(),a()}function j(n){const{onBlur:o}=e,{nTriggerFormBlur:t}=E;o&&xe(o,n),t()}function K(){var n;const{remote:o,multiple:t}=e;if(o){const{value:o}=R;if(t){const{valueField:t}=e;null===(n=I.value)||void 0===n||n.forEach((e=>{o.set(e[t],e)}))}else{const n=A.value;n&&o.set(n[e.valueField],n)}}}function U(n){const{onUpdateShow:o,"onUpdate:show":t}=e;o&&xe(o,n),t&&xe(t,n),g.value=n}function q(){L.value||(U(!0),g.value=!0,e.filterable&&te())}function G(){U(!1)}function Y(){p.value="",O.value=z}const X=a(!1);function J(e){Q(e.rawNode)}function Q(n){if(L.value)return;const{tag:o,remote:t,clearFilterAfterSelect:l,valueField:i}=e;if(o&&!t){const{value:e}=O,n=e[0]||null;if(n){const e=T.value;e.length?e.push(n):T.value=[n],O.value=z}}if(t&&R.value.set(n[i],n),e.multiple){const r=function(n){if(!Array.isArray(n))return[];if(P.value)return Array.from(n);{const{remote:o}=e,{value:t}=f;if(o){const{value:e}=R;return n.filter((n=>t.has(n)||e.has(n)))}return n.filter((e=>t.has(e)))}}(u.value),a=r.findIndex((e=>e===n[i]));if(~a){if(r.splice(a,1),o&&!t){const e=ee(n[i]);~e&&(T.value.splice(e,1),l&&(p.value=""))}}else r.push(n[i]),l&&(p.value="");_(r,B(r))}else{if(o&&!t){const e=ee(n[i]);T.value=~e?[T.value[e]]:z}oe(),G(),_(n[i],n)}}function ee(n){return T.value.findIndex((o=>o[e.valueField]===n))}function ne(n){var o,t,l,i,r;if(e.keyboard)switch(n.key){case" ":if(e.filterable)break;n.preventDefault();case"Enter":if(!(null===(o=w.value)||void 0===o?void 0:o.isComposing))if(m.value){const n=null===(t=y.value)||void 0===t?void 0:t.getPendingTmNode();n?J(n):e.filterable||(G(),oe())}else if(q(),e.tag&&X.value){const n=O.value[0];if(n){const o=n[e.valueField],{value:t}=u;e.multiple&&Array.isArray(t)&&t.some((e=>e===o))||Q(n)}}n.preventDefault();break;case"ArrowUp":if(n.preventDefault(),e.loading)return;m.value&&(null===(l=y.value)||void 0===l||l.prev());break;case"ArrowDown":if(n.preventDefault(),e.loading)return;m.value?null===(i=y.value)||void 0===i||i.next():q();break;case"Escape":m.value&&(we(n),G()),null===(r=w.value)||void 0===r||r.focus()}else n.preventDefault()}function oe(){var e;null===(e=w.value)||void 0===e||e.focus()}function te(){var e;null===(e=w.value)||void 0===e||e.focusInput()}K(),v(h(e,"options"),K);const le={focus:()=>{var e;null===(e=w.value)||void 0===e||e.focus()},focusInput:()=>{var e;null===(e=w.value)||void 0===e||e.focusInput()},blur:()=>{var e;null===(e=w.value)||void 0===e||e.blur()},blurInput:()=>{var e;null===(e=w.value)||void 0===e||e.blurInput()}},ie=r((()=>{const{self:{menuBoxShadow:e}}=i.value;return{"--n-menu-box-shadow":e}})),re=l?V("select",void 0,ie,e):void 0;return Object.assign(Object.assign({},le),{mergedStatus:N,mergedClsPrefix:n,mergedBordered:o,namespace:t,treeMate:b,isMounted:ce(),triggerRef:w,menuRef:y,pattern:p,uncontrolledShow:g,mergedShow:m,adjustedTo:pe(e),uncontrolledValue:s,mergedValue:u,followerRef:x,localizedPlaceholder:S,selectedOption:A,selectedOptions:I,mergedSize:D,mergedDisabled:L,focused:c,activeWithoutMenuOpen:X,inlineThemeDisabled:l,onTriggerInputFocus:function(){e.filterable&&(X.value=!0)},onTriggerInputBlur:function(){e.filterable&&(X.value=!1,m.value||Y())},handleTriggerOrMenuResize:function(){var e;m.value&&(null===(e=x.value)||void 0===e||e.syncPosition())},handleMenuFocus:function(e){c.value=!0},handleMenuBlur:function(e){var n;(null===(n=w.value)||void 0===n?void 0:n.$el.contains(e.relatedTarget))||(c.value=!1,j(e),G())},handleMenuTabOut:function(){var e;null===(e=w.value)||void 0===e||e.focus(),G()},handleTriggerClick:function(){L.value||(m.value?e.filterable?te():G():q())},handleToggle:J,handleDeleteOption:Q,handlePatternInput:function(n){m.value||q();const{value:o}=n.target;p.value=o;const{tag:t,remote:l}=e;if(function(n){const{onSearch:o}=e;o&&xe(o,n)}(o),t&&!l){if(!o)return void(O.value=z);const{onCreate:n}=e,t=n?n(o):{[e.labelField]:o,[e.valueField]:o},{valueField:l,labelField:i}=e;F.value.some((e=>e[l]===t[l]||e[i]===t[i]))||T.value.some((e=>e[l]===t[l]||e[i]===t[i]))?O.value=z:O.value=[t]}},handleClear:function(n){n.stopPropagation();const{multiple:o}=e;!o&&e.filterable&&G(),function(){const{onClear:n}=e;n&&xe(n)}(),o?_([],[]):_(null,null)},handleTriggerBlur:function(e){var n,o;(null===(o=null===(n=y.value)||void 0===n?void 0:n.selfRef)||void 0===o?void 0:o.contains(e.relatedTarget))||(c.value=!1,j(e),G())},handleTriggerFocus:function(n){!function(n){const{onFocus:o,showOnFocus:t}=e,{nTriggerFormFocus:l}=E;o&&xe(o,n),l(),t&&q()}(n),c.value=!0},handleKeydown:ne,handleMenuAfterLeave:Y,handleMenuClickOutside:function(e){var n;m.value&&((null===(n=w.value)||void 0===n?void 0:n.$el.contains(me(e)))||G())},handleMenuScroll:function(n){!function(n){const{onScroll:o}=e;o&&xe(o,n)}(n)},handleMenuKeydown:ne,handleMenuMousedown:function(e){Z(e,"action")||Z(e,"empty")||e.preventDefault()},mergedTheme:i,cssVars:l?void 0:ie,themeClass:null==re?void 0:re.themeClass,onRender:null==re?void 0:re.onRender})},render(){return s("div",{class:`${this.mergedClsPrefix}-select`},s(he,null,{default:()=>[s(ve,null,{default:()=>s(Ke,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var e,n;return[null===(n=(e=this.$slots).arrow)||void 0===n?void 0:n.call(e)]}})}),s(be,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===pe.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>s(p,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var e,n,o;return this.mergedShow||"show"===this.displayDirective?(null===(e=this.onRender)||void 0===e||e.call(this),w(s(_e,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,null===(n=this.menuProps)||void 0===n?void 0:n.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:"medium",renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[null===(o=this.menuProps)||void 0===o?void 0:o.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var e,n;return[null===(n=(e=this.$slots).empty)||void 0===n?void 0:n.call(e)]},header:()=>{var e,n;return[null===(n=(e=this.$slots).header)||void 0===n?void 0:n.call(e)]},action:()=>{var e,n;return[null===(n=(e=this.$slots).action)||void 0===n?void 0:n.call(e)]}}),"show"===this.displayDirective?[[x,this.mergedShow],[fe,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[fe,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}}))}}}));
