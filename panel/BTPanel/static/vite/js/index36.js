const __vite__fileDeps=["js/old2.js?v=1720690738171","js/site.js?v=1720690738171","js/index.js?v=1720690738171","js/vue.js?v=1720690738171","js/pinia.js?v=1720690738171","css/index29.css?v=1720690738171","js/index49.js?v=1720690738171","css/index8.css?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang.js?v=1720690738171","js/useTableColumns.js?v=1720690738171","js/Progress.js?v=1720690738171","css/useTableColumns.css?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang2.js?v=1720690738171","js/DataTable.js?v=1720690738171","js/Checkbox.js?v=1720690738171","js/Ellipsis.js?v=1720690738171","js/Select.js?v=1720690738171","js/Tag.js?v=1720690738171","js/Empty.js?v=1720690738171","js/omit.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171","js/useTableData.js?v=1720690738171","js/Skeleton.js?v=1720690738171","js/useAccount.js?v=1720690738171","js/useLoading.js?v=1720690738171","js/site2.js?v=1720690738171","js/index111.js?v=1720690738171","js/Tabs.js?v=1720690738171","css/index12.css?v=1720690738171","js/index85.js?v=1720690738171","js/use-theme-vars.js?v=1720690738171","css/index10.css?v=1720690738171","js/index57.js?v=1720690738171","css/index9.css?v=1720690738171","js/index53.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang10.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang7.js?v=1720690738171","js/InputGroupLabel.js?v=1720690738171","js/InputGroup.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang11.js?v=1720690738171","js/file2.js?v=1720690738171","js/Spin.js?v=1720690738171","js/index50.js?v=1720690738171","js/Space.js?v=1720690738171","js/index112.js?v=1720690738171","css/index13.css?v=1720690738171","js/index109.js?v=1720690738171","js/index110.js?v=1720690738171","js/check.js?v=1720690738171"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{j as e,e as t,h as a,n as l,k as n,B as o,cB as i,a9 as s,g as r,q as u,ci as p,cC as d,G as c,p as m,cf as h,v as _,H as y,cv as v,m as f,r as w}from"./index.js?v=1720690738171";import{_ as g}from"./index49.js?v=1720690738171";import{_ as x}from"./index.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import{_ as b,a as k}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1720690738171";import{_ as C}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171";import{u as U,_ as P}from"./useTableData.js?v=1720690738171";import{s as L}from"./pinia.js?v=1720690738171";import{o as R,l as V}from"./site.js?v=1720690738171";import{c as T,g as I,e as j,a as S}from"./useAccount.js?v=1720690738171";import{u as A}from"./useLoading.js?v=1720690738171";import{B as z,b as E,_ as N,i as D,a as q}from"./useTableColumns.js?v=1720690738171";import{e as B,f as K,h as W,i as M,j as H,k as O,l as $,m as F,n as X,o as G,p as J,q as Q,r as Z,t as Y,u as ee,v as te,w as ae,x as le,y as ne,z as oe,A as ie,B as se,C as re,D as ue,E as pe,F as de,G as ce,H as me,I as he,J as _e,K as ye,L as ve,M as fe,N as we,O as ge,P as xe,Q as be,R as ke,S as Ce,T as Ue,U as Pe}from"./site2.js?v=1720690738171";import{_ as Le}from"./index111.js?v=1720690738171";import{A as Re,a as Ve,P as Te,q as Ie,l as je,r as Se,S as Ae,Z as ze,_ as Ee,V as Ne,W as De,b as qe,f as Be,t as Ke,af as We,F as Me,U as He,x as Oe,L as $e,a3 as Fe,n as Xe,a1 as Ge,w as Je}from"./vue.js?v=1720690738171";import{_ as Qe}from"./index85.js?v=1720690738171";import{_ as Ze}from"./index57.js?v=1720690738171";import{_ as Ye}from"./index53.js?v=1720690738171";import{_ as et,a as tt,b as at}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import{_ as lt}from"./Select.js?v=1720690738171";import{_ as nt}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1720690738171";import{_ as ot}from"./index.vue_vue_type_script_setup_true_lang11.js?v=1720690738171";import{u as it}from"./index50.js?v=1720690738171";import{_ as st}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1720690738171";import{_ as rt,a as ut}from"./Checkbox.js?v=1720690738171";import{_ as pt}from"./Space.js?v=1720690738171";import{_ as dt}from"./index112.js?v=1720690738171";import{_ as ct}from"./Spin.js?v=1720690738171";const mt=Symbol("server-list");async function ht(t){const{message:a}=await B({site_name:t});if(e(a))return a}async function _t(t,a){const{message:l}=await K({site_name:t,proxy_path:a});if(e(l))return l}function yt(){return Ve(mt)}function vt({delDomain:e}){return{key:"action",title:"OPT",width:80,align:"right",render:t=>Te(z,{options:[{label:"Del",onClick:()=>{a({title:"Delete domain [".concat(t.name,"]"),content:"Are you sure to delete this domain name?",onConfirm:async({hide:a})=>{await e(t),a()}})}}]},null)}}const ft={class:"flex justify-between items-center mb-24px"},wt={class:"w-400px"},gt=Ee("p",null,"A domain per line, the default port is 80",-1),xt=Ee("p",null,"Wildcard domain format: *.domain.com",-1),bt=Ee("p",null,"To add another port, the format is www.domain.com:88",-1),kt={class:"pr-40px"},Ct=je({__name:"index",setup(a,{expose:i}){const{data:s}=yt(),r=Se(""),u=async()=>{""!==r.value.trim()?(await W({id:s.id,site_name:s.name,domains:r.value.trim().split("\n").join(",")}),r.value="",f()):l.error("Domain name cannot be empty")},p=async e=>{await M({id:s.id,site_name:s.name,domain:e.name,port:e.port}),f()},{keys:d,table:c,columns:m}=U([{type:"selection",width:40},{key:"name",title:"Domain name",render:e=>Te(t,{href:"http://".concat(e.name,":").concat(e.port),target:"_blank"},{default:()=>[e.name]})},{key:"port",title:"Port",width:100},vt({delDomain:p})]),h=()=>{c.data.length>1?m.value[m.value.length-1]=vt({delDomain:p}):m.value[m.value.length-1]={key:"action",title:"OPT",width:80,align:"right",render:()=>Te("span",{class:"text-default"},[Ie("Inoperable")])}},_=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete",desc:"Please be cautious, The selected item will be [delete] after confirmation",api:e=>M({id:s.id,site_name:s.name,domain:e.name,port:e.port},!1),done:()=>{f()},columns:[{key:"name",title:"Domain name",ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:y,setLoading:v}=A(),f=async()=>{try{v(!0);const t={id:s.id,site_name:s.name},{message:a}=await H(t);e(a)&&(c.data=n(a.domain_list)?a.domain_list:[],h())}catch(t){l.error("Failed to get")}finally{d.value=[],v(!1)}};return f(),i({init:f}),(e,t)=>{const a=Qe,l=o,n=P,i=C,s=x;return Ae(),ze("div",null,[Ee("div",ft,[Ee("div",wt,[Te(a,{value:De(r),"onUpdate:value":t[0]||(t[0]=e=>qe(r)?r.value=e:null)},{default:Ne((()=>[gt,xt,bt])),_:1},8,["value"])]),Ee("div",kt,[Te(l,{type:"primary",onClick:u},{default:Ne((()=>[Ie("Add")])),_:1})])]),Te(s,null,{table:Ne((()=>[Te(n,{"checked-row-keys":De(d),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>qe(d)?d.value=e:null),loading:De(y),"max-height":400,data:De(c).data,columns:De(m)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Ne((()=>[Te(i,{"checked-row-keys":De(d),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>qe(d)?d.value=e:null),data:De(c).data,options:_},null,8,["checked-row-keys","data"])])),_:1})])}}}),Ut={class:"p-20px"},Pt={class:"w-280px"},Lt=Ee("li",null,"Line by line configuration, multiple IPs please line feed",-1),Rt=je({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=i(),{siteName:l}=L(a),n=e,{getList:o}=n.data,r=Se(null),u=Be({name:""}),p={name:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=r.value)?void 0:t.validate()),await O({site_name:l.value,ip_type:"white",ips:u.name}),null==o||o(),e()}}),(e,t)=>{const a=s,l=et,n=tt,o=Ye;return Ae(),ze("div",Ut,[Te(n,{ref_key:"formRef",ref:r,model:De(u),rules:p},{default:Ne((()=>[Te(l,{label:"IP",path:"name"},{default:Ne((()=>[Ee("div",Pt,[Te(a,{type:"textarea",value:De(u).name,"onUpdate:value":t[0]||(t[0]=e=>De(u).name=e),placeholder:"Please enter the ip address"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),Te(o,{class:"mt-4px"},{default:Ne((()=>[Lt])),_:1})])}}}),Vt=je({__name:"index",setup(t,{expose:l}){const{loading:n,setLoading:s}=A(),p=i(),{siteName:d}=L(p),c=async()=>{try{s(!0);const t=await ht(d.value);e(t)&&(h.data=t.ip_limit.ip_white.map((e=>({ip:e}))))}finally{m.value=[],s(!1)}};c(),l({init:c});const{keys:m,table:h,columns:_}=U([{type:"selection",width:40},{key:"ip",title:"IP",ellipsis:{tooltip:{width:"trigger"}}},E({width:130,options:e=>[{label:"Del",onClick:()=>{a({title:"Delete [".concat(e.ip,"]"),content:"Are you sure to delete this IP?",onConfirm:async({hide:t})=>{await $({site_name:d.value,ip_type:"white",ip:e.ip}),c(),t()}})}}]})]),y=[{key:"del",label:"Please choose del",onBatch:e=>{a({title:"Batch delete",content:"Please be cautious, The selected item will be [delete] after confirmation",onConfirm:async({hide:t})=>{await F({site_name:d.value,ip_type:"white",ips:e.map((e=>e.ip)).join("\n")}),c(),t()}})}}],v=()=>{f.title="Add IP White List",f.show=!0},f=r("Add IP White List",{getList:c});return(e,t)=>{const a=o,l=P,i=C,s=x,r=u;return Ae(),ze("div",null,[Te(s,null,{toolsLeft:Ne((()=>[Te(a,{type:"primary",onClick:v},{default:Ne((()=>[Ie("Add IP White List")])),_:1})])),table:Ne((()=>[Te(l,{"checked-row-keys":De(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>qe(m)?m.value=e:null),"row-key":"ip",loading:De(n),"max-height":440,data:De(h).data,columns:De(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Ne((()=>[Te(i,{"checked-row-keys":De(m),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>qe(m)?m.value=e:null),"row-key":"ip",data:De(h).data,options:y},null,8,["checked-row-keys","data"])])),_:1}),Te(r,{show:De(f).show,"onUpdate:show":t[2]||(t[2]=e=>De(f).show=e),title:De(f).title,data:De(f).data,width:480,footer:!0,component:Rt},null,8,["show","title","data"])])}}}),Tt={class:"p-20px"},It={class:"w-280px"},jt=Ee("li",null,"Line by line configuration, multiple IPs please line feed",-1),St=je({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=i(),{siteName:l}=L(a),n=e,{getList:o}=n.data,r=Se(null),u=Be({name:""}),p={name:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=r.value)?void 0:t.validate()),await O({site_name:l.value,ip_type:"black",ips:u.name}),null==o||o(),e()}}),(e,t)=>{const a=s,l=et,n=tt,o=Ye;return Ae(),ze("div",Tt,[Te(n,{ref_key:"formRef",ref:r,model:De(u),rules:p},{default:Ne((()=>[Te(l,{label:"IP",path:"name"},{default:Ne((()=>[Ee("div",It,[Te(a,{type:"textarea",value:De(u).name,"onUpdate:value":t[0]||(t[0]=e=>De(u).name=e),placeholder:"Please enter the ip address"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),Te(o,{class:"mt-4px"},{default:Ne((()=>[jt])),_:1})])}}}),At=je({__name:"index",setup(t,{expose:l}){const{loading:n,setLoading:s}=A(),p=i(),{siteName:d}=L(p),c=async()=>{try{s(!0);const t=await ht(d.value);e(t)&&(h.data=t.ip_limit.ip_black.map((e=>({ip:e}))))}finally{m.value=[],s(!1)}};c(),l({init:c});const{keys:m,table:h,columns:_}=U([{type:"selection",width:40},{key:"ip",title:"IP",ellipsis:{tooltip:{width:"trigger"}}},E({width:130,options:e=>[{label:"Del",onClick:()=>{a({title:"Delete [".concat(e.ip,"]"),content:"Are you sure to delete this IP?",onConfirm:async({hide:t})=>{await $({site_name:d.value,ip_type:"black",ip:e.ip}),c(),t()}})}}]})]),y=[{key:"del",label:"Please choose del",onBatch:e=>{a({title:"Batch delete",content:"Please be cautious, The selected item will be [delete] after confirmation",onConfirm:async({hide:t})=>{await F({site_name:d.value,ip_type:"black",ips:e.map((e=>e.ip)).join("\n")}),c(),t()}})}}],v=()=>{f.title="Add IP Black List",f.show=!0},f=r("Add IP Black List",{getList:c});return(e,t)=>{const a=o,l=P,i=C,s=x,r=u;return Ae(),ze("div",null,[Te(s,null,{toolsLeft:Ne((()=>[Te(a,{type:"primary",onClick:v},{default:Ne((()=>[Ie("Add IP Black List")])),_:1})])),table:Ne((()=>[Te(l,{"checked-row-keys":De(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>qe(m)?m.value=e:null),"row-key":"ip",loading:De(n),"max-height":440,data:De(h).data,columns:De(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Ne((()=>[Te(i,{"checked-row-keys":De(m),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>qe(m)?m.value=e:null),"row-key":"ip",data:De(h).data,options:y},null,8,["checked-row-keys","data"])])),_:1}),Te(r,{show:De(f).show,"onUpdate:show":t[2]||(t[2]=e=>De(f).show=e),title:De(f).title,data:De(f).data,width:480,footer:!0,component:St},null,8,["show","title","data"])])}}}),zt={class:"p-20px"},Et={class:"w-280px"},Nt={class:"w-280px"},Dt={class:"w-280px"},qt={class:"w-280px"},Bt=Ee("li",null,"After the path is protected, you need to enter the account password to access it.",-1),Kt=Ee("li",null," For example, if I set the protection directory /test/ , then I need to enter the account password to access http://aaa.com/test/ ",-1),Wt=je({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=i(),{siteName:l}=L(a),n=e,{isEdit:o,row:r,getList:u}=n.data,d=Se(null),c=Be({name:p(5),auth_path:"",username:"",password:""}),m={name:{required:!0,message:"Please enter the name",trigger:["blur","input"]},auth_path:{required:!0,message:"Please enter the path",trigger:["blur","input"]},username:{required:!0,message:"Please enter the username",trigger:["blur","input"]},password:{required:!0,message:"Please enter the password",trigger:["blur","input"]}};return o&&r&&(c.name=r.auth_name,c.auth_path=r.auth_path),t({onConfirm:async({hide:e})=>{var t;await(null==(t=d.value)?void 0:t.validate()),o?await X({...Ke(c),site_name:l.value}):await G({...Ke(c),site_name:l.value}),null==u||u(),e()}}),(e,t)=>{const a=s,l=et,n=tt,i=Ye;return Ae(),ze("div",zt,[Te(n,{ref_key:"formRef",ref:d,model:De(c),rules:m},{default:Ne((()=>[Te(l,{label:"Name",path:"name"},{default:Ne((()=>[Ee("div",Et,[Te(a,{value:De(c).name,"onUpdate:value":t[0]||(t[0]=e=>De(c).name=e),disabled:De(o),placeholder:""},null,8,["value","disabled"])])])),_:1}),Te(l,{label:"Path",path:"auth_path"},{default:Ne((()=>[Ee("div",Nt,[Te(a,{value:De(c).auth_path,"onUpdate:value":t[1]||(t[1]=e=>De(c).auth_path=e),disabled:De(o),placeholder:"Enter the path: /text/，/test/api"},null,8,["value","disabled"])])])),_:1}),Te(l,{label:"Username",path:"username"},{default:Ne((()=>[Ee("div",Dt,[Te(a,{value:De(c).username,"onUpdate:value":t[2]||(t[2]=e=>De(c).username=e),placeholder:""},null,8,["value"])])])),_:1}),Te(l,{label:"Password",path:"password"},{default:Ne((()=>[Ee("div",qt,[Te(a,{value:De(c).password,"onUpdate:value":t[3]||(t[3]=e=>De(c).password=e),placeholder:""},null,8,["value"])])])),_:1})])),_:1},8,["model"]),Te(i,{class:"mt-4px"},{default:Ne((()=>[Bt,Kt])),_:1})])}}}),Mt=Ee("li",null,"After setting, you need to enter the password to access it.",-1),Ht=Ee("li",null," For example, if I set the limit path /test/, then I need to enter the account password to access http://aaa.com/test/ ",-1),Ot=je({__name:"index",setup(t,{expose:l}){const{loading:n,setLoading:s}=A(),p=i(),{siteName:d}=L(p),c=async()=>{try{s(!0);const t=await ht(d.value);e(t)&&(h.data=t.basic_auth)}finally{s(!1)}};c(),l({init:c});const{keys:m,table:h,columns:_}=U([{key:"auth_name",title:"Name",ellipsis:{tooltip:{width:"trigger"}}},{key:"auth_path",title:"Path",ellipsis:{tooltip:{width:"trigger"}}},E({width:130,options:e=>[{label:"Edit",onClick:()=>{f(e)}},{label:"Del",onClick:()=>{a({title:"Remove HTTP authentication [".concat(e.auth_name,"]"),content:"Are you sure to delete this HTTP authentication?",onConfirm:async({hide:t})=>{await J({site_name:d.value,auth_path:e.auth_path,name:e.auth_name}),c(),t()}})}}]})]),y=r("Add Http Certification",{isEdit:!1,getList:c}),v=()=>{y.data.isEdit=!1,y.title="Add Http Certification",y.show=!0},f=e=>{y.data.row=e,y.data.isEdit=!0,y.title="Edit limit access",y.show=!0};return(e,t)=>{const a=o,l=P,i=x,s=Ye,r=u;return Ae(),ze("div",null,[Te(i,null,{toolsLeft:Ne((()=>[Te(a,{type:"primary",onClick:v},{default:Ne((()=>[Ie("Add Http Certification")])),_:1})])),table:Ne((()=>[Te(l,{"checked-row-keys":De(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>qe(m)?m.value=e:null),"row-key":"name",loading:De(n),"max-height":440,data:De(h).data,columns:De(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Ne((()=>[])),_:1}),Te(s,{class:"mt-16px"},{default:Ne((()=>[Mt,Ht])),_:1}),Te(r,{show:De(y).show,"onUpdate:show":t[1]||(t[1]=e=>De(y).show=e),title:De(y).title,data:De(y).data,width:480,footer:!0,component:Wt},null,8,["show","title","data"])])}}}),$t={class:"p-20px"},Ft={key:0},Xt=Ee("li",null," Caching is a technology used to speed up website performance and improve user experience ",-1),Gt=Ee("li",null,"Resources will be cached when turned on, turn it off if it affects site access",-1),Jt=Ee("li",null,"The cache key consists of a hostname, URI, and request parameters",-1),Qt=Ee("li",null," Response headers that are ignored by default are: Set-Cookie|Cache-Control|expires|X-Accel-Expires ",-1),Zt=Ee("li",null," Default static resources cached are: css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map ",-1),Yt=je({__name:"index",setup(t,{expose:l}){const n=i(),{siteName:s}=L(n),r=Se(null),u=Be({switchValue:!1,inputValue:1,selectValue:"m"}),p=async()=>{const t=await ht(s.value);e(t)&&(u.switchValue=t.proxy_cache.cache_status,t.proxy_cache.expires.length>1&&(u.inputValue=Number(t.proxy_cache.expires.slice(0,-1)),u.selectValue=t.proxy_cache.expires.slice(-1)))};p(),l({init:p});const h={inputValue:{required:!0,validator(e,t){if(!t)return new Error("Please input")},trigger:["input","blur"]}},_=[{label:"Minute",value:"m"},{label:"Hour",value:"h"},{label:"Day",value:"d"}],y=async()=>{var e;await(null==(e=r.value)?void 0:e.validate());let t={site_name:s.value,cache_status:u.switchValue?1:0,expires:"".concat(u.inputValue).concat(u.selectValue)};await Q(t),p()},v=()=>{const e="Clear cache [".concat(s.value,"]");a({title:e,content:"The cache of the site containing all URLs will be cleared after the cleanup, should I continue?",onConfirm:async()=>{await Z({site_name:s.value})}})};return(e,t)=>{const a=N,l=et,n=d,i=lt,s=c,p=o,f=at,w=m,g=Ye;return Ae(),ze(Me,null,[Ee("div",$t,[Te(f,{ref_key:"formRef",ref:r,"label-width":100,model:De(u),rules:h,"label-placement":"left"},{default:Ne((()=>[Te(l,{label:"Cache Switch"},{default:Ne((()=>[Te(a,{value:De(u).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>De(u).switchValue=e),y]},null,8,["value"])])),_:1}),De(u).switchValue?(Ae(),ze("div",Ft,[Te(s,null,{default:Ne((()=>[Te(l,{label:"Cache Time",path:"inputValue"},{default:Ne((()=>[Te(n,{"show-button":!1,value:De(u).inputValue,"onUpdate:value":t[1]||(t[1]=e=>De(u).inputValue=e)},null,8,["value"])])),_:1}),Te(l,null,{default:Ne((()=>[Te(i,{class:"w-90px",value:De(u).selectValue,"onUpdate:value":t[2]||(t[2]=e=>De(u).selectValue=e),placeholder:"Select",options:_},null,8,["value"])])),_:1})])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Te(p,{type:"primary",onClick:y},{default:Ne((()=>[Ie(" Save ")])),_:1})])),_:1})])):We("",!0)])),_:1},8,["model"]),Te(w),Te(p,{class:"mt-20px",onClick:v},{default:Ne((()=>[Ie(" Clear cache ")])),_:1})]),Te(g,null,{default:Ne((()=>[Xt,Gt,Jt,Qt,Zt])),_:1})],64)}}}),ea={class:"p-20px"},ta={key:0},aa=Ee("li",null," Used to compress the content of HTTP responses to reduce the amount of data transferred and improve site performance and loading speeds ",-1),la=Ee("li",null," Compression level 1-9, e.g. 1 is the fastest compression speed but lower compression rate; 9 is the slowest compression speed but highest compression rate, it is recommended to default to ",-1),na=Ee("li",null," If gzip is turned on and it affects the normal access to the website, please turn off this feature and the request parameters ",-1),oa=je({__name:"index",setup(t,{expose:a}){const l=i(),{siteName:n}=L(l),r=async()=>{const t=await ht(n.value);if(e(t)){p.switchValue=t.gzip.gzip_status,p.inputType=t.gzip.gzip_types,p.selectLevel=Number(t.gzip.gzip_comp_level);let e="",a="m";t.gzip.gzip_min_length&&t.gzip.gzip_min_length.length>1&&(e=t.gzip.gzip_min_length.slice(0,-1),a=t.gzip.gzip_min_length.slice(-1)),p.inputValue=Number(e),p.selectLength=a}};r(),a({init:r});const u=Se(null),p=Be({switchValue:!0,inputType:"",selectLevel:1,selectLength:"m",inputValue:1}),m={inputType:{required:!0,message:"Please input",trigger:"blur"},inputValue:{required:!0,trigger:"blur",validator:(e,t)=>{if(!t)return new Error("Please input")}}},h=[{label:"k",value:"k"},{label:"m",value:"m"}],_=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9}],y=async()=>{var e;await(null==(e=u.value)?void 0:e.validate());let t={site_name:n.value,gzip_status:p.switchValue?1:0,gzip_min_length:"".concat(p.inputValue).concat(p.selectLength),gzip_comp_level:p.selectLevel,gzip_types:p.inputType};await Y(t),r()};return(e,t)=>{const a=N,l=et,n=s,i=lt,r=d,v=c,f=o,w=at,g=Ye;return Ae(),ze("div",ea,[Te(w,{ref_key:"formRef",ref:u,"label-width":150,model:De(p),rules:m,"label-placement":"left"},{default:Ne((()=>[Te(l,{label:"Compressed content"},{default:Ne((()=>[Te(a,{value:De(p).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>De(p).switchValue=e),y]},null,8,["value"])])),_:1}),De(p).switchValue?(Ae(),ze("div",ta,[Te(l,{label:"Compression type",path:"inputType"},{default:Ne((()=>[Te(n,{value:De(p).inputType,"onUpdate:value":t[1]||(t[1]=e=>De(p).inputType=e),type:"textarea",placeholder:"Please input"},null,8,["value"])])),_:1}),Te(l,{label:"Compression level"},{default:Ne((()=>[Te(i,{value:De(p).selectLevel,"onUpdate:value":t[2]||(t[2]=e=>De(p).selectLevel=e),placeholder:"Select",options:_},null,8,["value"])])),_:1}),Te(v,null,{default:Ne((()=>[Te(l,{label:"Minimum length",path:"inputValue"},{default:Ne((()=>[Te(r,{"show-button":!1,value:De(p).inputValue,"onUpdate:value":t[3]||(t[3]=e=>De(p).inputValue=e)},null,8,["value"])])),_:1}),Te(l,null,{default:Ne((()=>[Te(i,{class:"w-90px",value:De(p).selectLength,"onUpdate:value":t[4]||(t[4]=e=>De(p).selectLength=e),placeholder:"Select",options:h},null,8,["value"])])),_:1})])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Te(f,{type:"primary",onClick:y},{default:Ne((()=>[Ie(" Save ")])),_:1})])),_:1})])):We("",!0)])),_:1},8,["model"]),Te(g,null,{default:Ne((()=>[aa,la,na])),_:1})])}}}),ia={class:"p-20px"},sa=je({__name:"index",setup(t,{expose:a}){const l=i(),{siteName:n}=L(l),r=async()=>{const t=await ht(n.value);e(t)&&(p.selectValue=t.proxy_log.log_type,p.inputValue=t.proxy_log.rsyslog_host,p.unx=t.proxy_log.log_path)};r(),a({init:r});const u=Se(null),p=Be({inputValue:"",selectValue:"default",unx:""}),d={inputValue:{required:!0,message:"Please input",trigger:"blur"},unx:{required:!0,message:"Please input",trigger:["blur","input"]}},c=[{label:"Default",value:"default"},{label:"No logging",value:"off"},{label:"Specify Log",value:"file"},{label:"Send to remote server",value:"rsyslog"}],m=async()=>{var e;await(null==(e=u.value)?void 0:e.validate());let t={site_name:n.value,log_type:p.selectValue,log_path:"file"===p.selectValue?p.unx:"rsyslog"===p.selectValue?p.inputValue:""};await ee(t),r()};return(e,t)=>{const a=lt,l=et,n=nt,i=s,r=o,h=at;return Ae(),ze("div",ia,[Te(h,{ref_key:"formRef",ref:u,"label-width":150,model:De(p),rules:d,"label-placement":"left"},{default:Ne((()=>[Te(l,{label:"Logs"},{default:Ne((()=>[Te(a,{class:"w-300px",value:De(p).selectValue,"onUpdate:value":t[0]||(t[0]=e=>De(p).selectValue=e),placeholder:"Select",options:c},null,8,["value"])])),_:1}),"file"==De(p).selectValue?(Ae(),He(l,{key:0,label:"Visits log",path:"unx"},{default:Ne((()=>[Te(n,{class:"w-400px","checked-type":["dir"],value:De(p).unx,"onUpdate:value":t[1]||(t[1]=e=>De(p).unx=e)},null,8,["value"])])),_:1})):We("",!0),"rsyslog"==De(p).selectValue?(Ae(),He(l,{key:1,label:"Receive address",path:"inputValue"},{default:Ne((()=>[Te(i,{class:"w-300px!",value:De(p).inputValue,"onUpdate:value":t[2]||(t[2]=e=>De(p).inputValue=e),placeholder:"Please input"},null,8,["value"])])),_:1})):We("",!0),Te(l,{label:" "},{default:Ne((()=>[Te(r,{type:"primary",onClick:m},{default:Ne((()=>[Ie(" Save ")])),_:1})])),_:1})])),_:1},8,["model"])])}}}),ra={class:"p-20px"},ua=je({__name:"index",setup(t,{expose:a}){const l=i(),{siteName:n}=L(l),o=async()=>{const t=await ht(n.value);e(t)&&(r.switchValue=t.websocket.websocket_status)};o(),a({init:o});const s=Se(null),r=Be({switchValue:!1}),u=async()=>{var e;await(null==(e=s.value)?void 0:e.validate()),te({site_name:n.value,websocket_status:r.switchValue?1:0})};return(e,t)=>{const a=N,l=et,n=at;return Ae(),ze("div",ra,[Te(n,{ref_key:"formRef",ref:s,"label-width":150,model:De(r),"label-placement":"left"},{default:Ne((()=>[Te(l,{label:"Websocket Support"},{default:Ne((()=>[Te(a,{value:De(r).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>De(r).switchValue=e),u]},null,8,["value"])])),_:1})])),_:1},8,["model"])])}}}),pa=je({__name:"index",setup(e){const t=Se("cache"),a=[{key:"cache",label:"Cache",component:Yt},{key:"compressed",label:"Compressed",component:oa},{key:"black",label:"Black list",component:At},{key:"white",label:"White list",component:Vt},{key:"http",label:"Http approve",component:Ot},{key:"log",label:"Logs",component:sa},{key:"websocket",label:"Websocket",component:ua}];return(e,l)=>{const n=Ze;return Ae(),He(n,{value:De(t),"onUpdate:value":l[0]||(l[0]=e=>qe(t)?t.value=e:null),data:a},null,8,["value"])}}}),da=Ee("div",{class:"mb-10px"}," The main configuration file is not allowed to be modified, if you need to customize the configuration, please go to the custom configuration file above. ",-1),ca=je({__name:"index",setup(t,{expose:a}){const{data:n}=yt(),i=Se(""),s=Se(""),r=Se({readOnly:!0}),{toClipboard:u}=it();let p=Se();const d=async()=>{(async()=>{const{message:t}=await ae({site_name:n.name});e(t)&&(s.value=t.site_conf)})()};return Oe((()=>{d()})),a({init:d}),(e,t)=>{const a=o;return Ae(),ze(Me,null,[da,Te(ot,{path:De(i),"onUpdate:path":t[0]||(t[0]=e=>qe(i)?i.value=e:null),value:De(s),"onUpdate:value":t[1]||(t[1]=e=>qe(s)?s.value=e:null),config:De(r),height:530,readOnly:!0,"show-tips":!1},null,8,["path","value","config"]),Te(a,{class:"mt-10px",ref_key:"copyBtn",ref:p,onClick:t[2]||(t[2]=e=>(async e=>{try{await u(e,p.value.$el),l.success("Successfully copied")}catch(t){console.error(t),l.success("Copy failure")}})(De(s)))},{default:Ne((()=>[Ie(" Copy ")])),_:1},512)],64)}}}),ma=Ee("li",null," Please check if the input configuration file is correct before saving, incorrect configuration may lead to abnormal access to the site ",-1),ha=Ee("li",null,"If you are not familiar with this configuration, do not add a custom configuration!",-1),_a={key:0},ya=Ee("a",{href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#server",target:"_blank",class:"text-#20a53a"},"click to jump to the",-1),va={key:1},fa=Ee("a",{href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#http",target:"_blank",class:"text-#20a53a"},"click to jump to the",-1),wa=je({__name:"index",setup(t,{expose:a}){const{data:n}=yt(),i=Se(""),s=Se(""),r=Se("server_block"),u=[{value:"server_block",label:"server"},{value:"http_block",label:"http"}],p=async()=>{await le({site_name:n.name,conf_type:r.value,body:s.value}),h()},{toClipboard:d}=it();let m=Se();const h=async()=>{(async()=>{const{message:t}=await ae({site_name:n.name});e(t)&&(s.value=t[r.value])})()};return Oe((()=>{h()})),a({init:h}),(e,t)=>{const a=lt,n=c,_=o,y=Ye;return Ae(),ze(Me,null,[Te(n,{class:"items-center mb-10px"},{default:Ne((()=>[Ie(" Select Configuration Block: "),Te(a,{class:"w-200px",value:De(r),"onUpdate:value":[t[0]||(t[0]=e=>qe(r)?r.value=e:null),h],options:u},null,8,["value"])])),_:1}),Te(ot,{path:De(i),"onUpdate:path":t[1]||(t[1]=e=>qe(i)?i.value=e:null),value:De(s),"onUpdate:value":t[2]||(t[2]=e=>qe(s)?s.value=e:null),config:u,height:400,"show-tips":!1},null,8,["path","value"]),Te(n,{class:"mt-10px mb-10px"},{default:Ne((()=>[Te(_,{type:"primary",onClick:p},{default:Ne((()=>[Ie(" Save ")])),_:1}),Te(_,{ref_key:"copyBtn",ref:m,onClick:t[3]||(t[3]=e=>(async e=>{try{await d(e,m.value.$el),l.success("Successfully copied")}catch(t){console.error(t),l.success("Copy failure")}})(De(s)))},{default:Ne((()=>[Ie(" Copy ")])),_:1},512)])),_:1}),Te(y,null,{default:Ne((()=>[ma,ha,"server_block"==De(r)?(Ae(),ze("li",_a,[Ie(" The official nginx configuration documentation for the server block: "),ya])):(Ae(),ze("li",va,[Ie(" The official nginx configuration documentation for the http block: "),fa]))])),_:1})],64)}}}),ga=je({__name:"index",setup(e){const t=Se("main"),a=[{key:"main",label:"Main Configuration File",component:ca},{key:"customize",label:"Customized Configuration Files",component:wa}];return(e,l)=>{const n=Ze;return Ae(),He(n,{value:De(t),"onUpdate:value":l[0]||(l[0]=e=>qe(t)?t.value=e:null),data:a},null,8,["value"])}}}),xa={class:"px-20px py-24px"},ba={class:"w-120px"},ka={class:"w-120px"},Ca={class:"w-200px"},Ua={class:"w-200px"},Pa={class:"w-200px"},La=Ee("li",null," Type: The domain name selected or the path entered will be redirected to the specified URL ",-1),Ra=Ee("li",null,"Target URL: Fill in the URL address you need to redirect to",-1),Va=Ee("li",null,"Mode: use 301 for permanent redirection and 302 for temporary redirection",-1),Ta=Ee("li",null," Keep URI parameters: Whether the redirected URL has the sub-path or parameters of the source URL ",-1),Ia=Ee("li",null,"Keep URI parameters: http://b.com/1.html ---\x3e http://a.com/1.html",-1),ja=Ee("li",null,"NOT Keep URI parameters: http://b.com/1.html ---\x3e http://a.com",-1),Sa=je({__name:"form",props:{data:{}},setup(t,{expose:a}){const l=t,{isEdit:o,siteId:i,siteName:r,row:u,getList:p}=l.data,d=Se(null),m=Be({redirectname:"".concat((new Date).valueOf()),type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),h={redirectdomain:{trigger:["change"],validator:()=>0!==m.redirectdomain.length||new Error("Please select redirected domain")},redirectpath:{trigger:["blur","input"],validator:()=>""!==m.redirectpath.trim()||new Error("Please input redirect path")},tourl:{trigger:["blur","input"],validator:()=>""!==m.tourl.trim()||new Error("Please input target url")}},_=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],y=[{label:"301",value:"301"},{label:"302",value:"302"}],v=Se([]),f=()=>{m.redirectdomain=[],m.redirectpath=""},{loading:w,setLoading:g}=A();return o&&u&&(m.redirectname=u.redirectname,m.type=u.type,m.holdpath=u.holdpath,m.redirecttype=u.redirecttype,m.redirectpath=u.redirectpath,m.domainorpath=u.domainorpath,m.redirectdomain=u.redirectdomain,m.tourl=u.tourl),(async()=>{try{g(!0);const{message:t}=await H({site_name:r,id:i});e(t)&&(v.value=n(t.domain_list)?t.domain_list.map((e=>({label:e.name,value:e.name}))):[])}finally{g(!1)}})(),a({onConfirm:async({hide:e})=>{var t;await(null==(t=d.value)?void 0:t.validate());const a={...Ke(m),site_name:r};o?await oe(a):await ne(a),null==p||p(),e()}}),(e,t)=>{const a=N,l=et,n=c,o=lt,i=s,r=tt,u=Ye;return Ae(),ze("div",xa,[Te(r,{ref_key:"formRef",ref:d,model:De(m),rules:h},{default:Ne((()=>[Te(n,{size:60},{default:Ne((()=>[Te(l,{label:"Enable"},{default:Ne((()=>[Te(a,{value:De(m).type,"onUpdate:value":t[0]||(t[0]=e=>De(m).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1}),Te(l,{label:"Keep URI param","label-width":"120"},{default:Ne((()=>[Te(a,{value:De(m).holdpath,"onUpdate:value":t[1]||(t[1]=e=>De(m).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})])),_:1}),Te(n,{size:30},{default:Ne((()=>[Te(l,{label:"Type"},{default:Ne((()=>[Ee("div",ba,[Te(o,{value:De(m).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>De(m).domainorpath=e),f],options:_},null,8,["value"])])])),_:1}),Te(l,{label:"Mode","label-width":"70"},{default:Ne((()=>[Ee("div",ka,[Te(o,{value:De(m).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>De(m).redirecttype=e),options:y},null,8,["value"])])])),_:1})])),_:1}),"domain"===De(m).domainorpath?(Ae(),He(l,{key:0,label:"Source",path:"redirectdomain"},{default:Ne((()=>[Ee("div",Ca,[Te(o,{value:De(m).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>De(m).redirectdomain=e),multiple:!0,loading:De(w),options:De(v),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1})):We("",!0),"path"===De(m).domainorpath?(Ae(),He(l,{key:1,label:"Redirect path",path:"redirectpath"},{default:Ne((()=>[Ee("div",Ua,[Te(i,{value:De(m).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>De(m).redirectpath=e),placeholder:""},null,8,["value"])])])),_:1})):We("",!0),Te(l,{label:"Target URL",path:"tourl"},{default:Ne((()=>[Ee("div",Pa,[Te(i,{value:De(m).tourl,"onUpdate:value":t[6]||(t[6]=e=>De(m).tourl=e),placeholder:""},null,8,["value"])])])),_:1})])),_:1},8,["model"]),Te(u,{class:"mt-12px"},{default:Ne((()=>[La,Ra,Va,Ta,Ia,ja])),_:1})])}}}),Aa={class:"p-20px"},za={class:"mt-12px"},Ea=Ee("li",null," This is the configuration file of the load balancing. Not modify if you do not understand the configuration rules. ",-1),Na=je({__name:"config",props:{data:{}},emits:["close"],setup(t,{emit:a}){const n=t,{row:i,getList:s}=n.data,r=a,u=Se(""),p=Se(""),d=async()=>{const{message:t}=await se({path:i.redirect_conf_file,data:u.value,encoding:p.value});e(t)&&l.success(t.msg),null==s||s(),r("close")};return(async()=>{const{message:t}=await ie({path:i.redirect_conf_file});e(t)&&(u.value=t.data,p.value=t.encoding)})(),(e,t)=>{const a=o,l=Ye;return Ae(),ze("div",Aa,[Te(ot,{value:De(u),"onUpdate:value":t[0]||(t[0]=e=>qe(u)?u.value=e:null),height:350,"show-tips":!0},null,8,["value"]),Ee("div",za,[Te(a,{type:"primary",onClick:d},{default:Ne((()=>[Ie("Save")])),_:1})]),Te(l,{class:"mt-24px"},{default:Ne((()=>[Ea])),_:1})])}}}),Da=Ee("li",null,"After setting a domain redirect, the 404 redirect for that domain will be invalidated",-1),qa=je({__name:"index",setup(e,{expose:t}){const{data:l}=yt(),i=e=>({site_name:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:s,table:p,columns:d}=U([{title:"Redirected",key:"name",ellipsis:{tooltip:{width:"trigger"}},render:e=>"domain"===e.domainorpath&&e.redirectdomain.length?e.redirectdomain.join("、"):e.redirectpath},{title:"Type",key:"name",width:90,render:e=>"domain"===e.domainorpath?"Domain":"Approach"},{key:"tourl",title:"Redirects to",width:140},{key:"type",title:"Status",width:100,render:e=>Te(D,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await oe({...i(e),type:t,holdpath:e.holdpath,errorpage:0}),e.type=t}},null)},E({width:120,options:e=>[{label:"Conf",onClick:()=>{w(e)}},{label:"Edit",onClick:()=>{v(e)}},{label:"Del",onClick:()=>{a({title:"Delete redirection [".concat(e.redirectname,"]"),content:"Are you sure to delete the redirection?",onConfirm:async({hide:t})=>{await re({site_name:l.name,redirectname:e.redirectname}),h(),t()}})}}]})]),{loading:c,setLoading:m}=A(),h=async()=>{try{m(!0);const{message:e}=await ue({sitename:l.name});p.data=n(e)?e:[]}finally{s.value=[],m(!1)}},_=r("Create redirection",{row:void 0,siteId:l.id,siteName:l.name,isEdit:!1,getList:h}),y=()=>{_.data.row=void 0,_.data.isEdit=!1,_.title="Create redirection",_.show=!0},v=e=>{_.data.row=e,_.data.isEdit=!0,_.title="Modify redirection [".concat(e.redirectname,"]"),_.show=!0},f=r("",{row:void 0,siteName:l.name,getList:h}),w=e=>{f.data.row=e,f.title="Edit profile [".concat(e.redirectname,"]"),f.show=!0};return h(),t({init:h}),(e,t)=>{const a=o,l=P,n=x,i=Ye,r=u;return Ae(),ze("div",null,[Te(n,null,{toolsLeft:Ne((()=>[Te(a,{type:"primary",onClick:y},{default:Ne((()=>[Ie("Add redirection")])),_:1})])),table:Ne((()=>[Te(l,{"checked-row-keys":De(s),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>qe(s)?s.value=e:null),"row-key":"redirectname",loading:De(c),"max-height":440,data:De(p).data,columns:De(d)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),Te(i,{class:"mt-20px"},{default:Ne((()=>[Da])),_:1}),Te(r,{show:De(_).show,"onUpdate:show":t[1]||(t[1]=e=>De(_).show=e),title:De(_).title,data:De(_).data,width:660,footer:!0,component:Sa},null,8,["show","title","data"]),Te(r,{show:De(f).show,"onUpdate:show":t[2]||(t[2]=e=>De(f).show=e),title:De(f).title,data:De(f).data,width:580,component:Na},null,8,["show","title","data"])])}}}),Ba={class:"m-15px"},Ka=Ee("li",null," Target: you can fill in the site you need to proxy, the target if you choose the URL address must be a normal access to the URL, if you choose UNIX must be a socket file ",-1),Wa=Ee("li",null," Send domain name: add the domain name to the request header to pass to the back-end server, the default is the target URL domain name, if not set properly may lead to the proxy can not be accessed properly, for example: ",-1),Ma=Ee("li",{class:"list-none!"}," http://192.168.100.20:19888, then just send the domain name keeping $http_host ",-1),Ha=Ee("li",{class:"list-none!"}," http://www.bt.cn, then the sending domain should be changed to www.bt.cn ",-1),Oa=Ee("li",{class:"list-none!"}," The above examples are only common cases, please refer to the actual situation ",-1),$a=je({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=e,{getList:l,siteName:n}=a.data,o=()=>{"2"===p.proxy_type?p.proxy_host="$http_host":p.proxy_host=""},i=e=>{if("2"===p.proxy_type)return void(p.proxy_host="$http_host");let t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),p.proxy_host=t},r=Se(null),u=[{label:"URL address",value:"1"},{label:"Unix address",value:"2"}],p=Be({proxy_path:"",proxy_type:"1",url:"http://",unx:"",proxy_host:"$http_host",remark:""}),d={proxy_path:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(""===t.trim())return new Error("Please enter proxy catalog")}},url:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(!t.replace(/^http[s]?:\/\//,""))return new Error("Please input the URL address");let a=t.replace(/^http[s]?:\/\//,"");return a=a.replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(a)?p.proxy_host="$http_host":p.proxy_host=a,!0}},unx:{required:!0,message:"Please select the website path",trigger:["blur","change"]},proxy_host:{required:!0,message:"Please select the website path",trigger:["blur","change"]}};return Oe((()=>{})),t({onConfirm:async()=>{var e;await(null==(e=r.value)?void 0:e.validate());let t={site_name:n,remark:p.remark,proxy_type:"1"==p.proxy_type?"http":"unix",proxy_pass:"1"==p.proxy_type?p.url:p.unx,proxy_path:p.proxy_path,proxy_host:p.proxy_host};await pe(t),null==l||l()}}),(e,t)=>{const a=s,l=et,n=lt,m=nt,_=c,y=h,v=tt,f=Ye;return Ae(),ze("div",Ba,[Te(v,{ref_key:"formRef",ref:r,model:De(p),rules:d},{default:Ne((()=>[Te(l,{label:"Proxy path",path:"proxy_path",class:"w-570px"},{default:Ne((()=>[Te(a,{value:De(p).proxy_path,"onUpdate:value":t[0]||(t[0]=e=>De(p).proxy_path=e),placeholder:"Please enter proxy path Example:/web"},null,8,["value"])])),_:1}),Te(_,null,{default:Ne((()=>[Te(l,{label:"Target"},{default:Ne((()=>[Te(n,{value:De(p).proxy_type,"onUpdate:value":[t[1]||(t[1]=e=>De(p).proxy_type=e),o],options:u,class:"w-120px"},null,8,["value"])])),_:1}),"1"==De(p).proxy_type?(Ae(),He(l,{key:0,path:"url",class:"w-310px"},{default:Ne((()=>[Te(a,{value:De(p).url,"onUpdate:value":t[2]||(t[2]=e=>De(p).url=e),onInput:i},null,8,["value"])])),_:1})):(Ae(),He(l,{key:1,path:"unx",class:"w-310px"},{default:Ne((()=>[Te(m,{"checked-type":["dir","file"],value:De(p).unx,"onUpdate:value":t[3]||(t[3]=e=>De(p).unx=e),onChange:i},null,8,["value"])])),_:1}))])),_:1}),Te(l,{label:"Send Host",path:"proxy_host",class:"w-570px"},{default:Ne((()=>[Te(y,{trigger:"hover"},{trigger:Ne((()=>[Te(a,{value:De(p).proxy_host,"onUpdate:value":t[4]||(t[4]=e=>De(p).proxy_host=e)},null,8,["value"])])),default:Ne((()=>[Ie(" The hostname when the request is forwarded to the back-end server, usually $http_host, if the target URL is a domain name, you need to change it to a domain name ")])),_:1})])),_:1}),Te(l,{label:"remark",class:"w-570px"},{default:Ne((()=>[Te(a,{value:De(p).remark,"onUpdate:value":t[5]||(t[5]=e=>De(p).remark=e),placeholder:"Please enter a comment to be empty"},null,8,["value"])])),_:1})])),_:1},8,["model"]),Te(f,{class:"mt-16px"},{default:Ne((()=>[Ka,Wa,Ma,Ha,Oa])),_:1})])}}}),Fa={class:"p-20px"},Xa={class:"w-280px"},Ga=Ee("li",null,"Line by line configuration, multiple IPs please line feed",-1),Ja=je({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=i(),{siteName:l,proxyPath:n}=L(a),o=e,{getList:r}=o.data,u=Se(null),p=Be({name:""}),d={name:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=u.value)?void 0:t.validate()),await de({site_name:l.value,proxy_path:n.value,ip_type:"white",ips:p.name}),null==r||r(),e()}}),(e,t)=>{const a=s,l=et,n=tt,o=Ye;return Ae(),ze("div",Fa,[Te(n,{ref_key:"formRef",ref:u,model:De(p),rules:d},{default:Ne((()=>[Te(l,{label:"IP",path:"name"},{default:Ne((()=>[Ee("div",Xa,[Te(a,{type:"textarea",value:De(p).name,"onUpdate:value":t[0]||(t[0]=e=>De(p).name=e),placeholder:"Please enter the ip address"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),Te(o,{class:"mt-4px"},{default:Ne((()=>[Ga])),_:1})])}}}),Qa=je({__name:"index",setup(t,{expose:l}){const{loading:n,setLoading:s}=A(),p=i(),{siteName:d,proxyPath:c}=L(p),m=async()=>{try{s(!0);const t=await _t(d.value,c.value);e(t)&&(_.data=t.ip_limit.ip_white.map((e=>({ip:e}))))}finally{h.value=[],s(!1)}};m(),l({init:m});const{keys:h,table:_,columns:y}=U([{type:"selection",width:40},{key:"ip",title:"IP",ellipsis:{tooltip:{width:"trigger"}}},E({width:130,options:e=>[{label:"Del",onClick:()=>{a({title:"Delete [".concat(e.ip,"]"),content:"Are you sure to delete this IP?",onConfirm:async({hide:t})=>{await ce({site_name:d.value,proxy_path:c.value,ip_type:"white",ip:e.ip}),m(),t()}})}}]})]),v=[{key:"del",label:"Please choose del",onBatch:e=>{a({title:"Batch delete",content:"Please be cautious, The selected item will be [delete] after confirmation",onConfirm:async({hide:t})=>{await me({site_name:d.value,proxy_path:c.value,ip_type:"white",ips:e.map((e=>e.ip)).join("\n")}),m(),t()}})}}],f=()=>{w.title="Add IP White List",w.show=!0},w=r("Add IP White List",{getList:m});return(e,t)=>{const a=o,l=P,i=C,s=x,r=u;return Ae(),ze("div",null,[Te(s,null,{toolsLeft:Ne((()=>[Te(a,{type:"primary",onClick:f},{default:Ne((()=>[Ie("Add IP White List")])),_:1})])),table:Ne((()=>[Te(l,{"checked-row-keys":De(h),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>qe(h)?h.value=e:null),"row-key":"ip",loading:De(n),"max-height":440,data:De(_).data,columns:De(y)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Ne((()=>[Te(i,{"checked-row-keys":De(h),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>qe(h)?h.value=e:null),"row-key":"ip",data:De(_).data,options:v},null,8,["checked-row-keys","data"])])),_:1}),Te(r,{show:De(w).show,"onUpdate:show":t[2]||(t[2]=e=>De(w).show=e),title:De(w).title,data:De(w).data,width:480,footer:!0,component:Ja},null,8,["show","title","data"])])}}}),Za={class:"p-20px"},Ya={class:"w-280px"},el=Ee("li",null,"Line by line configuration, multiple IPs please line feed",-1),tl=je({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=i(),{siteName:l,proxyPath:n}=L(a),o=e,{getList:r}=o.data,u=Se(null),p=Be({name:""}),d={name:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=u.value)?void 0:t.validate()),await de({site_name:l.value,proxy_path:n.value,ip_type:"black",ips:p.name}),null==r||r(),e()}}),(e,t)=>{const a=s,l=et,n=tt,o=Ye;return Ae(),ze("div",Za,[Te(n,{ref_key:"formRef",ref:u,model:De(p),rules:d},{default:Ne((()=>[Te(l,{label:"IP",path:"name"},{default:Ne((()=>[Ee("div",Ya,[Te(a,{type:"textarea",value:De(p).name,"onUpdate:value":t[0]||(t[0]=e=>De(p).name=e),placeholder:"Please enter the ip address"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),Te(o,{class:"mt-4px"},{default:Ne((()=>[el])),_:1})])}}}),al=je({__name:"index",setup(t,{expose:l}){const{loading:n,setLoading:s}=A(),p=i(),{siteName:d,proxyPath:c}=L(p),m=async()=>{try{s(!0);const t=await _t(d.value,c.value);e(t)&&(_.data=t.ip_limit.ip_black.map((e=>({ip:e}))))}finally{h.value=[],s(!1)}};m(),l({init:m});const{keys:h,table:_,columns:y}=U([{type:"selection",width:40},{key:"ip",title:"IP",ellipsis:{tooltip:{width:"trigger"}}},E({width:130,options:e=>[{label:"Del",onClick:()=>{a({title:"Delete [".concat(e.ip,"]"),content:"Are you sure to delete this IP?",onConfirm:async({hide:t})=>{await ce({site_name:d.value,proxy_path:c.value,ip_type:"black",ip:e.ip}),m(),t()}})}}]})]),v=[{key:"del",label:"Please choose del",onBatch:e=>{a({title:"Batch delete",content:"Please be cautious, The selected item will be [delete] after confirmation",onConfirm:async({hide:t})=>{await me({site_name:d.value,proxy_path:c.value,ip_type:"black",ips:e.map((e=>e.ip)).join("\n")}),m(),t()}})}}],f=()=>{w.title="Add IP Black List",w.show=!0},w=r("Add IP Black List",{getList:m});return(e,t)=>{const a=o,l=P,i=C,s=x,r=u;return Ae(),ze("div",null,[Te(s,null,{toolsLeft:Ne((()=>[Te(a,{type:"primary",onClick:f},{default:Ne((()=>[Ie("Add IP Black List")])),_:1})])),table:Ne((()=>[Te(l,{"checked-row-keys":De(h),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>qe(h)?h.value=e:null),"row-key":"ip",loading:De(n),"max-height":440,data:De(_).data,columns:De(y)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Ne((()=>[Te(i,{"checked-row-keys":De(h),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>qe(h)?h.value=e:null),"row-key":"ip",data:De(_).data,options:v},null,8,["checked-row-keys","data"])])),_:1}),Te(r,{show:De(w).show,"onUpdate:show":t[2]||(t[2]=e=>De(w).show=e),title:De(w).title,data:De(w).data,width:480,footer:!0,component:tl},null,8,["show","title","data"])])}}}),ll={class:"p-20px"},nl={key:0},ol=Ee("li",null," Caching is a technology used to speed up website performance and improve user experience ",-1),il=Ee("li",null,"Resources will be cached when turned on, turn it off if it affects site access",-1),sl=Ee("li",null,"The cache key consists of a hostname, URI, and request parameters",-1),rl=Ee("li",null," Response headers that are ignored by default are: Set-Cookie|Cache-Control|expires|X-Accel-Expires ",-1),ul=Ee("li",null," Default static resources cached are: css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map ",-1),pl=je({__name:"index",setup(t,{expose:a}){const l=i(),{siteName:n,proxyPath:s}=L(l),r=Se(null),u=Be({switchValue:!1,inputValue:1,selectValue:"m"}),p=async()=>{const t=await _t(n.value,s.value);e(t)&&(u.switchValue=t.proxy_cache.cache_status,t.proxy_cache.expires.length>1&&(u.inputValue=Number(t.proxy_cache.expires.slice(0,-1)),u.selectValue=t.proxy_cache.expires.slice(-1)))};p(),a({init:p});const m={inputValue:{required:!0,validator(e,t){if(!t)return new Error("Please input")},trigger:["input","blur"]}},h=[{label:"Minute",value:"m"},{label:"Hour",value:"h"},{label:"Day",value:"d"}],_=async()=>{var e;await(null==(e=r.value)?void 0:e.validate());let t={site_name:n.value,proxy_path:s.value,cache_status:u.switchValue?1:0,expires:"".concat(u.inputValue).concat(u.selectValue)};await he(t),p()};return(e,t)=>{const a=N,l=et,n=d,i=lt,s=c,p=o,y=at,v=Ye;return Ae(),ze(Me,null,[Ee("div",ll,[Te(y,{ref_key:"formRef",ref:r,"label-width":100,model:De(u),rules:m,"label-placement":"left"},{default:Ne((()=>[Te(l,{label:"Cache Switch"},{default:Ne((()=>[Te(a,{value:De(u).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>De(u).switchValue=e),_]},null,8,["value"])])),_:1}),De(u).switchValue?(Ae(),ze("div",nl,[Te(s,null,{default:Ne((()=>[Te(l,{label:"Cache Time",path:"inputValue"},{default:Ne((()=>[Te(n,{"show-button":!1,value:De(u).inputValue,"onUpdate:value":t[1]||(t[1]=e=>De(u).inputValue=e)},null,8,["value"])])),_:1}),Te(l,null,{default:Ne((()=>[Te(i,{class:"w-90px",value:De(u).selectValue,"onUpdate:value":t[2]||(t[2]=e=>De(u).selectValue=e),placeholder:"Select",options:h},null,8,["value"])])),_:1})])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Te(p,{type:"primary",onClick:_},{default:Ne((()=>[Ie(" Save ")])),_:1})])),_:1})])):We("",!0)])),_:1},8,["model"])]),Te(v,null,{default:Ne((()=>[ol,il,sl,rl,ul])),_:1})],64)}}}),dl={class:"p-20px"},cl={key:0},ml=Ee("li",null," Used to compress the content of HTTP responses to reduce the amount of data transferred and improve site performance and loading speeds ",-1),hl=Ee("li",null," Compression level 1-9, e.g. 1 is the fastest compression speed but lower compression rate; 9 is the slowest compression speed but highest compression rate, it is recommended to default to ",-1),_l=Ee("li",null," If gzip is turned on and it affects the normal access to the website, please turn off this feature and the request parameters ",-1),yl=je({__name:"index",setup(t,{expose:a}){const l=i(),{siteName:n,proxyPath:r}=L(l),u=async()=>{const t=await _t(n.value,r.value);if(e(t)){m.switchValue=t.gzip.gzip_status,m.inputType=t.gzip.gzip_types,m.selectLevel=Number(t.gzip.gzip_comp_level);let e="",a="m";t.gzip.gzip_min_length&&t.gzip.gzip_min_length.length>1&&(e=t.gzip.gzip_min_length.slice(0,-1),a=t.gzip.gzip_min_length.slice(-1)),m.inputValue=Number(e),m.selectLength=a}};u(),a({init:u});const p=Se(null),m=Be({switchValue:!0,inputType:"",selectLevel:1,selectLength:"m",inputValue:1}),h={inputType:{required:!0,message:"Please input",trigger:"blur"},inputValue:{required:!0,trigger:"blur",validator:(e,t)=>{if(!t)return new Error("Please input")}}},_=[{label:"k",value:"k"},{label:"m",value:"m"}],y=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9}],v=async()=>{var e;await(null==(e=p.value)?void 0:e.validate());let t={site_name:n.value,proxy_path:r.value,gzip_status:m.switchValue?1:0,gzip_min_length:"".concat(m.inputValue).concat(m.selectLength),gzip_comp_level:m.selectLevel,gzip_types:m.inputType};await _e(t),u()};return(e,t)=>{const a=N,l=et,n=s,i=lt,r=d,u=c,f=o,w=at,g=Ye;return Ae(),ze("div",dl,[Te(w,{ref_key:"formRef",ref:p,"label-width":150,model:De(m),rules:h,"label-placement":"left"},{default:Ne((()=>[Te(l,{label:"Compressed content"},{default:Ne((()=>[Te(a,{value:De(m).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>De(m).switchValue=e),v]},null,8,["value"])])),_:1}),De(m).switchValue?(Ae(),ze("div",cl,[Te(l,{label:"Compression type",path:"inputType"},{default:Ne((()=>[Te(n,{value:De(m).inputType,"onUpdate:value":t[1]||(t[1]=e=>De(m).inputType=e),type:"textarea",placeholder:"Please input"},null,8,["value"])])),_:1}),Te(l,{label:"Compression level"},{default:Ne((()=>[Te(i,{value:De(m).selectLevel,"onUpdate:value":t[2]||(t[2]=e=>De(m).selectLevel=e),placeholder:"Select",options:y},null,8,["value"])])),_:1}),Te(u,null,{default:Ne((()=>[Te(l,{label:"Minimum length",path:"inputValue"},{default:Ne((()=>[Te(r,{"show-button":!1,value:De(m).inputValue,"onUpdate:value":t[3]||(t[3]=e=>De(m).inputValue=e)},null,8,["value"])])),_:1}),Te(l,null,{default:Ne((()=>[Te(i,{class:"w-90px",value:De(m).selectLength,"onUpdate:value":t[4]||(t[4]=e=>De(m).selectLength=e),placeholder:"Select",options:_},null,8,["value"])])),_:1})])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Te(f,{type:"primary",onClick:v},{default:Ne((()=>[Ie(" Save ")])),_:1})])),_:1})])):We("",!0)])),_:1},8,["model"]),Te(g,null,{default:Ne((()=>[ml,hl,_l])),_:1})])}}}),vl={class:"p-20px"},fl=je({__name:"index",setup(t,{expose:a}){const l=i(),{siteName:n,proxyPath:r}=L(l),u=Se(!1),p=async()=>{var t,a,l,o;const i=await _t(n.value,r.value);e(i)&&(c.proxy_type=i.proxy_type?"http":"unix",c.proxy_pass=i.proxy_pass,c.proxy_host=i.proxy_host,c.proxy_path=i.proxy_path,c.remark=i.remark,u.value=i.global_websocket,c.websocket=null==(t=i.websocket)?void 0:t.websocket_status,c.proxy_connect_timeout=null==(a=i.timeout)?void 0:a.proxy_connect_timeout,c.proxy_send_timeout=null==(l=i.timeout)?void 0:l.proxy_send_timeout,c.proxy_read_timeout=null==(o=i.timeout)?void 0:o.proxy_read_timeout)};p(),a({init:p});const d=Se(null),c=Be({proxy_path:"",proxy_pass:"",proxy_host:"",proxy_type:"http",remark:"",websocket:!1,proxy_connect_timeout:"",proxy_send_timeout:"",proxy_read_timeout:""}),m={proxy_path:{required:!0,message:"Please input",trigger:"blur"},proxy_pass:{required:!0,message:"Please input",trigger:"blur"},proxy_host:{required:!0,message:"Please input",trigger:"blur"},proxy_connect_timeout:{required:!0,message:"Please input",trigger:"blur"},proxy_send_timeout:{required:!0,message:"Please input",trigger:"blur"},proxy_read_timeout:{required:!0,message:"Please input",trigger:"blur"}},_=[{label:"URL Address",value:"http"},{label:"UNIX Address",value:"unix"}],y=async()=>{var e;await(null==(e=d.value)?void 0:e.validate());let t={site_name:n.value,proxy_path:c.proxy_path,proxy_pass:c.proxy_pass,proxy_host:c.proxy_host,proxy_type:c.proxy_type,remark:c.remark,websocket:c.websocket?1:0,proxy_connect_timeout:c.proxy_connect_timeout,proxy_send_timeout:c.proxy_send_timeout,proxy_read_timeout:c.proxy_read_timeout};await ye(t),p()};return(e,t)=>{const a=s,l=et,n=lt,i=rt,r=h,p=st,v=o,f=at;return Ae(),ze("div",vl,[Te(f,{ref_key:"formRef",ref:d,"label-width":180,model:De(c),rules:m,"label-placement":"left"},{default:Ne((()=>[Te(l,{label:"Proxy Catalog",path:"proxy_path"},{default:Ne((()=>[Te(a,{class:"w-400px!",value:De(c).proxy_path,"onUpdate:value":t[0]||(t[0]=e=>De(c).proxy_path=e),disabled:"",placeholder:"Please input"},null,8,["value"])])),_:1}),Te(l,{label:"Target"},{default:Ne((()=>[Te(n,{class:"w-200px",value:De(c).proxy_type,"onUpdate:value":t[1]||(t[1]=e=>De(c).proxy_type=e),placeholder:"Select",options:_},null,8,["value"])])),_:1}),Te(l,{label:" ",path:"proxy_pass"},{default:Ne((()=>[Te(a,{class:"w-400px!",value:De(c).proxy_pass,"onUpdate:value":t[2]||(t[2]=e=>De(c).proxy_pass=e),placeholder:"Please input"},null,8,["value"])])),_:1}),Te(l,{label:"Send Host",path:"proxy_host"},{default:Ne((()=>[Te(a,{class:"w-400px!",value:De(c).proxy_host,"onUpdate:value":t[3]||(t[3]=e=>De(c).proxy_host=e),placeholder:"Please input"},null,8,["value"])])),_:1}),Te(l,{label:"Remark"},{default:Ne((()=>[Te(a,{class:"w-400px!",value:De(c).remark,"onUpdate:value":t[4]||(t[4]=e=>De(c).remark=e),placeholder:"May be empty"},null,8,["value"])])),_:1}),Te(l,{label:"Websocket support"},{default:Ne((()=>[Te(r,{trigger:"hover"},{trigger:Ne((()=>[Te(i,{checked:De(c).websocket,"onUpdate:checked":t[5]||(t[5]=e=>De(c).websocket=e),disabled:De(u)},null,8,["checked","disabled"])])),default:Ne((()=>[Ie(" Global websockets are enabled and are not allowed to be disabled individually ")])),_:1})])),_:1}),Te(l,{label:"Connection Timeout",path:"proxy_connect_timeout"},{default:Ne((()=>[Te(p,$e(e.$attrs,{class:"w-400px!",value:De(c).proxy_connect_timeout,"onUpdate:value":t[6]||(t[6]=e=>De(c).proxy_connect_timeout=e),text:"Sec"}),null,16,["value"])])),_:1}),Te(l,{label:"Backend request timeout",path:"proxy_send_timeout"},{default:Ne((()=>[Te(p,$e(e.$attrs,{class:"w-400px!",value:De(c).proxy_send_timeout,"onUpdate:value":t[7]||(t[7]=e=>De(c).proxy_send_timeout=e),text:"Sec"}),null,16,["value"])])),_:1}),Te(l,{label:"Proxy Response Timeout",path:"proxy_read_timeout"},{default:Ne((()=>[Te(p,$e(e.$attrs,{class:"w-400px!",value:De(c).proxy_read_timeout,"onUpdate:value":t[8]||(t[8]=e=>De(c).proxy_read_timeout=e),text:"Sec"}),null,16,["value"])])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Te(v,{type:"primary",onClick:y},{default:Ne((()=>[Ie(" Save ")])),_:1})])),_:1})])),_:1},8,["model"])])}}}),wl={class:"p-20px"},gl=Ee("li",null,"Note: For line by line configurations, please end with ;",-1),xl=Ee("li",null,[Ie(" Case in point:"),Ee("br"),Ie(" Redirect request: return 301 /new-page;"),Ee("br"),Ie(" Rewrite URL: rewrite ^/blog/(. *)$ /$1 break;"),Ee("br"),Ie(" File upload limit: client_max_body_size 10M;"),Ee("br"),Ie(" Handling specific http methods:"),Ee("br"),Ie(" limit_except POST {"),Ee("br"),Ie(" allow 192.168.1.0/24;"),Ee("br"),Ie(" deny all;"),Ee("br"),Ie(" }"),Ee("br"),Ie(" Limit request rate: limit_rate 100k; ")],-1),bl=Ee("li",null," Please check if the configuration is correct before saving the configuration, incorrect configuration may cause the reverse proxy can not be accessed normally ",-1),kl=je({__name:"index",setup(t,{expose:a}){const l=i(),{siteName:n,proxyPath:r}=L(l),u=async()=>{const t=await _t(n.value,r.value);e(t)&&(d.configValue=t.custom_conf)};u(),a({init:u});const p=Se(null),d=Be({configValue:""}),c={configValue:{required:!0,message:"Please input",trigger:"blur"}},m=async()=>{var e;await(null==(e=p.value)?void 0:e.validate()),await ve({site_name:n.value,proxy_path:r.value,custom_conf:d.configValue}),u()};return(e,t)=>{const a=s,l=et,n=o,i=at,r=Ye;return Ae(),ze("div",wl,[Te(i,{ref_key:"formRef",ref:p,"label-width":180,model:De(d),rules:c,"label-placement":"left"},{default:Ne((()=>[Te(l,{label:"Proxy Catalog",path:"configValue"},{default:Ne((()=>[Te(a,{class:"w-400px!",rows:6,type:"textarea",value:De(d).configValue,"onUpdate:value":t[0]||(t[0]=e=>De(d).configValue=e),placeholder:'Line by line configuration, please end with, for example：\nproxy_set_header Cookie "cookie_name=cookie_value";\nallow 192.168.1.0/24;\naccess_log /www/wwwlogs/xxx.log;'},null,8,["value"])])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Te(n,{type:"primary",onClick:m},{default:Ne((()=>[Ie(" Save ")])),_:1})])),_:1})])),_:1},8,["model"]),Te(r,null,{default:Ne((()=>[gl,xl,bl])),_:1})])}}}),Cl={class:"p-20px"},Ul=je({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=i(),{siteName:l,proxyPath:n}=L(a),o=e,{getList:r}=o.data,u=Se("Default effect:Replace all 'http://www.bt.cn' with 'https://www.bt.cn'."),p=Se(null),d=Be({oldstr:"",newstr:"",sub_type:[]}),c=()=>{m(d.sub_type)},m=e=>{const t=e.includes("i")?"Case insensitive":"",a=e.includes("o")?"Only replace the first":"",l=e.includes("r")?"Regular expression":"";switch(e.length){case 0:u.value="Default effect:Replace all ".concat(d.oldstr," with ").concat(d.newstr);break;case 1:u.value="Effect: will ".concat(a?"all":""," ").concat(d.oldstr," with ").concat(d.newstr,"，Match ").concat(t||a||l);break;case 2:u.value="Effect: will ".concat(a?"all":""," ").concat(d.oldstr," with ").concat(d.newstr,"，Match ").concat(t||a||l," besides ").concat(l||a||t);break;case 3:u.value="Effect: will ".concat(d.oldstr," with ").concat(d.newstr," ，Match ").concat(t,"、").concat(a," beside s").concat(l)}},h={oldstr:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{var t;await(null==(t=p.value)?void 0:t.validate());let a={site_name:l.value,proxy_path:n.value,oldstr:d.oldstr,newstr:d.newstr,sub_type:d.sub_type?d.sub_type.join(""):"g"};await fe(a),null==r||r(),e()}}),(e,t)=>{const a=s,l=et,n=rt,o=pt,i=ut,r=tt;return Ae(),ze("div",Cl,[Te(r,{ref_key:"formRef",ref:p,model:De(d),rules:h},{default:Ne((()=>[Te(l,{label:"Original Keyword",path:"oldstr"},{default:Ne((()=>[Te(a,{class:"w-280px",value:De(d).oldstr,"onUpdate:value":t[0]||(t[0]=e=>De(d).oldstr=e),placeholder:"Please enter",onInput:c},null,8,["value"])])),_:1}),Te(l,{label:"Alternative Word"},{default:Ne((()=>[Te(a,{class:"w-280px",value:De(d).newstr,"onUpdate:value":t[1]||(t[1]=e=>De(d).newstr=e),placeholder:"Please enter",onInput:c},null,8,["value"])])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Te(i,{value:De(d).sub_type,"onUpdate:value":[t[2]||(t[2]=e=>De(d).sub_type=e),m]},{default:Ne((()=>[Te(o,{"item-style":"display: flex;"},{default:Ne((()=>[Te(n,{value:"i",label:"Case insensitive"}),Te(n,{value:"o",label:"Only replace the first"}),Te(n,{value:"r",label:"Regular expression"})])),_:1})])),_:1},8,["value"])])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Ie(Fe(De(u)),1)])),_:1})])),_:1},8,["model"])])}}}),Pl=je({__name:"index",setup(t,{expose:a}){const{loading:l,setLoading:n}=A(),s=i(),{siteName:p,proxyPath:d}=L(s),c=async()=>{try{n(!0);const t=await _t(p.value,d.value);e(t)&&(h.data=t.sub_filter.sub_filter_str)}finally{m.value=[],n(!1)}};c(),a({init:c});const{keys:m,table:h,columns:_}=U([{key:"oldstr",title:"Original Keyword",width:200,ellipsis:{tooltip:{width:"trigger"}}},{key:"newstr",title:"Alternative Word",width:250,ellipsis:{tooltip:{width:"trigger"}}},{key:"sub_type",title:"Rule",ellipsis:{tooltip:{width:"trigger"}}},E({width:130,options:e=>[{label:"Del",onClick:async()=>{await we({site_name:p.value,proxy_path:d.value,newstr:e.newstr,oldstr:e.oldstr}),c()}}]})]),y=()=>{v.title="Add Content Replacement [".concat(d.value,"]"),v.show=!0},v=r("Add Content Replacement [".concat(d.value,"]"),{getList:c});return(e,t)=>{const a=o,n=P,i=x,s=u;return Ae(),ze("div",null,[Te(i,null,{toolsLeft:Ne((()=>[Te(a,{type:"primary",onClick:y},{default:Ne((()=>[Ie("Add Content Replacement")])),_:1})])),table:Ne((()=>[Te(n,{"checked-row-keys":De(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>qe(m)?m.value=e:null),"row-key":"ip",loading:De(l),"max-height":440,data:De(h).data,columns:De(_)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),Te(s,{show:De(v).show,"onUpdate:show":t[1]||(t[1]=e=>De(v).show=e),title:De(v).title,data:De(v).data,width:600,footer:!0,component:Ul},null,8,["show","title","data"])])}}}),Ll=je({__name:"index",setup(e){const t=Se("reverse"),a=[{key:"reverse",label:"Reverse proxy",component:fl},{key:"config",label:"Config",component:kl},{key:"replace",label:"Replacement",component:Pl},{key:"cache",label:"Cache",component:pl},{key:"compressed",label:"Compressed",component:yl},{key:"black",label:"Black list",component:al},{key:"white",label:"White list",component:Qa}];return(e,l)=>{const n=Ze;return Ae(),He(n,{class:"p-20px",value:De(t),"onUpdate:value":l[0]||(l[0]=e=>qe(t)?t.value=e:null),data:a},null,8,["value"])}}}),Rl=je({__name:"index",setup(e,{expose:t}){const s=i(),{proxyPath:p}=L(s),{data:d}=yt(),{keys:c,table:m,columns:h}=U([{key:"proxy_path",title:"Proxy path",width:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxy_pass",title:"Target",width:100,ellipsis:{tooltip:{width:"trigger"}}},q({key:"remark",title:"Remark",width:"8%",onBlur:async(e,t)=>{await ge({site_name:d.name,proxy_path:t.proxy_path,remark:e})}}),E({width:120,options:e=>[{label:"Set",onClick:()=>{b(e)}},{label:"Del",onClick:()=>{"/"!==e.proxy_path?a({title:"Delete reverse proxy [".concat(e.proxy_path,"]"),content:"Do you really want to remove reverse proxy [".concat(e.proxy_path,"]?"),onConfirm:async({hide:t})=>{await xe({site_name:d.name,proxy_path:e.proxy_path}),v(),t()}}):l.error("Root directory cannot be deleted")}}]})]),{loading:_,setLoading:y}=A(),v=async()=>{try{y(!0);const{message:e}=await K({site_name:d.name});m.data=n(e)?e:[]}finally{c.value=[],y(!1)}},f=r("Create reverse proxy",{row:void 0,siteName:d.name,getList:v}),w=()=>{f.data.row=void 0,f.title="Add URL Proxy",f.show=!0},g=r("",{row:void 0,siteName:d.name,getList:v}),b=e=>{p.value=e.proxy_path,g.title="URL Proxy Setting [".concat(e.proxy_path,"]"),g.show=!0};return v(),t({init:v}),(e,t)=>{const a=o,l=P,n=x,i=u;return Ae(),ze("div",null,[Te(n,null,{toolsLeft:Ne((()=>[Te(a,{type:"primary",onClick:w},{default:Ne((()=>[Ie("Add URL Proxy")])),_:1})])),table:Ne((()=>[Te(l,{"checked-row-keys":De(c),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>qe(c)?c.value=e:null),"row-key":"proxyname",loading:De(_),"max-height":440,data:De(m).data,columns:De(h)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),Te(i,{show:De(f).show,"onUpdate:show":t[1]||(t[1]=e=>De(f).show=e),title:De(f).title,data:De(f).data,width:660,footer:!0,component:$a},null,8,["show","title","data"]),Te(i,{show:De(g).show,"onUpdate:show":t[2]||(t[2]=e=>De(g).show=e),title:De(g).title,width:800,"min-height":650,component:Ll},null,8,["show","title"])])}}}),Vl={class:"pt-8px"},Tl={class:"w-300px"},Il={class:"w-300px"},jl={class:"w-300px"},Sl={class:"flex flex-col"},Al=Ee("li",null,[Ie(" By default, resources are allowed to be accessed directly, "),Ee("br"),Ie(" i.e, requests with empty HTTP_REFERER are not restricted. ")],-1),zl=Ee("li",null," Multiple URL suffixes and domains should be separated by comma (,), such as png,jpeg,zip,js ",-1),El=Ee("li",null,"When hotlink protection is triggered, the 404 status is returned directly",-1),Nl=je({__name:"index",setup(t,{expose:a}){const{data:l}=yt(),n=Se(null),i=Se(!1),r=Be({fix:"",domains:"",return_rule:"",status:!1,none:!1}),u={fix:{trigger:["blur","change"],validator:()=>""!==r.fix.trim()||new Error("URL suffix cannot be empty!")},return_rule:{trigger:["blur","change"],validator:()=>""!==r.return_rule.trim()||new Error("Anti-theft chain domain name cannot be empty!")}},p=e=>{e?i.value=!1:(i.value=!0,r.none=!1)},d=async()=>{var e;await(null==(e=n.value)?void 0:e.validate()),await be({id:l.id,name:l.name,fix:r.fix,domains:r.domains.trim().split("\n").join(","),return_rule:r.return_rule,status:r.status,http_status:!!r.none}),c()},c=async()=>{const{message:t}=await ke({id:l.id,name:l.name});e(t)&&(r.fix=t.fix,r.domains=t.domains.split(",").join("\n"),r.return_rule=t.return_rule,r.status=t.status,r.none=t.http_status)};return c(),a({init:c}),(e,t)=>{const a=s,l=et,c=rt,m=o,h=tt,_=Ye;return Ae(),ze("div",Vl,[Te(h,{ref_key:"formRef",ref:n,class:"px-8px",model:De(r),rules:u},{default:Ne((()=>[Te(l,{label:"URL suffix",path:"fix"},{default:Ne((()=>[Ee("div",Tl,[Te(a,{value:De(r).fix,"onUpdate:value":t[0]||(t[0]=e=>De(r).fix=e),placeholder:""},null,8,["value"])])])),_:1}),Te(l,{label:"Access domain"},{default:Ne((()=>[Ee("div",Il,[Te(a,{value:De(r).domains,"onUpdate:value":t[1]||(t[1]=e=>De(r).domains=e),type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:""},null,8,["value"])])])),_:1}),Te(l,{label:"Response",path:"return_rule"},{default:Ne((()=>[Ee("div",jl,[Te(a,{value:De(r).return_rule,"onUpdate:value":t[2]||(t[2]=e=>De(r).return_rule=e),placeholder:""},null,8,["value"])])])),_:1}),Te(l,{label:" "},{default:Ne((()=>[Ee("div",Sl,[Te(c,{checked:De(r).status,"onUpdate:checked":[t[3]||(t[3]=e=>De(r).status=e),p]},{default:Ne((()=>[Ie(" Enable hotlink protection ")])),_:1},8,["checked"]),Te(c,{checked:De(r).none,"onUpdate:checked":t[4]||(t[4]=e=>De(r).none=e),class:"mt-16px",disabled:De(i)},{default:Ne((()=>[Ie(" Allow empty HTTP_REFERER requests ")])),_:1},8,["checked","disabled"])])])),_:1}),Te(l,{label:" ","show-feedback":!1},{default:Ne((()=>[Te(m,{type:"primary",onClick:d},{default:Ne((()=>[Ie("Save")])),_:1})])),_:1})])),_:1},8,["model"]),Te(_,{class:"mt-20px"},{default:Ne((()=>[Al,zl,El])),_:1})])}}}),Dl={class:"mb-10px"},ql=je({__name:"index",setup(t,{expose:a}){const{data:l}=yt(),n=Se("None"),o=Se(0),{loading:i,setLoading:s}=A(),r=async()=>{try{s(!0);const{message:t}=await Ce({site_name:l.name,type:"access"});e(t)&&(n.value=t.msg?t.msg:"None",o.value=t.size)}finally{s(!1)}};return r(),a({init:r}),(e,t)=>{const a=dt,l=ct;return Ae(),He(l,{class:"h-560px",show:De(i)},{default:Ne((()=>[Ee("div",Dl,"Log size: "+Fe(De(o)),1),Te(a,{log:De(n)},null,8,["log"])])),_:1},8,["show"])}}}),Bl={class:"mb-10px"},Kl=je({__name:"index",setup(t,{expose:a}){const{data:l}=yt(),n=Se("None"),o=Se(0),{loading:i,setLoading:s}=A(),r=async()=>{try{s(!0);const{message:t}=await Ce({site_name:l.name,type:"error"});e(t)&&(n.value=t.msg?t.msg:"None",o.value=t.size)}finally{s(!1)}};return r(),a({init:r}),(e,t)=>{const a=dt,l=ct;return Ae(),He(l,{class:"h-560px",show:De(i)},{default:Ne((()=>[Ee("div",Bl,"Log size: "+Fe(De(o)),1),Te(a,{log:De(n)},null,8,["log"])])),_:1},8,["show"])}}}),Wl=je({__name:"index",setup(e,{expose:t}){const{config:a}=yt(),l=Se("access"),n=Se(),o=[{key:"access",label:"Access log",component:ql},{key:"error",label:"Error log",component:Kl}];return l.value=a.subMenu||"access",a.subMenu="",t({init:()=>{l.value="access",Xe((()=>{var e;null==(e=n.value)||e.init()}))}}),(e,t)=>{const a=Ze;return Ae(),He(a,{value:De(l),"onUpdate:value":t[0]||(t[0]=e=>qe(l)?l.value=e:null),ref_key:"tabsRef",ref:n,data:o},null,8,["value"])}}}),Ml=je({__name:"index",props:{siteInfo:{},config:{}},setup(e){const t=i(),{siteName:a}=L(t),l=Ge((()=>_((()=>import("./old2.js?v=1720690738171")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46])))),n=e,{siteInfo:o,config:s}=n;a.value=n.siteInfo.name;const r=Se();o&&Re(mt,{data:o,config:s});const u=Se("domain"),p=[{key:"domain",label:"Domain Manager",component:Ct},{key:"proxy_pass",label:"URL Proxy",component:Rl},{key:"config",label:"Config",component:pa},{key:"file",label:"Config File",component:ga},{key:"ssl",label:"SSL",component:l},{key:"redirect",label:"Redirect",component:qa},{key:"hotlink",label:"Hotlink Protection",component:Nl},{key:"logs",label:"Response log",component:Wl}];return u.value=s.menu||"domain",s.menu="",(e,t)=>{const a=Le;return Ae(),He(a,{value:De(u),"onUpdate:value":t[0]||(t[0]=e=>qe(u)?u.value=e:null),ref_key:"tabsRef",ref:r,data:p},null,8,["value"])}}});function Hl({onClick:e}){return{key:"name",title:"Domain",width:"12%",minWidth:120,render:a=>Te(t,{onClick:()=>{e(a)}},{default:()=>[a.name]})}}function Ol({onClick:e}){return{key:"proxy_pass",title:"Proxy Address",minWidth:70,render:a=>Te(t,{onClick:()=>{e(a)}},{default:()=>[a.proxy_pass]})}}function $l({onClick:a}){return{key:"ssl",title:"SSL",width:"9%",minWidth:100,render:l=>{const{ssl:n}=l;return e(n)?Te(t,{type:n.endtime<0?"error":"primary",onClick:()=>{a(l)}},{default:()=>[n.endtime<0?"Expired":"Exp in ".concat(n.endtime," days")]}):Te(t,{type:"warning",onClick:()=>{a(l)}},{default:()=>[Ie("Not Set")]})}}}function Fl({onClick:e}){return{key:"action",title:"Operation",width:150,align:"right",render:t=>Te(z,{options:[{label:"Stats",onClick:async()=>{await T({source:142}),await I("monitor"),j({name:"monitor",title:"Website statistics-v2",admin:!0})}},{label:"WAF",onClick:()=>{R(t.name)}},{label:"Conf",onClick:()=>{e(t)}},{label:"Del",onClick:()=>{var e;y({title:"Delete reverse proxy project - [".concat((e=[t])[0].name,"]"),width:500,minHeight:72,footer:!0,data:{rows:e},component:Ge((()=>_((()=>import("./index109.js?v=1720690738171")),__vite__mapDeps([47,2,3,4,5,25,14]))))})}}]},null)}}const Xl=Ee("span",null,"Support for ngnix servers only, ",-1),Gl={class:"w-860px h-700px"},Jl=je({__name:"index",setup(a){const l=Ge((()=>_((()=>import("./index110.js?v=1720690738171")),__vite__mapDeps([48,34,2,3,4,5,35,36,37,38,39,29,30,31,49,25,16,17,18])))),s=v(),p=i(),{web:d}=L(s),c=Se(!1),m=r("Add a reverse proxy project"),h=()=>{m.show=!0},R=()=>{W()},T=Be({show:!1,title:"",siteInfo:null,config:{menu:"",subMenu:""}}),I=(e,t={})=>{T.title="Site modification [".concat(e.name,"] -- Time added [").concat(e.addtime,"]"),T.siteInfo=e,T.config=Object.assign({menu:"",subMenu:""},t),T.show=!0},{keys:j,table:z,columns:E}=U([{type:"selection",width:40},Hl({onClick:e=>{I(e)}}),Ol({onClick:e=>{I(e,{menu:"proxy_pass"})}}),$l({onClick:e=>{I(e,{menu:"ssl"})}}),q({width:"8%",onBlur:async(e,t)=>{await Ue({id:t.id,ps:e})}}),Fl({onClick:e=>{I(e)}})]),N=[{key:"Project",label:"Delete Project",onBatch:e=>{y({title:"Batch Delete Items",content:"After batch deleting the selected items, the items will not be restored, should I continue the operation?",width:500,minHeight:72,footer:!0,data:{rows:e},component:Ge((()=>_((()=>import("./index109.js?v=1720690738171")),__vite__mapDeps([47,2,3,4,5,25,14]))))})}}],D=Be({p:1,limit:10,search:""}),{loading:B,setLoading:K}=A(!0),W=async()=>{try{K(!0);const{message:t}=await Pe(D);e(t)?e(t.data)&&(z.data=n(t.data.data)?t.data.data:[],z.total=f(t.data.page)):(z.data=[],z.total=0)}finally{j.value=[],K(!1)}};Je((()=>p.isRefresh),(e=>{e&&(s.setRefresh(!1),W())}));return(async()=>{try{await s.getConfig(),s.web.setup?(c.value=!0,W()):(c.value=!1,K(!1),V())}catch(e){K(!1)}})(),(e,a)=>{const n=t,i=o,s=b,r=P,p=C,c=k,_=x,y=u,v=g,f=w;return Ae(),He(f,null,{default:Ne((()=>[Te(v,{install:De(d).setup&&"nginx"==De(d).type},{desc:Ne((()=>[Xl,Te(n,{class:"ml-4px",onClick:a[0]||(a[0]=e=>De(S)("nginx"))},{default:Ne((()=>[Ie("Install Nginx")])),_:1})])),default:Ne((()=>[Te(_,{class:"p-16px",feedback:!0},{toolsLeft:Ne((()=>[Te(i,{type:"primary",onClick:h},{default:Ne((()=>[Ie("Add proxy")])),_:1})])),toolsRight:Ne((()=>[Te(s,{value:De(D).search,"onUpdate:value":a[1]||(a[1]=e=>De(D).search=e),placeholder:"Domain or Remarks",onSearch:W},null,8,["value"])])),table:Ne((()=>[Te(r,{"checked-row-keys":De(j),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>qe(j)?j.value=e:null),loading:De(B),data:De(z).data,columns:De(E)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:Ne((()=>[Te(p,{"checked-row-keys":De(j),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>qe(j)?j.value=e:null),data:De(z).data,options:N},null,8,["checked-row-keys","data"])])),pageRight:Ne((()=>[Te(c,{page:De(D).p,"onUpdate:page":a[4]||(a[4]=e=>De(D).p=e),"page-size":De(D).limit,"onUpdate:pageSize":a[5]||(a[5]=e=>De(D).limit=e),"item-count":De(z).total,"store-key":"site-php-page",onRefresh:W},null,8,["page","page-size","item-count"])])),_:1}),Te(y,{show:De(m).show,"onUpdate:show":a[6]||(a[6]=e=>De(m).show=e),title:De(m).title,width:640,"min-height":400,footer:!0,data:{onRefresh:R},component:De(l)},null,8,["show","title","data","component"]),Te(y,{show:De(T).show,"onUpdate:show":a[7]||(a[7]=e=>De(T).show=e),title:De(T).title},{default:Ne((()=>[Ee("div",Gl,[Te(Ml,{"site-info":De(T).siteInfo,config:De(T).config},null,8,["site-info","config"])])])),_:1},8,["show","title"])])),_:1},8,["install"])])),_:1})}}}),Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"}));export{Ql as i,yt as u};
