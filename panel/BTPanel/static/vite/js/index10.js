const __vite__fileDeps=["js/index58.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171","js/vue.js?v=1720690738171","js/index.js?v=1720690738171","js/pinia.js?v=1720690738171","css/index29.css?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang6.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang7.js?v=1720690738171","js/InputGroupLabel.js?v=1720690738171","js/InputGroup.js?v=1720690738171","js/index48.js?v=1720690738171","js/index49.js?v=1720690738171","css/index8.css?v=1720690738171","js/useAccount.js?v=1720690738171","js/useTableColumns.js?v=1720690738171","js/Progress.js?v=1720690738171","css/useTableColumns.css?v=1720690738171","js/Select.js?v=1720690738171","js/Tag.js?v=1720690738171","js/Empty.js?v=1720690738171"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{e,u as a,g as t,s,o,h as i,t as l,w as n,j as r,k as d,m as p,l as c,B as u,p as m,q as _,r as h,v as y}from"./index.js?v=1720690738171";import{_ as k}from"./index.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import{_ as f,a as b}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1720690738171";import{_ as g}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171";import{u as w,_ as v}from"./useTableData.js?v=1720690738171";import{u as j}from"./useLoading.js?v=1720690738171";import{a as x,b as C}from"./useTableColumns.js?v=1720690738171";import{a as D,b as R,d as S,_ as B,e as U,f as L,g as P,u as T,c as W}from"./index48.js?v=1720690738171";import{g as E}from"./hooks.js?v=1720690738171";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1720690738171";import{P as A,q as z,l as I,f as G,w as K,S as N,U as V,V as H,_ as O,W as F,b as J,a1 as M,t as Q}from"./vue.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./DataTable.js?v=1720690738171";import"./Checkbox.js?v=1720690738171";import"./Ellipsis.js?v=1720690738171";import"./Select.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./omit.js?v=1720690738171";import"./Skeleton.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./index49.js?v=1720690738171";import"./useAccount.js?v=1720690738171";import"./index50.js?v=1720690738171";const X={class:"p-16px"},Y=I({__name:"index",setup(I){const Y=M((()=>y((()=>import("./index58.js?v=1720690738171")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])))),Z=a(),$=t(),ee=()=>{$.show=!0},ae=()=>{L()},te=()=>{P()},se=async()=>{await s(Z.type,{ids:[]}),ce()},oe=G({p:1,limit:10,sid:-1,search:""}),{keys:ie,table:le,columns:ne}=w([{type:"selection",width:40},{key:"name",title:"Database name",width:"12%",minWidth:120},{key:"username",title:"Username",width:"12%",minWidth:120},{key:"password",title:"Password",minWidth:150,render:e=>A(q,{value:e.password},null)},{key:"backup_count",title:"Backup",width:"12%",render:a=>A("div",{class:"flex items-center"},[A(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{D(a)}},{default:()=>[a.backup_count>0?"\tExists(".concat(a.backup_count,")"):"Not exist"]}),A("span",{class:"mx-4px"},[z("|")]),A(e,{onClick:()=>{R(a)}},{default:()=>[z("Import")]})])},{key:"sid",title:"Location",width:"12%",minWidth:120,render:e=>E(e)},x({onBlur:async(e,a)=>{await o({id:a.id,ps:e})}}),C({width:100,options:e=>[{label:"CHG PW",onClick:()=>{T(e)}},{label:"Del",onClick:()=>{W([e])}}]})]),re=[{key:"sync",label:"Sync to Server",onBatch:e=>{i({title:"Batch Sync to Server",content:"Please be cautious, The selected item will be [Sync to Server] after confirmation",onConfirm:async({hide:a})=>{await s(Z.type,{ids:e.map((e=>e.id))}),a()}})}},{key:"backup",type:"confirm",label:"DB backup",confirm:{title:"Batch backup database",desc:"Do you continue to operate in batch backup database?",api:e=>l(Z.type,{id:e.id},!1),done:()=>{ce()},columns:[{key:"name",title:"Database Name"}]}},{key:"delete",label:"Delete database",onBatch:e=>{W(e)}}],{loading:de,setLoading:pe}=j(),ce=async()=>{try{pe(!0);const{message:e}=await n(Z.type,(()=>{const e={...Q(oe)};return-1===e.sid&&delete e.sid,e})());r(e)?(le.data=d(e.data)?e.data:[],le.total=p(e.page)):(le.data=[],le.total=0)}finally{ie.value=[],pe(!1)}};K((()=>Z.isRefresh),(e=>{e&&(Z.setRefresh(!1),Z.delRemoteId===oe.sid&&(oe.sid=-1),ce())}));return(async()=>{await Z.getRemote(),Z.install?ce():c()})(),(e,a)=>{const t=u,s=m,o=f,i=v,l=g,n=b,r=k,d=_,p=h;return N(),V(F(U),null,{default:H((()=>[A(p,null,{default:H((()=>[O("div",X,[A(r,null,{toolsLeft:H((()=>[A(t,{type:"primary",onClick:ee},{default:H((()=>[z("Add DB")])),_:1}),A(t,{onClick:ae},{default:H((()=>[z("Root password")])),_:1}),A(t,{onClick:te},{default:H((()=>[z("Remote DB")])),_:1}),A(s,{class:"mx-0!",vertical:""}),A(t,{onClick:se},{default:H((()=>[z("Sync all")])),_:1}),A(t,{onClick:F(S)},{default:H((()=>[z("Get DB from server")])),_:1},8,["onClick"])])),toolsRight:H((()=>[A(F(B),{value:F(oe).sid,"onUpdate:value":a[0]||(a[0]=e=>F(oe).sid=e),"store-key":"database-pgsql-page",onChange:ce},null,8,["value"]),A(o,{value:F(oe).search,"onUpdate:value":a[1]||(a[1]=e=>F(oe).search=e),placeholder:"Database search",onSearch:ce},null,8,["value"])])),table:H((()=>[A(i,{"checked-row-keys":F(ie),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>J(ie)?ie.value=e:null),loading:F(de),data:F(le).data,columns:F(ne)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:H((()=>[A(l,{"checked-row-keys":F(ie),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>J(ie)?ie.value=e:null),data:F(le).data,options:re},null,8,["checked-row-keys","data"])])),pageRight:H((()=>[A(n,{page:F(oe).p,"onUpdate:page":a[4]||(a[4]=e=>F(oe).p=e),"page-size":F(oe).limit,"onUpdate:pageSize":a[5]||(a[5]=e=>F(oe).limit=e),"store-key":"database-pgsql-page","item-count":F(le).total,onRefresh:ce},null,8,["page","page-size","item-count"])])),_:1}),A(d,{show:F($).show,"onUpdate:show":a[6]||(a[6]=e=>F($).show=e),title:"Add Database",width:540,"min-height":280,footer:!0,component:F(Y)},null,8,["show","component"])])])),_:1})])),_:1})}}});export{Y as default};
