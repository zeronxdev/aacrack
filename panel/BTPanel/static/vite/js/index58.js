import{_ as e,a as s}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import{u as a,dx as r,a9 as t,e as l,n as o}from"./index.js?v=1720690738171";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang6.js?v=1720690738171";import{s as n}from"./pinia.js?v=1720690738171";import{g as p}from"./index48.js?v=1720690738171";import{l as d,r as i,f as m,k as v,S as _,U as c,V as f,P as g,_ as b,W as h,q as w,t as j}from"./vue.js?v=1720690738171";import{_ as x}from"./Select.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1720690738171";import"./InputGroupLabel.js?v=1720690738171";import"./InputGroup.js?v=1720690738171";import"./index49.js?v=1720690738171";import"./useAccount.js?v=1720690738171";import"./useTableColumns.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";const P={class:"w-240px"},y={class:"w-240px"},U={class:"w-240px"},q={class:"w-240px"},k={class:"ml-8px"},C=d({__name:"index",setup(d,{expose:C}){const E=a(),{remoteList:R}=n(E),A=i(null),D=m({sid:R.value.length>0?R.value[0].id:null,name:"",db_user:"",password:"",active:!1,ssl:""}),G=v((()=>R.value.map((e=>({label:"".concat(e.ps," (").concat(e.db_host,")"),value:e.id}))))),I={name:{required:!0,message:"Please enter database name",trigger:["blur","change"]},db_user:{required:!0,message:"Please enter username",trigger:["blur","change"]},password:{required:!0,message:"Please enter password",trigger:["blur","change"]},sid:{trigger:"change",validator:(e,s)=>null!==s||new Error("Please select remote server")}},L=e=>{D.db_user=e},N=()=>{p()};return C({onConfirm:async({hide:e})=>{var s;try{await(null==(s=A.value)?void 0:s.validate());const a=(()=>{const{sid:e}=D;if(null===e)throw o.error("Please select remote server"),new Error("Please select remote server");return{...j(D),sid:e,ps:D.name}})();await r(E.type,a),E.setRefresh(!0),e()}catch(a){console.error(a)}}}),(a,r)=>{const o=t,n=e,p=u,d=x,i=l,m=s;return _(),c(m,{ref_key:"formRef",ref:A,model:h(D),rules:I,class:"p-20px"},{default:f((()=>[g(n,{label:"DBName",path:"name"},{default:f((()=>[b("div",P,[g(o,{value:h(D).name,"onUpdate:value":[r[0]||(r[0]=e=>h(D).name=e),L],placeholder:"New database name"},null,8,["value"])])])),_:1}),g(n,{label:"Username",path:"db_user"},{default:f((()=>[b("div",y,[g(o,{value:h(D).db_user,"onUpdate:value":r[1]||(r[1]=e=>h(D).db_user=e),placeholder:"Database user"},null,8,["value"])])])),_:1}),g(n,{label:"Password",path:"password"},{default:f((()=>[b("div",U,[g(p,{value:h(D).password,"onUpdate:value":r[2]||(r[2]=e=>h(D).password=e),placeholder:""},null,8,["value"])])])),_:1}),g(n,{label:"Add to",path:"sid"},{default:f((()=>[b("div",q,[g(d,{value:h(D).sid,"onUpdate:value":r[3]||(r[3]=e=>h(D).sid=e),options:h(G)},null,8,["value","options"])]),b("div",k,[g(i,{onClick:N},{default:f((()=>[w("Remote servers")])),_:1})])])),_:1})])),_:1},8,["model"])}}});export{C as default};
