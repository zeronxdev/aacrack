System.register(["./index-legacy53.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./index-legacy.js?v=1720690738171","./check-legacy.js?v=1720690738171","./index-legacy121.js?v=1720690738171","./vue-legacy.js?v=1720690738171"],(function(e,a){"use strict";var s,r,t,l,d,o,u,n,p,i,_,b,c,v,m,h,w,g,f,y,x,P,j,k;return{setters:[e=>{s=e._},e=>{r=e._,t=e.a},e=>{l=e.s},e=>{d=e.u,o=e.dh,u=e.di,n=e.a9,p=e.cC},e=>{i=e.c,_=e.a},e=>{b=e.v},e=>{c=e.l,v=e.r,m=e.f,h=e.S,w=e.Z,g=e.P,f=e.V,y=e._,x=e.W,P=e.U,j=e.af,k=e.t}],execute:function(){const a={class:"p-20px"},U={class:"w-260px"},q={class:"w-260px"},D={class:"w-260px"},S={class:"w-260px"},E={class:"w-260px"},M={key:0},N=y("li",null,"Support cloud database",-1),$=y("li",null,"Note 1: Make sure this server has permission to access the database",-1),C=y("li",null," Note 2: Please make sure that the administrator account you fill in has sufficient permissions ",-1);e("_",c({__name:"form",props:{data:{}},setup(e,{expose:c}){const B=e,{row:R,isEdit:L}=B.data,Q=d(),{type:V}=l(Q),W=v(null),Z=m({db_host:"",db_port:null,db_user:"root",db_password:"",db_ps:""}),z={db_host:{trigger:["blur","change"],validator:(e,a)=>""===a?new Error("Please enter server address"):!(!i(a)&&!_(a))||new Error("Please enter correct server address")},db_port:b(),db_user:{required:!0,message:"Please enter administrator name",trigger:["blur","change"]},db_password:{required:!0,message:"Please enter administrator password",trigger:["blur","change"]}},A=e=>{Z.db_ps=e},F=new Map([["mysql",{port:3306,username:"root"}],["sqlserver",{port:1433,username:"sa"}],["redis",{port:6379,username:"root"}],["mongodb",{port:27017,username:"root"}],["pgsql",{port:5432,username:"postgres"}]]);return(()=>{if(L&&R)Z.db_host=`${R.db_host}`,Z.db_port=R.db_port,Z.db_user=`${R.db_user}`,Z.db_password=`${R.db_password}`,Z.db_ps=`${R.ps}`;else{const e=F.get(V.value);e&&(Z.db_port=e.port,Z.db_user=e.username)}})(),c({onConfirm:async({hide:e})=>{await(W.value?.validate());const a=(()=>{const{db_port:e}=Z;if(null===e)throw new Error("Please enter database port");return{...k(Z),db_port:e,type:V.value}})();L&&R&&await o(V.value,{id:R.id,...a}),L||await u(V.value,a),Q.getRemote(),e()}}),(e,l)=>{const d=n,o=r,u=p,i=t,_=s;return h(),w("div",a,[g(i,{ref_key:"formRef",ref:W,model:x(Z),rules:z},{default:f((()=>[g(o,{label:"DB address",path:"db_host"},{default:f((()=>[y("div",U,[g(d,{value:x(Z).db_host,"onUpdate:value":[l[0]||(l[0]=e=>x(Z).db_host=e),A],placeholder:"Please fill you server address"},null,8,["value"])])])),_:1}),g(o,{label:"Port",path:"db_port"},{default:f((()=>[y("div",q,[g(u,{value:x(Z).db_port,"onUpdate:value":l[1]||(l[1]=e=>x(Z).db_port=e),min:1,max:65535,"show-button":!1,placeholder:"Database port"},null,8,["value"])])])),_:1}),"redis"!==x(V)?(h(),P(o,{key:0,label:"Username",path:"db_user"},{default:f((()=>[y("div",D,[g(d,{value:x(Z).db_user,"onUpdate:value":l[2]||(l[2]=e=>x(Z).db_user=e),placeholder:"Database administrator name"},null,8,["value"])])])),_:1})):j("",!0),g(o,{label:"Password",path:"db_password"},{default:f((()=>[y("div",S,[g(d,{value:x(Z).db_password,"onUpdate:value":l[3]||(l[3]=e=>x(Z).db_password=e),placeholder:"Database administrator password"},null,8,["value"])])])),_:1}),g(o,{label:"Notes",path:"db_ps","show-feedback":!1},{default:f((()=>[y("div",E,[g(d,{value:x(Z).db_ps,"onUpdate:value":l[4]||(l[4]=e=>x(Z).db_ps=e),placeholder:"Server Notes"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),g(_,{class:"mt-24px"},{default:f((()=>["mysql"===x(V)?(h(),w("li",M,"Compatible with MySQL5.5, MariaDB10.1 and above")):j("",!0),N,$,C])),_:1})])}}}))}}}));
