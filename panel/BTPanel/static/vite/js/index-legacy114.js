System.register(["./index-legacy.js?v=1720690738171","./site-legacy2.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1720690738171","./file-legacy2.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./Ellipsis-legacy.js?v=1720690738171","./use-theme-vars-legacy.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./Progress-legacy.js?v=1720690738171","./DataTable-legacy.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./Tag-legacy.js?v=1720690738171","./Empty-legacy.js?v=1720690738171","./omit-legacy.js?v=1720690738171"],(function(e,t){"use strict";var l,a,i,n,s,o,d,r,c,u,p,m,v,x,S,g,f,h,y,b,_,w,D,C,$,T,j,k,z,R,M,I,P,E,U,F,q,B,G;return{setters:[e=>{l=e.J,a=e.j,i=e._,n=e.b3,s=e.a,o=e.cI,d=e.G,r=e.cC,c=e.H},e=>{u=e.b4,p=e.b5},e=>{m=e.a,v=e._},e=>{x=e.b},e=>{S=e.l,g=e.r,f=e.k,h=e.S,y=e.Z,b=e._,_=e.P,w=e.a3,D=e.F,C=e.ag,$=e.V,T=e.q,j=e.W,k=e.af,z=e.aj,R=e.a5,M=e.a6,I=e.ad,P=e.b,E=e.$,U=e.ay},e=>{F=e._},e=>{q=e.u},e=>{B=e._,G=e.a},null,null,null,null,null,null,null],execute:function(){var t=document.createElement("style");t.textContent=".site-content[data-v-17023237]{height:300px;border:1px solid #ececec;overflow-y:auto}.site-content .content-item[data-v-17023237]{padding:12px;max-height:80px;border-bottom:1px solid #ececec;font-size:13px;transition:background-color .3s}.site-content .content-item[data-v-17023237]:hover{background-color:#fcfcfc}.site-content .content-item .site-size[data-v-17023237],.site-content .content-item .site-db[data-v-17023237]{display:flex;align-items:center;min-height:24px}.site-content .content-item .site-title[data-v-17023237]{width:170px}.site-content .content-item .site-path[data-v-17023237]{display:flex;align-items:center;flex:1;width:0;margin:0 10px}.site-content .content-item .site-path .value[data-v-17023237]{max-width:162px;margin:0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.site-content .content-item .db-name[data-v-17023237]{flex:1;width:0}.site-content .content-item .db-size[data-v-17023237]{width:180px}.site-content .content-item .db-time[data-v-17023237],.site-content .content-item .site-time[data-v-17023237]{width:130px}\n",document.head.appendChild(t);const H=e=>(R("data-v-17023237"),e=e(),M(),e),J={class:"p-24px"},N={class:"flex"},O={class:"flex-1 ml-14px pt-6px"},V={class:"text-19px font-bold text-#111"},W={class:"site-content mt-24px"},Z={class:"site-size"},A={class:"site-title"},K={class:"site-path"},L={class:"value"},Q=H((()=>b("span",null,"(",-1))),X={class:"font-bold text-error"},Y=H((()=>b("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1))),ee={key:1},te=H((()=>b("span",null,")",-1))),le={key:0},ae={class:"site-time"},ie={key:0,class:"site-db"},ne={class:"db-name"},se={class:"db-size"},oe={class:"db-time"},de={class:"mt-24px text-13px text-error"},re={key:0},ce=H((()=>b("span",{class:"glyphicon glyphicon-info-sign"},null,-1))),ue={key:1,class:"mt-6px"},pe=H((()=>b("span",{class:"glyphicon glyphicon-info-sign"},null,-1))),me={key:2,class:"mt-6px text-#333"},ve={class:"text-error font-bold"},xe={key:3,class:"mt-6px"},Se=S({__name:"verify",props:{data:{}},emits:["setConfirm"],setup(e,{expose:t,emit:s}){const o=e,d=s,{rows:r,type:c,delSite:p}=o.data,m=g(!0),v=g(!0),S=f((()=>!!c.find((e=>"database"===e)))),R=f((()=>!!c.find((e=>"path"===e)))),M=g([]),I=g(5);return(()=>{d("setConfirm",{type:"error",disabled:!0,text:`Confirm deletion (continue operation after ${I.value} seconds)`});const e=setInterval((()=>{I.value--,d("setConfirm",{text:`Confirm deletion (continue operation after ${I.value} seconds)`}),0===I.value&&(clearInterval(e),d("setConfirm",{disabled:!1,text:"Confirm deletion"}))}),1e3)})(),(async()=>{const{message:e}=await u({ids:r.map((e=>e.id))});a(e)&&(M.value=e.data.map((e=>{const{database:t}=e;return a(t)&&(t.addtime_show=t.addtime.split(" ")[0],t.is_time_rule=Math.round(Date.now()/1e3)-t.st_time>2592e3&&t.total>10240),{...e,addtime_show:e.addtime.split(" ")[0],is_time_rule:Math.round(Date.now()/1e3)-e.st_time>2592e3&&e.total>10240}})))})(),(async()=>{const{message:e}=await x();a(e)&&(m.value=e.status,v.value=e.status_db)})(),t({onConfirm:async({hide:e})=>{await(p?.(e))}}),(e,t)=>{const s=i,o=F,d=n;return h(),y("div",J,[b("div",N,[_(s,{name:"base-warning",size:"34",color:"#f0a020"}),b("div",O,[b("div",V,w(e.$t("Site.DelSite.ContentText7")),1)])]),b("div",W,[(h(!0),y(D,null,C(j(M),(t=>(h(),y("div",{key:t.name,class:"content-item"},[b("div",Z,[b("div",A,[_(o,null,{default:$((()=>[T(w(e.$t("Site.DelSite.Site"))+": "+w(t.name),1)])),_:2},1024)]),_(d,{trigger:"hover"},{trigger:$((()=>[b("div",K,[b("div",null,w(e.$t("Site.DelSite.Path"))+":",1),b("div",L,w(t.path),1),b("div",null,[Q,t.limit?(h(),y(D,{key:0},[b("span",X,w(e.$t("Site.DelSite.More50")),1),Y],64)):(h(),y("span",ee,w(j(l)(t.total)),1)),te])])])),default:$((()=>[b("div",null,[t.limit?(h(),y("p",le,w(e.$t("Site.DelSite.ContentText8")),1)):k("",!0),b("p",null,[b("span",null,w(e.$t("Site.DelSite.Directory"))+": "+w(t.path),1),b("span",null," ("+w((t.limit?"greater than ":"")+j(l)(t.total))+")",1)])])])),_:2},1024),b("div",ae,[_(d,{trigger:"hover",disabled:!t.is_time_rule},{trigger:$((()=>[b("div",null,[b("span",null,w(e.$t("Site.DelSite.Create"))+": ",1),b("span",{class:z({"text-error":t.is_time_rule})},w(t.addtime_show),3)])])),default:$((()=>[b("div",null,[b("p",null,w(e.$t("Site.DelSite.ContentText9")),1),b("p",null,w(e.$t("Site.DelSite.Time"))+": "+w(t.addtime_show),1)])])),_:2},1032,["disabled"])])]),j(S)&&j(a)(t.database)?(h(),y("div",ie,[b("div",ne,[_(o,null,{default:$((()=>[T(w(e.$t("Site.DelSite.DB"))+": "+w(t.name),1)])),_:2},1024)]),b("div",se,[_(d,{trigger:"hover"},{trigger:$((()=>[T(w(e.$t("Site.DelSite.Size"))+": "+w(j(l)(t.database.total)),1)])),default:$((()=>[b("div",null,[b("p",null,w(e.$t("Site.DelSite.ContentText10")),1),b("p",null,w(e.$t("Site.DelSite.Database"))+": "+w(j(l)(t.database.total)),1)])])),_:2},1024)]),b("div",oe,[_(d,{trigger:"hover",disabled:!t.database.is_time_rule},{trigger:$((()=>[b("div",null,[b("span",null,w(e.$t("Site.DelSite.Create"))+": ",1),b("span",{class:z({"text-error":t.database.is_time_rule})},w(t.addtime_show),3)])])),default:$((()=>[b("div",null,[b("p",null,w(e.$t("Site.DelSite.ContentText11")),1),b("p",null,w(e.$t("Site.DelSite.Time"))+": "+w(t.database.addtime_show),1)])])),_:2},1032,["disabled"])])])):k("",!0)])))),128))]),b("div",de,[j(S)&&!j(v)?(h(),y("div",re,[ce,b("span",null,w(e.$t("Site.DelSite.ContentText12")),1)])):k("",!0),j(R)&&!j(m)?(h(),y("div",ue,[pe,b("span",null,w(e.$t("Site.DelSite.ContentText13")),1)])):k("",!0),j(I)>0?(h(),y("div",me,[b("span",null,w(e.$t("Site.DelSite.ContentText14")),1),b("span",ve,w(j(I)),1),b("span",null,w(e.$t("Site.DelSite.Second")),1)])):(h(),y("div",xe,w(e.$t("Site.DelSite.ContentText15")),1))])])}}}),ge=s(Se,[["__scopeId","data-v-17023237"]]),fe={class:"p-24px"},he={class:"flex pl-12px"},ye={class:"flex-1 ml-14px pt-8px"},be={class:"text-16px font-bold text-#111"},_e={class:"mt-20px"},we={class:"mr-8px"},De=b("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1),Ce={class:"flex items-center h-40px mt-24px mx-12px pl-48px bg-#f0f0f0 text-14px"},$e={class:"mx-12px"},Te=b("span",null,"=",-1),je={class:"w-80px ml-12px"};e("default",S({__name:"index",props:{data:{}},setup(e,{expose:t}){const{t:l}=I(),a=e,{rows:s}=a.data,u=q(),x=o(),S=g(null),D=g([]),C=f((()=>1===D.value.length&&"ftp"===D.value[0])),k=g(0),z=g(0),R=g(null),M=g(!1),F=g("");let H=null;const J=e=>{U((()=>{(e=>{F.value=e,M.value=!0,S.value?.focus(),H&&clearTimeout(H),H=window.setTimeout((()=>{M.value=!1}),3e3)})(e)}))()},N=async e=>{1===s.length?(await O(s[0],!0),x.setRefresh(!0),e?.()):V(e)},O=async(e,t=!1)=>{const l=D.value.reduce(((e,t)=>(e[t]=1,e)),{});return await p(Object.assign({id:e.id,webname:e.name},l),t)},V=e=>{c({title:l("Site.Cert.DelSite"),hideClose:!0,component:m,data:{title:l("Site.Cert.DelSite"),api:O,data:s,callback:t=>{e(),W(t)}}})},W=e=>{x.setRefresh(!0),c({title:l("Site.DelSite.DelSiteResult"),width:440,footer:!0,component:v,data:{title:l("Site.Cert.DelSite"),data:e,status:"done",columns:[{key:"name",title:l("Site.TableRow.SiteName"),ellipsis:{tooltip:{width:"trigger"}}}]}})};return R.value=null,k.value=Math.round(9*Math.random()+1),z.value=Math.round(9*Math.random()+1),t({onConfirm:async({hide:e})=>null==R.value||null==R.value?(J(l("Site.DelSite.ContentText5")),!1):R.value!==k.value+z.value?(J(l("Site.DelSite.ContentText6")),!1):void(0===D.value.length||C.value?await N(e):(c({title:1===s.length?`${l("Site.DelSite.ContentText3")} [${s[0].name}]`:`${l("Site.DelSite.ContentText4")}`,width:740,footer:!0,data:{rows:s,type:D.value,delSite:N},component:ge}),e()))}),(e,t)=>{const l=i,a=B,s=d,o=G,c=r,p=n;return h(),y("div",fe,[b("div",he,[_(l,{name:"base-warning",size:"34",color:"#f0a020"}),b("div",ye,[b("div",be,[b("div",null,w(e.$t("Site.DelSite.ContentText1")),1),b("div",_e,w(e.$t("Site.DelSite.ContentText2")),1)]),_(o,{value:j(D),"onUpdate:value":t[0]||(t[0]=e=>P(D)?D.value=e:null)},{default:$((()=>[_(s,{size:32,class:"items-center h-24px mt-24px"},{default:$((()=>[_(a,{value:"ftp"},{default:$((()=>[T(w(e.$t("Site.DelSite.FTP")),1)])),_:1}),_(a,{value:"database"},{default:$((()=>[b("span",we,w(e.$t("Site.DelSite.Database")),1),De])),_:1}),_(a,{value:"path"},{default:$((()=>[T(w(e.$t("Site.TableRow.Root")),1)])),_:1})])),_:1})])),_:1},8,["value"])])]),b("div",Ce,[b("span",null,w(e.$t("Site.DelSite.Result"))+":",1),b("span",$e,w(j(k))+" + "+w(j(z)),1),Te,b("div",je,[_(p,{show:j(M),"onUpdate:show":t[2]||(t[2]=e=>P(M)?M.value=e:null),trigger:"manual",placement:"top-start","arrow-point-to-center":!0,style:E({"--n-color":j(u).errorColor,"--n-text-color":"#fff"})},{trigger:$((()=>[_(c,{ref_key:"inputRef",ref:S,value:j(R),"onUpdate:value":t[1]||(t[1]=e=>P(R)?R.value=e:null),size:"small","show-button":!1,placeholder:""},null,8,["value"])])),default:$((()=>[b("div",null,w(j(F)),1)])),_:1},8,["show","style"])])])])}}}))}}}));
