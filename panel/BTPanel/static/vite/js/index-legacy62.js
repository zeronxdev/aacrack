System.register(["./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1720690738171","./useTableData-legacy.js?v=1720690738171","./index-legacy.js?v=1720690738171","./useLoading-legacy.js?v=1720690738171","./useTableColumns-legacy.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./DataTable-legacy.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./Ellipsis-legacy.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./Tag-legacy.js?v=1720690738171","./Empty-legacy.js?v=1720690738171","./omit-legacy.js?v=1720690738171","./Skeleton-legacy.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./Progress-legacy.js?v=1720690738171"],(function(e,a){"use strict";var t,l,i,n,s,o,u,c,d,p,g,r,y,m,f,_,j,b,k,h,w,v,C,x,D,z,R;return{setters:[e=>{t=e._},e=>{l=e.a},e=>{i=e.u,n=e._},e=>{s=e.u,o=e.J,u=e.h,c=e.dm,d=e.dn,p=e.dp,g=e.dq,r=e.j,y=e.k,m=e.m,f=e.t,_=e.B},e=>{j=e.u},e=>{b=e.b},e=>{k=e.l,h=e.f,w=e.t,v=e.S,C=e.Z,x=e.P,D=e.V,z=e.q,R=e.W},null,null,null,null,null,null,null,null,null,null],execute:function(){const a={class:"p-20px"};e("default",k({__name:"index",props:{data:{}},setup(e){const k=e,{row:S}=k.data,T=s(),B=async()=>{await f(T.type,{id:S.id}),U(),T.setRefresh(!0)},L=h({p:1,limit:10,search:S.id}),{table:q,columns:E}=i([{key:"filename",title:"File name",ellipsis:{tooltip:{width:"trigger"}}},{key:"size",title:"File size",width:90,render:e=>o(e.size)},{key:"addtime",title:"Backup time",width:146},b({width:154,options:e=>[{label:"Repair",onClick:()=>{u({title:"Import Database",content:"Database will be overwritten, continue?",onConfirm:async({hide:a})=>{await c(T.type,{file:e.filename,name:S.name}),T.setRefresh(!0),a()}})}},{label:"Download",onClick:()=>{d(e.filename,e.name)}},{label:"Del",onClick:()=>{u({title:"Delete backup file",content:"Are you sure to delete backup file?",onConfirm:async({hide:a})=>{await p({id:e.id}),U(),T.setRefresh(!0),a()}})}}]})]),{loading:F,setLoading:P}=j(),U=async()=>{try{P(!0);const{message:e}=await g(w(L));r(e)?(q.data=y(e.data)?e.data:[],q.total=m(e.page)):(q.data=[],q.total=0),S.backup_count=q.total}finally{P(!1)}};return U(),(e,i)=>{const s=_,o=n,u=l,c=t;return v(),C("div",a,[x(c,null,{toolsLeft:D((()=>[x(s,{type:"primary",onClick:B},{default:D((()=>[z("Backup")])),_:1})])),table:D((()=>[x(o,{loading:R(F),"loading-num":6,data:R(q).data,columns:R(E)},null,8,["loading","data","columns"])])),pageRight:D((()=>[x(u,{page:R(L).p,"onUpdate:page":i[0]||(i[0]=e=>R(L).p=e),"page-size":R(L).limit,"onUpdate:pageSize":i[1]||(i[1]=e=>R(L).limit=e),"item-count":R(q).total,onRefresh:U},null,8,["page","page-size","item-count"])])),_:1})])}}}))}}}));
