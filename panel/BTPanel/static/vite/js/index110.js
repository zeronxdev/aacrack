import{_ as e}from"./index53.js?v=1720690738171";import{_ as t,a}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang10.js?v=1720690738171";import{_ as s}from"./index85.js?v=1720690738171";import{b as o}from"./check.js?v=1720690738171";import{bd as l}from"./site2.js?v=1720690738171";import{l as n,r as p,f as i,x as u,S as d,Z as m,P as h,V as _,_ as c,W as y,U as x,q as f}from"./vue.js?v=1720690738171";import{_ as v}from"./Select.js?v=1720690738171";import{a9 as g,G as b,cf as w}from"./index.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1720690738171";import"./InputGroupLabel.js?v=1720690738171";import"./InputGroup.js?v=1720690738171";import"./use-theme-vars.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./pinia.js?v=1720690738171";const j={class:"m-15px"},k={class:"w-440px"},U=c("p",null,"A domain per line, the default port is 80",-1),$=c("p",null,"Wildcard domain format: *.domain.com",-1),q=c("p",null,"To add another port, the format is www.domain.com:88",-1),L=c("li",null," Target: you can fill in the site you need to proxy, the target if you choose the URL address must be a normal access to the URL, if you choose UNIX must be a socket file ",-1),P=c("li",null," Send domain name: add the domain name to the request header to pass to the back-end server, the default is the target URL domain name, if not set properly may lead to the proxy can not be accessed properly, for example: ",-1),R=c("li",{class:"list-none!"}," http://192.168.100.20:19888, then just send the domain name keeping $http_host ",-1),T=c("li",{class:"list-none!"}," http://www.bt.cn, then the sending domain should be changed to www.bt.cn ",-1),E=c("li",{class:"list-none!"}," The above examples are only common cases, please refer to the actual situation ",-1),I=n({__name:"index",emits:["refresh"],setup(n,{expose:I,emit:S}){const G=S,C=()=>{"2"===D.proxy_type?D.proxy_host="$http_host":D.proxy_host=""},N=e=>{if("2"===D.proxy_type)return void(D.proxy_host="$http_host");let t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),D.proxy_host=t},W=p(null),A=[{label:"URL address",value:"1"},{label:"Unix address",value:"2"}],D=i({domains:"",proxy_type:"1",url:"http://",unx:"",proxy_host:"$http_host",remark:""}),H={domains:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(""===t.trim())return new Error("Please enter the domain name");const a=t.trim().split("\n")[0].split(":")[1];return!(a&&(!o(a)||Number(a)<100))||new Error("Port range is incorrect! should be between 100-65535")}},url:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(!t.replace(/^http[s]?:\/\//,""))return new Error("Please input the URL address");let a=t.replace(/^http[s]?:\/\//,"");return a=a.replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(a)?D.proxy_host="$http_host":D.proxy_host=a,!0}},unx:{required:!0,message:"Please select the website path",trigger:["blur","change"]},proxy_host:{required:!0,message:"Please select the website path",trigger:["blur","change"]}},V=e=>{const t=e.trim().split("\n")[0].split(":")[0];t&&(D.remark=t)};return u((()=>{})),I({onConfirm:async()=>{var e;await(null==(e=W.value)?void 0:e.validate());let t={remark:D.remark,proxy_type:"1"==D.proxy_type,proxy_pass:"1"==D.proxy_type?D.url:D.unx,domains:D.domains,proxy_host:D.proxy_host};await l(t),G("refresh")}}),(o,l)=>{const n=s,p=t,i=v,u=g,I=r,S=b,G=w,X=a,Z=e;return d(),m("div",j,[h(X,{ref_key:"formRef",ref:W,model:y(D),rules:H},{default:_((()=>[h(p,{label:"Domain name",path:"domains"},{default:_((()=>[c("div",k,[h(n,{value:y(D).domains,"onUpdate:value":[l[0]||(l[0]=e=>y(D).domains=e),V]},{default:_((()=>[U,$,q])),_:1},8,["value"])])])),_:1}),h(S,null,{default:_((()=>[h(p,{label:"Target"},{default:_((()=>[h(i,{value:y(D).proxy_type,"onUpdate:value":[l[1]||(l[1]=e=>y(D).proxy_type=e),C],options:A,class:"w-120px"},null,8,["value"])])),_:1}),"1"==y(D).proxy_type?(d(),x(p,{key:0,path:"url",class:"w-310px"},{default:_((()=>[h(u,{value:y(D).url,"onUpdate:value":l[2]||(l[2]=e=>y(D).url=e),onInput:N},null,8,["value"])])),_:1})):(d(),x(p,{key:1,path:"unx",class:"w-310px"},{default:_((()=>[h(I,{"checked-type":["dir","file"],value:y(D).unx,"onUpdate:value":l[3]||(l[3]=e=>y(D).unx=e),onChange:N},null,8,["value"])])),_:1}))])),_:1}),h(p,{label:"Send Host",path:"proxy_host",class:"w-570px"},{default:_((()=>[h(G,{trigger:"hover"},{trigger:_((()=>[h(u,{value:y(D).proxy_host,"onUpdate:value":l[4]||(l[4]=e=>y(D).proxy_host=e)},null,8,["value"])])),default:_((()=>[f(" The hostname when the request is forwarded to the back-end server, usually $http_host, if the target URL is a domain name, you need to change it to a domain name ")])),_:1})])),_:1}),h(p,{label:"remark",class:"w-570px"},{default:_((()=>[h(u,{value:y(D).remark,"onUpdate:value":l[5]||(l[5]=e=>y(D).remark=e),placeholder:"Please enter a comment to be empty"},null,8,["value"])])),_:1})])),_:1},8,["model"]),h(Z,{class:"mt-16px"},{default:_((()=>[L,P,R,T,E])),_:1})])}}});export{I as default};
