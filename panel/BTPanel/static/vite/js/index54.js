import{_ as e}from"./index53.js?v=1720690738171";import{_ as a,a as l}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import{u as s,dy as t,a9 as d,cC as i,n as r}from"./index.js?v=1720690738171";import{l as u,r as n,f as o,S as v,Z as p,P as m,V as b,_ as f,W as _,q as c,t as x}from"./vue.js?v=1720690738171";import{_ as D}from"./Select.js?v=1720690738171";import{_ as B}from"./InputGroupLabel.js?v=1720690738171";import{_ as y}from"./InputGroup.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";const w={class:"py-20px"},h={class:"w-260px"},j={class:"w-260px"},g={class:"w-260px"},P={class:"w-260px"},I=f("li",null,"A validity period of 0 means permanent",-1),R=u({__name:"index",props:{data:{}},setup(u,{expose:R}){const k=u,{row:U,sid:q,dbIdx:E,isEdit:A}=k.data,C=s(),G=n(null),S=o({db_idx:0,name:"",val:"",endtime:void 0}),T=n([{label:"DB0",value:0},{label:"DB1",value:1},{label:"DB2",value:2},{label:"DB3",value:3},{label:"DB4",value:4},{label:"DB5",value:5},{label:"DB6",value:6},{label:"DB7",value:7},{label:"DB8",value:8},{label:"DB9",value:9},{label:"DB10",value:10},{label:"DB11",value:11},{label:"DB12",value:12},{label:"DB13",value:13},{label:"DB14",value:14},{label:"DB15",value:15}]),V={name:{required:!0,message:"Please enter key",trigger:"blur"},val:{required:!0,message:"Please enter value",trigger:"blur"}};return S.db_idx=E,A&&U&&(S.name=U.name,S.val=U.val,S.endtime=U.endtime?U.endtime:void 0),R({onConfirm:async({hide:e})=>{var a;try{await(null==(a=G.value)?void 0:a.validate());const l=(()=>{if(null===q)throw r.error("Please select remote database!"),new Error("sid is null");const e={...x(S),sid:q};return void 0===e.endtime&&delete e.endtime,e})();await t(l),C.setRefresh(!0),C.setAddRedisId(l.db_idx),e()}catch(l){console.error(l)}}}),(s,t)=>{const r=D,u=a,n=d,o=i,x=B,R=y,k=l,U=e;return v(),p("div",w,[m(k,{ref_key:"formRef",ref:G,model:_(S),rules:V},{default:b((()=>[m(u,{label:"Database",path:"db_idx"},{default:b((()=>[f("div",h,[m(r,{value:_(S).db_idx,"onUpdate:value":t[0]||(t[0]=e=>_(S).db_idx=e),options:_(T),disabled:_(A)},null,8,["value","options","disabled"])])])),_:1}),m(u,{label:"Key",path:"name"},{default:b((()=>[f("div",j,[m(n,{value:_(S).name,"onUpdate:value":t[1]||(t[1]=e=>_(S).name=e),disabled:_(A),placeholder:"Please enter key"},null,8,["value","disabled"])])])),_:1}),m(u,{label:"Value",path:"val"},{default:b((()=>[f("div",g,[m(n,{value:_(S).val,"onUpdate:value":t[2]||(t[2]=e=>_(S).val=e),type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"Please enter value"},null,8,["value"])])])),_:1}),m(u,{label:"Term of validity","show-feedback":!1},{default:b((()=>[f("div",P,[m(R,null,{default:b((()=>[m(o,{value:_(S).endtime,"onUpdate:value":t[3]||(t[3]=e=>_(S).endtime=e),class:"flex-1",min:0,"show-button":!1,placeholder:"If it is empty, it never expires"},null,8,["value"]),m(x,null,{default:b((()=>[c("sec")])),_:1})])),_:1})])])),_:1})])),_:1},8,["model"]),m(U,{class:"mt-24px px-20px"},{default:b((()=>[I])),_:1})])}}});export{R as default};
