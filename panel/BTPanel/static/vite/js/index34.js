const __vite__fileDeps=["js/index102.js?v=1720690738171","js/index.js?v=1720690738171","js/vue.js?v=1720690738171","js/pinia.js?v=1720690738171","css/index29.css?v=1720690738171","js/site2.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang12.js?v=1720690738171","js/Progress.js?v=1720690738171","js/DataTable.js?v=1720690738171","js/Checkbox.js?v=1720690738171","js/Ellipsis.js?v=1720690738171","js/Select.js?v=1720690738171","js/Tag.js?v=1720690738171","js/Empty.js?v=1720690738171","js/omit.js?v=1720690738171","js/file2.js?v=1720690738171","js/use-theme-vars.js?v=1720690738171","css/index26.css?v=1720690738171","js/index103.js?v=1720690738171","js/index112.js?v=1720690738171","js/Spin.js?v=1720690738171","css/index13.css?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang.js?v=1720690738171","js/useTableColumns.js?v=1720690738171","css/useTableColumns.css?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang2.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171","js/useTableData.js?v=1720690738171","js/Skeleton.js?v=1720690738171","js/useLoading.js?v=1720690738171","js/set.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171","js/index104.js?v=1720690738171","js/index57.js?v=1720690738171","js/Tabs.js?v=1720690738171","css/index9.css?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang10.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang7.js?v=1720690738171","js/InputGroupLabel.js?v=1720690738171","js/InputGroup.js?v=1720690738171","js/index85.js?v=1720690738171","css/index10.css?v=1720690738171","js/check.js?v=1720690738171","js/useAccount.js?v=1720690738171","css/index24.css?v=1720690738171","js/index105.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang11.js?v=1720690738171","js/index106.js?v=1720690738171","js/index53.js?v=1720690738171","js/index107.js?v=1720690738171","js/index108.js?v=1720690738171","js/index111.js?v=1720690738171","css/index12.css?v=1720690738171","js/index49.js?v=1720690738171","css/index8.css?v=1720690738171","js/form.vue_vue_type_script_setup_true_lang.js?v=1720690738171","js/php.js?v=1720690738171","js/Space.js?v=1720690738171","css/index25.css?v=1720690738171","js/batch.js?v=1720690738171","js/DatePicker.js?v=1720690738171","js/index47.js?v=1720690738171","js/data.js?v=1720690738171","css/index7.css?v=1720690738171","js/site.js?v=1720690738171","js/ButtonGroup.js?v=1720690738171","js/batch2.js?v=1720690738171","js/batch3.js?v=1720690738171"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{cs as e,ct as t,cu as a,e as i,B as n,b3 as o,a as s,H as l,v as r,j as d,g as u,k as c,q as p,cv as m,h as _,m as h,r as w}from"./index.js?v=1720690738171";import{_ as f}from"./index49.js?v=1720690738171";import{_ as P}from"./index.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import{_ as b,a as y}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1720690738171";import{_ as v}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171";import{u as g,_ as k}from"./useTableData.js?v=1720690738171";import{_ as x}from"./index47.js?v=1720690738171";import{s as S}from"./pinia.js?v=1720690738171";import{o as H,l as j}from"./site.js?v=1720690738171";import{c as C,g as D,e as E,a as O}from"./useAccount.js?v=1720690738171";import{u as T}from"./useLoading.js?v=1720690738171";import{c as R,i as B,u as L,a as U,b as I}from"./useTableColumns.js?v=1720690738171";import{s as A,g as V,a as $,b as W,c as M,d as z}from"./site2.js?v=1720690738171";import{l as N,d as K,r as q,k as G,S as Z,U as F,V as J,P as Q,q as X,a3 as Y,W as ee,_ as te,b as ae,a1 as ie,ae as ne,ad as oe,s as se,ao as le,Z as re,f as de,w as ue,af as ce,t as pe,n as me}from"./vue.js?v=1720690738171";import{_ as _e}from"./Select.js?v=1720690738171";import{N as he}from"./ButtonGroup.js?v=1720690738171";import{_ as we}from"./DatePicker.js?v=1720690738171";function fe(a,i){const n=e(a);return isNaN(i)?t(a,NaN):i?(n.setDate(n.getDate()+i),n):n}function Pe(t,a){return+e(t)<+e(a)}const be={class:"flex justify-end"},ye=s(N({__name:"index",props:{row:{}},setup(e){const t=K(e,"row"),s=q(null),l=q(null),r=new Date;r.setHours(0,0,0,0);const d=G((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&Pe(e,r)})),u=G((()=>{const e=new Date(t.value.edate);return"0000-00-00"!==t.value.edate&&Pe(e,fe(r,7))})),c=e=>Pe(e,fe(r,1)),p=()=>{s.value="0000-00-00"===t.value.edate?null:new Date(t.value.edate).getTime()},m=async()=>{var e;await A({id:t.value.id,edate:"0000-00-00"}),t.value.edate="0000-00-00",null==(e=l.value)||e.setShow(!1)},_=async()=>{var e;if(null===s.value)return;const i=a(s.value,"yyyy-MM-dd");await A({id:t.value.id,edate:i}),t.value.edate=i,null==(e=l.value)||e.setShow(!1)};return(e,a)=>{const r=i,h=n,w=he,f=we,P=o;return Z(),F(P,{ref_key:"popoverRef",ref:l,placement:"bottom",trigger:"click"},{trigger:J((()=>[Q(r,{type:ee(d)?"error":ee(u)?"warning":"primary",onClick:p},{default:J((()=>[X(Y("0000-00-00"===ee(t).edate?e.$t("Site.PHP.index_34"):ee(d)?e.$t("Site.PHP.index_28"):ee(t).edate),1)])),_:1},8,["type"])])),default:J((()=>[Q(f,{value:ee(s),"onUpdate:value":a[0]||(a[0]=e=>ae(s)?s.value=e:null),type:"date",panel:!0,actions:null,"is-date-disabled":c},{footer:J((()=>[te("div",be,[Q(w,{size:"small"},{default:J((()=>[Q(h,{onClick:m},{default:J((()=>[X(Y(e.$t("Site.PHP.index_34")),1)])),_:1}),Q(h,{disabled:null===ee(s),onClick:_},{default:J((()=>[X(Y(e.$t("Public.Btn.Confirm")),1)])),_:1},8,["disabled"])])),_:1})])])),_:1},8,["value"])])),_:1},512)}}}),[["__scopeId","data-v-0f7e7fa2"]]);function ve(e){l({title:1===e.length?"Delete site [".concat(e[0].name,"]"):"Deleting sites in batches",width:480,minHeight:248,footer:!0,data:{rows:e},component:ie((()=>r((()=>import("./index102.js?v=1720690738171")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))))})}const ge=N({functional:!0,props:{path:{type:String,default:"",required:!0}},setup(e){const t=ne();return{goPath:()=>{R("Path",e.path),t.push("/files")}}},render(){return Q("a",{class:"text-primary hover:text-primary-hover",href:"javascript:;",onClick:()=>{this.goPath()}},[this.path])}});const ke=({row:e})=>Q(i,null,{default:()=>[e.name]}),xe=({row:e})=>Q(B,{value:e.status},null),Se=({row:e})=>{const{t:t}=oe();return Q(i,{type:e.backup_count>0?"primary":"warning",onClick:()=>{l({title:t("Site.PHP.index_33",[e.name]),width:720,minHeight:200,data:{row:e},component:ie((()=>r((()=>import("./index103.js?v=1720690738171")),__vite__mapDeps([18,1,2,3,4,19,20,21,22,23,7,24,25,8,9,10,11,12,13,14,26,27,28,29,5]))))})}},{default:()=>[e.backup_count>0?t("Site.PHP.index_31",[e.backup_count]):t("Site.PHP.index_32")]})},He=({row:e})=>Q(ge,{path:e.path},null),je=({row:e})=>Q(i,null,{default:()=>[e.php_version]}),Ce=({row:e})=>{let t;const{t:a}=oe(),{ssl:n}=e;return d(n)?Q(i,{type:n.endtime<0?"error":"primary"},{default:()=>[n.endtime<0?a("Site.PHP.index_28"):a("Site.PHP.index_29",[n.endtime])]}):Q(i,{type:"warning"},"function"==typeof(o=t=a("Site.PHP.index_30"))||"[object Object]"===Object.prototype.toString.call(o)&&!se(o)?t:{default:()=>[t]});var o},De=({row:e})=>Q(i,{type:e.attack>0?"error":"primary"},{default:()=>[e.attack]}),Ee={class:"w-150px"},Oe=N({__name:"index",props:{value:{default:null}},setup(e){const t=ie((()=>r((()=>import("./set.js?v=1720690738171")),__vite__mapDeps([30,1,2,3,4,31,5,23,7,24,27,28,8,9,10,11,12,13,14])))),a=le(e,"value"),{loading:i,setLoading:o}=T(),s=q([]),l=u("Site category manager",{setOptions:(e,t)=>{t===a.value&&(a.value=-1),s.value=e.map((e=>({label:e.name,value:e.id}))),m()}}),d=()=>{l.show=!0},m=()=>{s.value.unshift({label:"Category manager",value:-1})};return m(),(async()=>{try{o(!0);const{message:e}=await V();c(e)?s.value=e.map((e=>({label:e.name,value:e.id}))):s.value=[],m()}finally{o(!1)}})(),(e,o)=>{const r=n,u=_e,c=p;return Z(),re("div",Ee,[Q(u,{value:ee(a),"onUpdate:value":o[0]||(o[0]=e=>ae(a)?a.value=e:null),loading:ee(i),options:ee(s)},{action:J((()=>[Q(r,{block:"",onClick:d},{default:J((()=>[X("Category set")])),_:1})])),_:1},8,["value","loading","options"]),Q(c,{show:ee(l).show,"onUpdate:show":o[1]||(o[1]=e=>ee(l).show=e),width:350,title:ee(l).title,data:ee(l).data,component:ee(t)},null,8,["show","title","data","component"])])}}}),Te=te("span",{class:"mx-4px"},"|",-1),Re=N({__name:"index",setup(e){const t=ie((()=>r((()=>import("./index104.js?v=1720690738171")),__vite__mapDeps([32,33,34,2,1,3,4,14,35,31,36,37,38,39,40,16,41,42,5,43,11,12,13,29,8,9,10,44])))),a=ie((()=>r((()=>import("./index105.js?v=1720690738171")),__vite__mapDeps([45,33,34,2,1,3,4,14,35,46,29,15,11,12,13,20])))),o=ie((()=>r((()=>import("./index106.js?v=1720690738171")),__vite__mapDeps([47,48,1,2,3,4,31,5,29,11,12,13])))),s=ie((()=>r((()=>import("./index107.js?v=1720690738171")),__vite__mapDeps([49,48,1,2,3,4,31,5,29,11,12,13])))),R=ie((()=>r((()=>import("./index108.js?v=1720690738171").then((e=>e.i))),__vite__mapDeps([50,1,2,3,4,51,34,14,10,52,22,23,7,24,26,9,11,12,13,27,28,8,40,16,41,5,29,31,36,37,38,39,33,35,48,46,15,20,53,54,55,43,56,57,19,21,58])))),{t:B}=oe(),A=m(),{web:V,webserver:N}=S(A),K=q(!1),G=u(B("Site.PHP.index_9")),ne=()=>{G.show=!0},se=u(B("Site.PHP.index_10")),le=()=>{se.show=!0},re=u(B("Site.PHP.index_11")),_e=()=>{re.show=!0},he=u(B("Site.PHP.index_12")),we=()=>{he.show=!0},fe=de({show:!1,title:"",data:{siteInfo:null,config:{menu:"",subMenu:""}}}),Pe=(e,t={})=>{fe.title=B("Site.PHP.index_13",[e.name,e.addtime]),fe.data.siteInfo=e,fe.data.config=Object.assign({menu:"",subMenu:""},t),fe.show=!0},be=()=>I({title:B("Public.Table.Operation"),width:150,options:e=>[{label:B("Site.PHP.index_14"),onClick:()=>{(async()=>{await C({source:142}),await D("monitor"),E({name:"monitor",title:"Website statistics-v2",admin:!0})})()}},{label:B("Site.PHP.index_15"),show:"nginx"===A.webserver||"apache"===A.webserver,onClick:()=>{H(e.name)}},{label:B("Site.PHP.index_16"),onClick:()=>{Pe(e)}},{label:B("Public.Btn.Del"),onClick:()=>{ve([e])}}]}),{keys:ge,table:Ee,columns:Re}=g([{type:"selection",width:40},{key:"rname",title:B("Site.PHP.index_17"),width:"12%",minWidth:130,sorter:!0,sortOrder:!1,render:e=>Q(ke,{row:e,onClick:()=>{Pe(e)}},null)},{key:"status",title:B("Public.Table.Status"),width:"8%",minWidth:90,sorter:!0,sortOrder:!1,render:e=>Q(xe,{row:e,onClick:t=>{_({title:"".concat(B("1"===t?"Site.PHP.index_21.1":"Site.PHP.index_21.2")," ").concat(B("Site.PHP.index_21.0",[e.name])),content:B("1"===t?"Site.PHP.index_22":"Site.PHP.index_23"),onConfirm:async()=>{await $("1"===t,{id:e.id,name:e.name}),e.status=t}})}},null)},{key:"backup_count",title:B("Site.PHP.index_19"),width:"6%",minWidth:70,render:e=>Q(Se,{row:e},null)},{key:"path",title:B("Site.PHP.index_20"),minWidth:130,ellipsis:{tooltip:!0},render:e=>Q(He,{row:e},null)},L({type:"site",width:"6%",minWidth:70,callback:()=>{Ve()}}),{key:"edate",title:B("Site.PHP.index_25"),width:"8%",minWidth:96,render:e=>Q(ye,{row:e},null)},U({width:"8%",onBlur:async(e,t)=>{await z({id:t.id,ps:e})}}),{key:"php_version",title:B("Site.PHP.index_26"),width:"6%",minWidth:70,render:e=>Q(je,{row:e,onClick:()=>{Pe(e,{menu:"php"})}},null)},{key:"site_ssl",title:B("Site.PHP.index_27"),width:"9%",minWidth:110,sorter:!0,sortOrder:!1,render:e=>Q(Ce,{row:e,onClick:()=>{Pe(e,{menu:"ssl"})}},null)},{key:"attack",title:B("Site.PHP.index_24"),width:"6%",minWidth:60,render:e=>Q(De,{row:e,onClick:()=>{Pe(e,{menu:"logs",subMenu:"security"})}},null)},be()]),Be=e=>{Re.value.forEach((t=>{const a=t;a.key===e.columnKey?a.sortOrder=e.order:a.sortOrder=void 0})),e.order?Ue.order="".concat(e.columnKey," ").concat("descend"===e.order?"desc":"asc"):Ue.order="",Ve()},Le=[{key:"enable",type:"confirm",label:"Enable website",confirm:{title:"Batch enable website",desc:"Please be cautious, The selected item will be [Enable website] after confirmation",columns:[Re.value[1]],api:e=>$(!0,{id:e.id,name:e.name},!1),done:()=>{Ve()}}},{key:"disable",type:"confirm",label:"Disable website",confirm:{title:"Batch disable website",desc:"Please be cautious, The selected item will be [Disable website] after confirmation",columns:[Re.value[1]],api:e=>$(!1,{id:e.id,name:e.name},!1),done:()=>{Ve()}}},{key:"backup",type:"confirm",label:"Backup website",confirm:{title:"Batch backup website",desc:"Please be cautious, The selected item will be [Backup website] after confirmation",columns:[Re.value[1]],api:e=>W({id:e.id},!1),done:()=>{Ve()}}},{key:"expired",label:"Set expired date",onBatch:e=>{l({title:"Batch set expired date",width:380,minHeight:72,footer:!0,data:{rows:e},component:ie((()=>r((()=>import("./batch.js?v=1720690738171")),__vite__mapDeps([59,31,2,1,3,4,5,6,7,8,9,10,11,12,13,14,60,53,54,22,23,24,25,26,27,28,61,62,56,29,43,63,64,65]))))})}},{key:"php",label:"Set php version",onBatch:e=>{l({title:"Batch set php version",width:500,minHeight:198,footer:!0,data:{rows:e},component:ie((()=>r((()=>import("./batch2.js?v=1720690738171")),__vite__mapDeps([66,48,1,2,3,4,31,29,5,6,7,8,9,10,11,12,13,14]))))})}},{key:"category",label:"Set category",onBatch:e=>{l({title:"Batch set category",width:350,minHeight:72,footer:!0,data:{rows:e},component:ie((()=>r((()=>import("./batch3.js?v=1720690738171")),__vite__mapDeps([67,31,2,1,3,4,29,5,11,12,13]))))})}},{key:"delete",label:"Delete website",onBatch:e=>{ve(e)}}],Ue=de({p:1,limit:10,table:"sites",search:"",order:"",type:-1}),{loading:Ie,setLoading:Ae}=T(!0),Ve=async()=>{try{Ae(!0);const e=(()=>{const e=pe(Ue);return{...e,type:e.type?e.type:-1}})(),{message:t}=await M(e);d(t)?(Ee.data=c(t.data)?t.data:[],Ee.total=h(t.page)):(Ee.data=[],Ee.total=0)}finally{ge.value=[],Ae(!1)}};ue((()=>A.isRefresh),(e=>{e&&(A.setRefresh(!1),Ve())}));return(async()=>{try{await A.getConfig(),Ae(!1),await me(),Re.value[Re.value.length-1]=be(),Ae(!0),A.web.setup?(K.value=!0,Ve()):(K.value=!1,Ae(!1),j())}catch(e){Ae(!1)}})(),(e,l)=>{const r=i,d=n,u=x,c=b,m=k,_=v,h=y,g=P,S=p,H=f,j=w;return Z(),F(j,null,{default:J((()=>[Q(H,{install:ee(V).setup},{desc:J((()=>[te("span",null,Y(e.$t("Site.PHP.index_1")),1),Q(r,{class:"ml-4px",onClick:l[0]||(l[0]=e=>ee(O)("nginx"))},{default:J((()=>[X(Y(e.$t("Site.PHP.index_2")),1)])),_:1}),Te,Q(r,{onClick:l[1]||(l[1]=e=>ee(O)("apache"))},{default:J((()=>[X(Y(e.$t("Site.PHP.index_3")),1)])),_:1})])),default:J((()=>[Q(g,{class:"p-16px",feedback:!0},{toolsLeft:J((()=>[Q(d,{type:"primary",onClick:ne},{default:J((()=>[X(Y(e.$t("Site.PHP.index_4")),1)])),_:1}),Q(d,{onClick:le},{default:J((()=>[X(Y(e.$t("Site.PHP.index_5")),1)])),_:1}),Q(d,{onClick:_e},{default:J((()=>[X(Y(e.$t("Site.PHP.index_6")),1)])),_:1}),Q(d,{onClick:we},{default:J((()=>[X(Y(e.$t("Site.PHP.index_7")),1)])),_:1}),ee(K)?(Z(),F(u,{key:0,"soft-name":ee(N)},null,8,["soft-name"])):ce("",!0)])),toolsRight:J((()=>[Q(Oe,{value:ee(Ue).type,"onUpdate:value":[l[2]||(l[2]=e=>ee(Ue).type=e),Ve]},null,8,["value"]),Q(c,{value:ee(Ue).search,"onUpdate:value":l[3]||(l[3]=e=>ee(Ue).search=e),placeholder:e.$t("Site.PHP.index_8"),onSearch:Ve},null,8,["value","placeholder"])])),table:J((()=>[Q(m,{"checked-row-keys":ee(ge),"onUpdate:checkedRowKeys":l[4]||(l[4]=e=>ae(ge)?ge.value=e:null),loading:ee(Ie),data:ee(Ee).data,columns:ee(Re),"onUpdate:sorter":Be},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:J((()=>[Q(_,{"checked-row-keys":ee(ge),"onUpdate:checkedRowKeys":l[5]||(l[5]=e=>ae(ge)?ge.value=e:null),data:ee(Ee).data,options:Le},null,8,["checked-row-keys","data"])])),pageRight:J((()=>[Q(h,{page:ee(Ue).p,"onUpdate:page":l[6]||(l[6]=e=>ee(Ue).p=e),"page-size":ee(Ue).limit,"onUpdate:pageSize":l[7]||(l[7]=e=>ee(Ue).limit=e),"item-count":ee(Ee).total,"store-key":"site-php-page",onRefresh:Ve},null,8,["page","page-size","item-count"])])),_:1}),Q(S,{show:ee(G).show,"onUpdate:show":l[8]||(l[8]=e=>ee(G).show=e),title:ee(G).title,width:640,height:540,footer:!0,component:ee(t)},null,8,["show","title","component"]),Q(S,{show:ee(se).show,"onUpdate:show":l[9]||(l[9]=e=>ee(se).show=e),title:ee(se).title,width:820,"min-height":608,component:ee(a)},null,8,["show","title","component"]),Q(S,{show:ee(re).show,"onUpdate:show":l[10]||(l[10]=e=>ee(re).show=e),title:ee(re).title,width:560,footer:!0,component:ee(o)},null,8,["show","title","component"]),Q(S,{show:ee(he).show,"onUpdate:show":l[11]||(l[11]=e=>ee(he).show=e),title:ee(he).title,width:560,"min-height":148,footer:!0,component:ee(s)},null,8,["show","title","component"]),Q(S,{show:ee(fe).show,"onUpdate:show":l[12]||(l[12]=e=>ee(fe).show=e),title:ee(fe).title,data:ee(fe).data,width:860,height:700,component:ee(R)},null,8,["show","title","data","component"])])),_:1},8,["install"])])),_:1})}}}),Be=Object.freeze(Object.defineProperty({__proto__:null,default:Re},Symbol.toStringTag,{value:"Module"}));export{fe as a,Be as b,Pe as i};
