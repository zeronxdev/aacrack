System.register(["./index-legacy.js?v=1720690738171","./index-legacy49.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1720690738171","./useTableData-legacy.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./site-legacy.js?v=1720690738171","./useAccount-legacy.js?v=1720690738171","./useLoading-legacy.js?v=1720690738171","./useTableColumns-legacy.js?v=1720690738171","./site-legacy2.js?v=1720690738171","./index-legacy111.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./index-legacy85.js?v=1720690738171","./index-legacy57.js?v=1720690738171","./index-legacy53.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy11.js?v=1720690738171","./index-legacy50.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./Space-legacy.js?v=1720690738171","./index-legacy112.js?v=1720690738171","./Spin-legacy.js?v=1720690738171"],(function(e,t){"use strict";var a,l,n,i,o,s,r,u,p,d,c,h,m,y,_,v,f,g,w,x,b,k,C,U,P,L,R,V,T,j,$,I,S,z,A,N,q,D,E,B,K,W,M,H,O,F,X,G,J,Q,Z,Y,ee,te,ae,le,ne,ie,oe,se,re,ue,pe,de,ce,he,me,ye,_e,ve,fe,ge,we,xe,be,ke,Ce,Ue,Pe,Le,Re,Ve,Te,je,$e,Ie,Se,ze,Ae,Ne,qe,De,Ee,Be,Ke,We,Me,He,Oe,Fe,Xe,Ge,Je,Qe,Ze,Ye,et,tt,at,lt,nt,it,ot,st,rt,ut,pt,dt,ct,ht,mt;return{setters:[e=>{a=e.j,l=e.e,n=e.h,i=e.n,o=e.k,s=e.B,r=e.cB,u=e.a9,p=e.g,d=e.q,c=e.ci,h=e.cC,m=e.G,y=e.p,_=e.cf,v=e.v,f=e.H,g=e.cv,w=e.m,x=e.r},e=>{b=e._},e=>{k=e._},e=>{C=e._,U=e.a},e=>{P=e._},e=>{L=e.u,R=e._},e=>{V=e.s},e=>{T=e.o,j=e.l},e=>{$=e.c,I=e.g,S=e.e,z=e.a},e=>{A=e.u},e=>{N=e.B,q=e.b,D=e._,E=e.i,B=e.a},e=>{K=e.e,W=e.f,M=e.h,H=e.i,O=e.j,F=e.k,X=e.l,G=e.m,J=e.n,Q=e.o,Z=e.p,Y=e.q,ee=e.r,te=e.t,ae=e.u,le=e.v,ne=e.w,ie=e.x,oe=e.y,se=e.z,re=e.A,ue=e.B,pe=e.C,de=e.D,ce=e.E,he=e.F,me=e.G,ye=e.H,_e=e.I,ve=e.J,fe=e.K,ge=e.L,we=e.M,xe=e.N,be=e.O,ke=e.P,Ce=e.Q,Ue=e.R,Pe=e.S,Le=e.T,Re=e.U},e=>{Ve=e._},e=>{Te=e.A,je=e.a,$e=e.P,Ie=e.q,Se=e.l,ze=e.r,Ae=e.S,Ne=e.Z,qe=e._,De=e.V,Ee=e.W,Be=e.b,Ke=e.f,We=e.t,Me=e.af,He=e.F,Oe=e.U,Fe=e.x,Xe=e.L,Ge=e.a3,Je=e.n,Qe=e.a1,Ze=e.w},e=>{Ye=e._},e=>{et=e._},e=>{tt=e._},e=>{at=e._,lt=e.a,nt=e.b},e=>{it=e._},e=>{ot=e._},e=>{st=e._},e=>{rt=e.u},e=>{ut=e._},e=>{pt=e._,dt=e.a},e=>{ct=e._},e=>{ht=e._},e=>{mt=e._}],execute:function(){e("u",ft);const yt=Symbol("server-list");async function _t(e){const{message:t}=await K({site_name:e});if(a(t))return t}async function vt(e,t){const{message:l}=await W({site_name:e,proxy_path:t});if(a(l))return l}function ft(){return je(yt)}function gt({delDomain:e}){return{key:"action",title:"OPT",width:80,align:"right",render:t=>$e(N,{options:[{label:"Del",onClick:()=>{n({title:`Delete domain [${t.name}]`,content:"Are you sure to delete this domain name?",onConfirm:async({hide:a})=>{await e(t),a()}})}}]},null)}}const wt={class:"flex justify-between items-center mb-24px"},xt={class:"w-400px"},bt=qe("p",null,"A domain per line, the default port is 80",-1),kt=qe("p",null,"Wildcard domain format: *.domain.com",-1),Ct=qe("p",null,"To add another port, the format is www.domain.com:88",-1),Ut={class:"pr-40px"},Pt=Se({__name:"index",setup(e,{expose:t}){const{data:n}=ft(),r=ze(""),u=async()=>{""!==r.value.trim()?(await M({id:n.id,site_name:n.name,domains:r.value.trim().split("\n").join(",")}),r.value="",f()):i.error("Domain name cannot be empty")},p=async e=>{await H({id:n.id,site_name:n.name,domain:e.name,port:e.port}),f()},{keys:d,table:c,columns:h}=L([{type:"selection",width:40},{key:"name",title:"Domain name",render:e=>$e(l,{href:`http://${e.name}:${e.port}`,target:"_blank"},{default:()=>[e.name]})},{key:"port",title:"Port",width:100},gt({delDomain:p})]),m=()=>{c.data.length>1?h.value[h.value.length-1]=gt({delDomain:p}):h.value[h.value.length-1]={key:"action",title:"OPT",width:80,align:"right",render:()=>$e("span",{class:"text-default"},[Ie("Inoperable")])}},y=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete",desc:"Please be cautious, The selected item will be [delete] after confirmation",api:e=>H({id:n.id,site_name:n.name,domain:e.name,port:e.port},!1),done:()=>{f()},columns:[{key:"name",title:"Domain name",ellipsis:{tooltip:{width:"trigger"}}}]}}],{loading:_,setLoading:v}=A(),f=async()=>{try{v(!0);const e={id:n.id,site_name:n.name},{message:t}=await O(e);a(t)&&(c.data=o(t.domain_list)?t.domain_list:[],m())}catch(e){i.error("Failed to get")}finally{d.value=[],v(!1)}};return f(),t({init:f}),(e,t)=>{const a=Ye,l=s,n=R,i=P,o=k;return Ae(),Ne("div",null,[qe("div",wt,[qe("div",xt,[$e(a,{value:Ee(r),"onUpdate:value":t[0]||(t[0]=e=>Be(r)?r.value=e:null)},{default:De((()=>[bt,kt,Ct])),_:1},8,["value"])]),qe("div",Ut,[$e(l,{type:"primary",onClick:u},{default:De((()=>[Ie("Add")])),_:1})])]),$e(o,null,{table:De((()=>[$e(n,{"checked-row-keys":Ee(d),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Be(d)?d.value=e:null),loading:Ee(_),"max-height":400,data:Ee(c).data,columns:Ee(h)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:De((()=>[$e(i,{"checked-row-keys":Ee(d),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>Be(d)?d.value=e:null),data:Ee(c).data,options:y},null,8,["checked-row-keys","data"])])),_:1})])}}}),Lt={class:"p-20px"},Rt={class:"w-280px"},Vt=qe("li",null,"Line by line configuration, multiple IPs please line feed",-1),Tt=Se({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=r(),{siteName:l}=V(a),n=e,{getList:i}=n.data,o=ze(null),s=Ke({name:""}),p={name:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(o.value?.validate()),await F({site_name:l.value,ip_type:"white",ips:s.name}),i?.(),e()}}),(e,t)=>{const a=u,l=at,n=lt,i=tt;return Ae(),Ne("div",Lt,[$e(n,{ref_key:"formRef",ref:o,model:Ee(s),rules:p},{default:De((()=>[$e(l,{label:"IP",path:"name"},{default:De((()=>[qe("div",Rt,[$e(a,{type:"textarea",value:Ee(s).name,"onUpdate:value":t[0]||(t[0]=e=>Ee(s).name=e),placeholder:"Please enter the ip address"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),$e(i,{class:"mt-4px"},{default:De((()=>[Vt])),_:1})])}}}),jt=Se({__name:"index",setup(e,{expose:t}){const{loading:l,setLoading:i}=A(),o=r(),{siteName:u}=V(o),c=async()=>{try{i(!0);const e=await _t(u.value);a(e)&&(m.data=e.ip_limit.ip_white.map((e=>({ip:e}))))}finally{h.value=[],i(!1)}};c(),t({init:c});const{keys:h,table:m,columns:y}=L([{type:"selection",width:40},{key:"ip",title:"IP",ellipsis:{tooltip:{width:"trigger"}}},q({width:130,options:e=>[{label:"Del",onClick:()=>{n({title:`Delete [${e.ip}]`,content:"Are you sure to delete this IP?",onConfirm:async({hide:t})=>{await X({site_name:u.value,ip_type:"white",ip:e.ip}),c(),t()}})}}]})]),_=[{key:"del",label:"Please choose del",onBatch:e=>{n({title:"Batch delete",content:"Please be cautious, The selected item will be [delete] after confirmation",onConfirm:async({hide:t})=>{await G({site_name:u.value,ip_type:"white",ips:e.map((e=>e.ip)).join("\n")}),c(),t()}})}}],v=()=>{f.title="Add IP White List",f.show=!0},f=p("Add IP White List",{getList:c});return(e,t)=>{const a=s,n=R,i=P,o=k,r=d;return Ae(),Ne("div",null,[$e(o,null,{toolsLeft:De((()=>[$e(a,{type:"primary",onClick:v},{default:De((()=>[Ie("Add IP White List")])),_:1})])),table:De((()=>[$e(n,{"checked-row-keys":Ee(h),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Be(h)?h.value=e:null),"row-key":"ip",loading:Ee(l),"max-height":440,data:Ee(m).data,columns:Ee(y)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:De((()=>[$e(i,{"checked-row-keys":Ee(h),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Be(h)?h.value=e:null),"row-key":"ip",data:Ee(m).data,options:_},null,8,["checked-row-keys","data"])])),_:1}),$e(r,{show:Ee(f).show,"onUpdate:show":t[2]||(t[2]=e=>Ee(f).show=e),title:Ee(f).title,data:Ee(f).data,width:480,footer:!0,component:Tt},null,8,["show","title","data"])])}}}),$t={class:"p-20px"},It={class:"w-280px"},St=qe("li",null,"Line by line configuration, multiple IPs please line feed",-1),zt=Se({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=r(),{siteName:l}=V(a),n=e,{getList:i}=n.data,o=ze(null),s=Ke({name:""}),p={name:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(o.value?.validate()),await F({site_name:l.value,ip_type:"black",ips:s.name}),i?.(),e()}}),(e,t)=>{const a=u,l=at,n=lt,i=tt;return Ae(),Ne("div",$t,[$e(n,{ref_key:"formRef",ref:o,model:Ee(s),rules:p},{default:De((()=>[$e(l,{label:"IP",path:"name"},{default:De((()=>[qe("div",It,[$e(a,{type:"textarea",value:Ee(s).name,"onUpdate:value":t[0]||(t[0]=e=>Ee(s).name=e),placeholder:"Please enter the ip address"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),$e(i,{class:"mt-4px"},{default:De((()=>[St])),_:1})])}}}),At=Se({__name:"index",setup(e,{expose:t}){const{loading:l,setLoading:i}=A(),o=r(),{siteName:u}=V(o),c=async()=>{try{i(!0);const e=await _t(u.value);a(e)&&(m.data=e.ip_limit.ip_black.map((e=>({ip:e}))))}finally{h.value=[],i(!1)}};c(),t({init:c});const{keys:h,table:m,columns:y}=L([{type:"selection",width:40},{key:"ip",title:"IP",ellipsis:{tooltip:{width:"trigger"}}},q({width:130,options:e=>[{label:"Del",onClick:()=>{n({title:`Delete [${e.ip}]`,content:"Are you sure to delete this IP?",onConfirm:async({hide:t})=>{await X({site_name:u.value,ip_type:"black",ip:e.ip}),c(),t()}})}}]})]),_=[{key:"del",label:"Please choose del",onBatch:e=>{n({title:"Batch delete",content:"Please be cautious, The selected item will be [delete] after confirmation",onConfirm:async({hide:t})=>{await G({site_name:u.value,ip_type:"black",ips:e.map((e=>e.ip)).join("\n")}),c(),t()}})}}],v=()=>{f.title="Add IP Black List",f.show=!0},f=p("Add IP Black List",{getList:c});return(e,t)=>{const a=s,n=R,i=P,o=k,r=d;return Ae(),Ne("div",null,[$e(o,null,{toolsLeft:De((()=>[$e(a,{type:"primary",onClick:v},{default:De((()=>[Ie("Add IP Black List")])),_:1})])),table:De((()=>[$e(n,{"checked-row-keys":Ee(h),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Be(h)?h.value=e:null),"row-key":"ip",loading:Ee(l),"max-height":440,data:Ee(m).data,columns:Ee(y)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:De((()=>[$e(i,{"checked-row-keys":Ee(h),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Be(h)?h.value=e:null),"row-key":"ip",data:Ee(m).data,options:_},null,8,["checked-row-keys","data"])])),_:1}),$e(r,{show:Ee(f).show,"onUpdate:show":t[2]||(t[2]=e=>Ee(f).show=e),title:Ee(f).title,data:Ee(f).data,width:480,footer:!0,component:zt},null,8,["show","title","data"])])}}}),Nt={class:"p-20px"},qt={class:"w-280px"},Dt={class:"w-280px"},Et={class:"w-280px"},Bt={class:"w-280px"},Kt=qe("li",null,"After the path is protected, you need to enter the account password to access it.",-1),Wt=qe("li",null," For example, if I set the protection directory /test/ , then I need to enter the account password to access http://aaa.com/test/ ",-1),Mt=Se({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=r(),{siteName:l}=V(a),n=e,{isEdit:i,row:o,getList:s}=n.data,p=ze(null),d=Ke({name:c(5),auth_path:"",username:"",password:""}),h={name:{required:!0,message:"Please enter the name",trigger:["blur","input"]},auth_path:{required:!0,message:"Please enter the path",trigger:["blur","input"]},username:{required:!0,message:"Please enter the username",trigger:["blur","input"]},password:{required:!0,message:"Please enter the password",trigger:["blur","input"]}};return i&&o&&(d.name=o.auth_name,d.auth_path=o.auth_path),t({onConfirm:async({hide:e})=>{await(p.value?.validate()),i?await J({...We(d),site_name:l.value}):await Q({...We(d),site_name:l.value}),s?.(),e()}}),(e,t)=>{const a=u,l=at,n=lt,o=tt;return Ae(),Ne("div",Nt,[$e(n,{ref_key:"formRef",ref:p,model:Ee(d),rules:h},{default:De((()=>[$e(l,{label:"Name",path:"name"},{default:De((()=>[qe("div",qt,[$e(a,{value:Ee(d).name,"onUpdate:value":t[0]||(t[0]=e=>Ee(d).name=e),disabled:Ee(i),placeholder:""},null,8,["value","disabled"])])])),_:1}),$e(l,{label:"Path",path:"auth_path"},{default:De((()=>[qe("div",Dt,[$e(a,{value:Ee(d).auth_path,"onUpdate:value":t[1]||(t[1]=e=>Ee(d).auth_path=e),disabled:Ee(i),placeholder:"Enter the path: /text/，/test/api"},null,8,["value","disabled"])])])),_:1}),$e(l,{label:"Username",path:"username"},{default:De((()=>[qe("div",Et,[$e(a,{value:Ee(d).username,"onUpdate:value":t[2]||(t[2]=e=>Ee(d).username=e),placeholder:""},null,8,["value"])])])),_:1}),$e(l,{label:"Password",path:"password"},{default:De((()=>[qe("div",Bt,[$e(a,{value:Ee(d).password,"onUpdate:value":t[3]||(t[3]=e=>Ee(d).password=e),placeholder:""},null,8,["value"])])])),_:1})])),_:1},8,["model"]),$e(o,{class:"mt-4px"},{default:De((()=>[Kt,Wt])),_:1})])}}}),Ht=qe("li",null,"After setting, you need to enter the password to access it.",-1),Ot=qe("li",null," For example, if I set the limit path /test/, then I need to enter the account password to access http://aaa.com/test/ ",-1),Ft=Se({__name:"index",setup(e,{expose:t}){const{loading:l,setLoading:i}=A(),o=r(),{siteName:u}=V(o),c=async()=>{try{i(!0);const e=await _t(u.value);a(e)&&(m.data=e.basic_auth)}finally{i(!1)}};c(),t({init:c});const{keys:h,table:m,columns:y}=L([{key:"auth_name",title:"Name",ellipsis:{tooltip:{width:"trigger"}}},{key:"auth_path",title:"Path",ellipsis:{tooltip:{width:"trigger"}}},q({width:130,options:e=>[{label:"Edit",onClick:()=>{f(e)}},{label:"Del",onClick:()=>{n({title:`Remove HTTP authentication [${e.auth_name}]`,content:"Are you sure to delete this HTTP authentication?",onConfirm:async({hide:t})=>{await Z({site_name:u.value,auth_path:e.auth_path,name:e.auth_name}),c(),t()}})}}]})]),_=p("Add Http Certification",{isEdit:!1,getList:c}),v=()=>{_.data.isEdit=!1,_.title="Add Http Certification",_.show=!0},f=e=>{_.data.row=e,_.data.isEdit=!0,_.title="Edit limit access",_.show=!0};return(e,t)=>{const a=s,n=R,i=k,o=tt,r=d;return Ae(),Ne("div",null,[$e(i,null,{toolsLeft:De((()=>[$e(a,{type:"primary",onClick:v},{default:De((()=>[Ie("Add Http Certification")])),_:1})])),table:De((()=>[$e(n,{"checked-row-keys":Ee(h),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Be(h)?h.value=e:null),"row-key":"name",loading:Ee(l),"max-height":440,data:Ee(m).data,columns:Ee(y)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:De((()=>[])),_:1}),$e(o,{class:"mt-16px"},{default:De((()=>[Ht,Ot])),_:1}),$e(r,{show:Ee(_).show,"onUpdate:show":t[1]||(t[1]=e=>Ee(_).show=e),title:Ee(_).title,data:Ee(_).data,width:480,footer:!0,component:Mt},null,8,["show","title","data"])])}}}),Xt={class:"p-20px"},Gt={key:0},Jt=qe("li",null," Caching is a technology used to speed up website performance and improve user experience ",-1),Qt=qe("li",null,"Resources will be cached when turned on, turn it off if it affects site access",-1),Zt=qe("li",null,"The cache key consists of a hostname, URI, and request parameters",-1),Yt=qe("li",null," Response headers that are ignored by default are: Set-Cookie|Cache-Control|expires|X-Accel-Expires ",-1),ea=qe("li",null," Default static resources cached are: css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map ",-1),ta=Se({__name:"index",setup(e,{expose:t}){const l=r(),{siteName:i}=V(l),o=ze(null),u=Ke({switchValue:!1,inputValue:1,selectValue:"m"}),p=async()=>{const e=await _t(i.value);a(e)&&(u.switchValue=e.proxy_cache.cache_status,e.proxy_cache.expires.length>1&&(u.inputValue=Number(e.proxy_cache.expires.slice(0,-1)),u.selectValue=e.proxy_cache.expires.slice(-1)))};p(),t({init:p});const d={inputValue:{required:!0,validator(e,t){if(!t)return new Error("Please input")},trigger:["input","blur"]}},c=[{label:"Minute",value:"m"},{label:"Hour",value:"h"},{label:"Day",value:"d"}],_=async()=>{await(o.value?.validate());let e={site_name:i.value,cache_status:u.switchValue?1:0,expires:`${u.inputValue}${u.selectValue}`};await Y(e),p()},v=()=>{const e=`Clear cache [${i.value}]`;n({title:e,content:"The cache of the site containing all URLs will be cleared after the cleanup, should I continue?",onConfirm:async()=>{await ee({site_name:i.value})}})};return(e,t)=>{const a=D,l=at,n=h,i=it,r=m,p=s,f=nt,g=y,w=tt;return Ae(),Ne(He,null,[qe("div",Xt,[$e(f,{ref_key:"formRef",ref:o,"label-width":100,model:Ee(u),rules:d,"label-placement":"left"},{default:De((()=>[$e(l,{label:"Cache Switch"},{default:De((()=>[$e(a,{value:Ee(u).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>Ee(u).switchValue=e),_]},null,8,["value"])])),_:1}),Ee(u).switchValue?(Ae(),Ne("div",Gt,[$e(r,null,{default:De((()=>[$e(l,{label:"Cache Time",path:"inputValue"},{default:De((()=>[$e(n,{"show-button":!1,value:Ee(u).inputValue,"onUpdate:value":t[1]||(t[1]=e=>Ee(u).inputValue=e)},null,8,["value"])])),_:1}),$e(l,null,{default:De((()=>[$e(i,{class:"w-90px",value:Ee(u).selectValue,"onUpdate:value":t[2]||(t[2]=e=>Ee(u).selectValue=e),placeholder:"Select",options:c},null,8,["value"])])),_:1})])),_:1}),$e(l,{label:" "},{default:De((()=>[$e(p,{type:"primary",onClick:_},{default:De((()=>[Ie(" Save ")])),_:1})])),_:1})])):Me("",!0)])),_:1},8,["model"]),$e(g),$e(p,{class:"mt-20px",onClick:v},{default:De((()=>[Ie(" Clear cache ")])),_:1})]),$e(w,null,{default:De((()=>[Jt,Qt,Zt,Yt,ea])),_:1})],64)}}}),aa={class:"p-20px"},la={key:0},na=qe("li",null," Used to compress the content of HTTP responses to reduce the amount of data transferred and improve site performance and loading speeds ",-1),ia=qe("li",null," Compression level 1-9, e.g. 1 is the fastest compression speed but lower compression rate; 9 is the slowest compression speed but highest compression rate, it is recommended to default to ",-1),oa=qe("li",null," If gzip is turned on and it affects the normal access to the website, please turn off this feature and the request parameters ",-1),sa=Se({__name:"index",setup(e,{expose:t}){const l=r(),{siteName:n}=V(l),i=async()=>{const e=await _t(n.value);if(a(e)){p.switchValue=e.gzip.gzip_status,p.inputType=e.gzip.gzip_types,p.selectLevel=Number(e.gzip.gzip_comp_level);let t="",a="m";e.gzip.gzip_min_length&&e.gzip.gzip_min_length.length>1&&(t=e.gzip.gzip_min_length.slice(0,-1),a=e.gzip.gzip_min_length.slice(-1)),p.inputValue=Number(t),p.selectLength=a}};i(),t({init:i});const o=ze(null),p=Ke({switchValue:!0,inputType:"",selectLevel:1,selectLength:"m",inputValue:1}),d={inputType:{required:!0,message:"Please input",trigger:"blur"},inputValue:{required:!0,trigger:"blur",validator:(e,t)=>{if(!t)return new Error("Please input")}}},c=[{label:"k",value:"k"},{label:"m",value:"m"}],y=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9}],_=async()=>{await(o.value?.validate());let e={site_name:n.value,gzip_status:p.switchValue?1:0,gzip_min_length:`${p.inputValue}${p.selectLength}`,gzip_comp_level:p.selectLevel,gzip_types:p.inputType};await te(e),i()};return(e,t)=>{const a=D,l=at,n=u,i=it,r=h,v=m,f=s,g=nt,w=tt;return Ae(),Ne("div",aa,[$e(g,{ref_key:"formRef",ref:o,"label-width":150,model:Ee(p),rules:d,"label-placement":"left"},{default:De((()=>[$e(l,{label:"Compressed content"},{default:De((()=>[$e(a,{value:Ee(p).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>Ee(p).switchValue=e),_]},null,8,["value"])])),_:1}),Ee(p).switchValue?(Ae(),Ne("div",la,[$e(l,{label:"Compression type",path:"inputType"},{default:De((()=>[$e(n,{value:Ee(p).inputType,"onUpdate:value":t[1]||(t[1]=e=>Ee(p).inputType=e),type:"textarea",placeholder:"Please input"},null,8,["value"])])),_:1}),$e(l,{label:"Compression level"},{default:De((()=>[$e(i,{value:Ee(p).selectLevel,"onUpdate:value":t[2]||(t[2]=e=>Ee(p).selectLevel=e),placeholder:"Select",options:y},null,8,["value"])])),_:1}),$e(v,null,{default:De((()=>[$e(l,{label:"Minimum length",path:"inputValue"},{default:De((()=>[$e(r,{"show-button":!1,value:Ee(p).inputValue,"onUpdate:value":t[3]||(t[3]=e=>Ee(p).inputValue=e)},null,8,["value"])])),_:1}),$e(l,null,{default:De((()=>[$e(i,{class:"w-90px",value:Ee(p).selectLength,"onUpdate:value":t[4]||(t[4]=e=>Ee(p).selectLength=e),placeholder:"Select",options:c},null,8,["value"])])),_:1})])),_:1}),$e(l,{label:" "},{default:De((()=>[$e(f,{type:"primary",onClick:_},{default:De((()=>[Ie(" Save ")])),_:1})])),_:1})])):Me("",!0)])),_:1},8,["model"]),$e(w,null,{default:De((()=>[na,ia,oa])),_:1})])}}}),ra={class:"p-20px"},ua=Se({__name:"index",setup(e,{expose:t}){const l=r(),{siteName:n}=V(l),i=async()=>{const e=await _t(n.value);a(e)&&(p.selectValue=e.proxy_log.log_type,p.inputValue=e.proxy_log.rsyslog_host,p.unx=e.proxy_log.log_path)};i(),t({init:i});const o=ze(null),p=Ke({inputValue:"",selectValue:"default",unx:""}),d={inputValue:{required:!0,message:"Please input",trigger:"blur"},unx:{required:!0,message:"Please input",trigger:["blur","input"]}},c=[{label:"Default",value:"default"},{label:"No logging",value:"off"},{label:"Specify Log",value:"file"},{label:"Send to remote server",value:"rsyslog"}],h=async()=>{await(o.value?.validate());let e={site_name:n.value,log_type:p.selectValue,log_path:"file"===p.selectValue?p.unx:"rsyslog"===p.selectValue?p.inputValue:""};await ae(e),i()};return(e,t)=>{const a=it,l=at,n=ot,i=u,r=s,m=nt;return Ae(),Ne("div",ra,[$e(m,{ref_key:"formRef",ref:o,"label-width":150,model:Ee(p),rules:d,"label-placement":"left"},{default:De((()=>[$e(l,{label:"Logs"},{default:De((()=>[$e(a,{class:"w-300px",value:Ee(p).selectValue,"onUpdate:value":t[0]||(t[0]=e=>Ee(p).selectValue=e),placeholder:"Select",options:c},null,8,["value"])])),_:1}),"file"==Ee(p).selectValue?(Ae(),Oe(l,{key:0,label:"Visits log",path:"unx"},{default:De((()=>[$e(n,{class:"w-400px","checked-type":["dir"],value:Ee(p).unx,"onUpdate:value":t[1]||(t[1]=e=>Ee(p).unx=e)},null,8,["value"])])),_:1})):Me("",!0),"rsyslog"==Ee(p).selectValue?(Ae(),Oe(l,{key:1,label:"Receive address",path:"inputValue"},{default:De((()=>[$e(i,{class:"w-300px!",value:Ee(p).inputValue,"onUpdate:value":t[2]||(t[2]=e=>Ee(p).inputValue=e),placeholder:"Please input"},null,8,["value"])])),_:1})):Me("",!0),$e(l,{label:" "},{default:De((()=>[$e(r,{type:"primary",onClick:h},{default:De((()=>[Ie(" Save ")])),_:1})])),_:1})])),_:1},8,["model"])])}}}),pa={class:"p-20px"},da=Se({__name:"index",setup(e,{expose:t}){const l=r(),{siteName:n}=V(l),i=async()=>{const e=await _t(n.value);a(e)&&(s.switchValue=e.websocket.websocket_status)};i(),t({init:i});const o=ze(null),s=Ke({switchValue:!1}),u=async()=>{await(o.value?.validate()),le({site_name:n.value,websocket_status:s.switchValue?1:0})};return(e,t)=>{const a=D,l=at,n=nt;return Ae(),Ne("div",pa,[$e(n,{ref_key:"formRef",ref:o,"label-width":150,model:Ee(s),"label-placement":"left"},{default:De((()=>[$e(l,{label:"Websocket Support"},{default:De((()=>[$e(a,{value:Ee(s).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>Ee(s).switchValue=e),u]},null,8,["value"])])),_:1})])),_:1},8,["model"])])}}}),ca=Se({__name:"index",setup(e){const t=ze("cache"),a=[{key:"cache",label:"Cache",component:ta},{key:"compressed",label:"Compressed",component:sa},{key:"black",label:"Black list",component:At},{key:"white",label:"White list",component:jt},{key:"http",label:"Http approve",component:Ft},{key:"log",label:"Logs",component:ua},{key:"websocket",label:"Websocket",component:da}];return(e,l)=>{const n=et;return Ae(),Oe(n,{value:Ee(t),"onUpdate:value":l[0]||(l[0]=e=>Be(t)?t.value=e:null),data:a},null,8,["value"])}}}),ha=qe("div",{class:"mb-10px"}," The main configuration file is not allowed to be modified, if you need to customize the configuration, please go to the custom configuration file above. ",-1),ma=Se({__name:"index",setup(e,{expose:t}){const{data:l}=ft(),n=ze(""),o=ze(""),r=ze({readOnly:!0}),{toClipboard:u}=rt();let p=ze();const d=async()=>{(async()=>{const{message:e}=await ne({site_name:l.name});a(e)&&(o.value=e.site_conf)})()};return Fe((()=>{d()})),t({init:d}),(e,t)=>{const a=s;return Ae(),Ne(He,null,[ha,$e(st,{path:Ee(n),"onUpdate:path":t[0]||(t[0]=e=>Be(n)?n.value=e:null),value:Ee(o),"onUpdate:value":t[1]||(t[1]=e=>Be(o)?o.value=e:null),config:Ee(r),height:530,readOnly:!0,"show-tips":!1},null,8,["path","value","config"]),$e(a,{class:"mt-10px",ref_key:"copyBtn",ref:p,onClick:t[2]||(t[2]=e=>(async e=>{try{await u(e,p.value.$el),i.success("Successfully copied")}catch(t){console.error(t),i.success("Copy failure")}})(Ee(o)))},{default:De((()=>[Ie(" Copy ")])),_:1},512)],64)}}}),ya=qe("li",null," Please check if the input configuration file is correct before saving, incorrect configuration may lead to abnormal access to the site ",-1),_a=qe("li",null,"If you are not familiar with this configuration, do not add a custom configuration!",-1),va={key:0},fa=qe("a",{href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#server",target:"_blank",class:"text-#20a53a"},"click to jump to the",-1),ga={key:1},wa=qe("a",{href:"https://nginx.org/en/docs/http/ngx_http_core_module.html#http",target:"_blank",class:"text-#20a53a"},"click to jump to the",-1),xa=Se({__name:"index",setup(e,{expose:t}){const{data:l}=ft(),n=ze(""),o=ze(""),r=ze("server_block"),u=[{value:"server_block",label:"server"},{value:"http_block",label:"http"}],p=async()=>{await ie({site_name:l.name,conf_type:r.value,body:o.value}),h()},{toClipboard:d}=rt();let c=ze();const h=async()=>{(async()=>{const{message:e}=await ne({site_name:l.name});a(e)&&(o.value=e[r.value])})()};return Fe((()=>{h()})),t({init:h}),(e,t)=>{const a=it,l=m,y=s,_=tt;return Ae(),Ne(He,null,[$e(l,{class:"items-center mb-10px"},{default:De((()=>[Ie(" Select Configuration Block: "),$e(a,{class:"w-200px",value:Ee(r),"onUpdate:value":[t[0]||(t[0]=e=>Be(r)?r.value=e:null),h],options:u},null,8,["value"])])),_:1}),$e(st,{path:Ee(n),"onUpdate:path":t[1]||(t[1]=e=>Be(n)?n.value=e:null),value:Ee(o),"onUpdate:value":t[2]||(t[2]=e=>Be(o)?o.value=e:null),config:u,height:400,"show-tips":!1},null,8,["path","value"]),$e(l,{class:"mt-10px mb-10px"},{default:De((()=>[$e(y,{type:"primary",onClick:p},{default:De((()=>[Ie(" Save ")])),_:1}),$e(y,{ref_key:"copyBtn",ref:c,onClick:t[3]||(t[3]=e=>(async e=>{try{await d(e,c.value.$el),i.success("Successfully copied")}catch(t){console.error(t),i.success("Copy failure")}})(Ee(o)))},{default:De((()=>[Ie(" Copy ")])),_:1},512)])),_:1}),$e(_,null,{default:De((()=>[ya,_a,"server_block"==Ee(r)?(Ae(),Ne("li",va,[Ie(" The official nginx configuration documentation for the server block: "),fa])):(Ae(),Ne("li",ga,[Ie(" The official nginx configuration documentation for the http block: "),wa]))])),_:1})],64)}}}),ba=Se({__name:"index",setup(e){const t=ze("main"),a=[{key:"main",label:"Main Configuration File",component:ma},{key:"customize",label:"Customized Configuration Files",component:xa}];return(e,l)=>{const n=et;return Ae(),Oe(n,{value:Ee(t),"onUpdate:value":l[0]||(l[0]=e=>Be(t)?t.value=e:null),data:a},null,8,["value"])}}}),ka={class:"px-20px py-24px"},Ca={class:"w-120px"},Ua={class:"w-120px"},Pa={class:"w-200px"},La={class:"w-200px"},Ra={class:"w-200px"},Va=qe("li",null," Type: The domain name selected or the path entered will be redirected to the specified URL ",-1),Ta=qe("li",null,"Target URL: Fill in the URL address you need to redirect to",-1),ja=qe("li",null,"Mode: use 301 for permanent redirection and 302 for temporary redirection",-1),$a=qe("li",null," Keep URI parameters: Whether the redirected URL has the sub-path or parameters of the source URL ",-1),Ia=qe("li",null,"Keep URI parameters: http://b.com/1.html ---\x3e http://a.com/1.html",-1),Sa=qe("li",null,"NOT Keep URI parameters: http://b.com/1.html ---\x3e http://a.com",-1),za=Se({__name:"form",props:{data:{}},setup(e,{expose:t}){const l=e,{isEdit:n,siteId:i,siteName:s,row:r,getList:p}=l.data,d=ze(null),c=Ke({redirectname:`${(new Date).valueOf()}`,type:1,holdpath:1,domainorpath:"domain",redirecttype:"301",redirectpath:"",redirectdomain:[],tourl:"http://"}),h={redirectdomain:{trigger:["change"],validator:()=>0!==c.redirectdomain.length||new Error("Please select redirected domain")},redirectpath:{trigger:["blur","input"],validator:()=>""!==c.redirectpath.trim()||new Error("Please input redirect path")},tourl:{trigger:["blur","input"],validator:()=>""!==c.tourl.trim()||new Error("Please input target url")}},y=[{label:"Domain name",value:"domain"},{label:"Path",value:"path"}],_=[{label:"301",value:"301"},{label:"302",value:"302"}],v=ze([]),f=()=>{c.redirectdomain=[],c.redirectpath=""},{loading:g,setLoading:w}=A();return n&&r&&(c.redirectname=r.redirectname,c.type=r.type,c.holdpath=r.holdpath,c.redirecttype=r.redirecttype,c.redirectpath=r.redirectpath,c.domainorpath=r.domainorpath,c.redirectdomain=r.redirectdomain,c.tourl=r.tourl),(async()=>{try{w(!0);const{message:e}=await O({site_name:s,id:i});a(e)&&(v.value=o(e.domain_list)?e.domain_list.map((e=>({label:e.name,value:e.name}))):[])}finally{w(!1)}})(),t({onConfirm:async({hide:e})=>{await(d.value?.validate());const t={...We(c),site_name:s};n?await se(t):await oe(t),p?.(),e()}}),(e,t)=>{const a=D,l=at,n=m,i=it,o=u,s=lt,r=tt;return Ae(),Ne("div",ka,[$e(s,{ref_key:"formRef",ref:d,model:Ee(c),rules:h},{default:De((()=>[$e(n,{size:60},{default:De((()=>[$e(l,{label:"Enable"},{default:De((()=>[$e(a,{value:Ee(c).type,"onUpdate:value":t[0]||(t[0]=e=>Ee(c).type=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1}),$e(l,{label:"Keep URI param","label-width":"120"},{default:De((()=>[$e(a,{value:Ee(c).holdpath,"onUpdate:value":t[1]||(t[1]=e=>Ee(c).holdpath=e),"checked-value":1,"unchecked-value":0},null,8,["value"])])),_:1})])),_:1}),$e(n,{size:30},{default:De((()=>[$e(l,{label:"Type"},{default:De((()=>[qe("div",Ca,[$e(i,{value:Ee(c).domainorpath,"onUpdate:value":[t[2]||(t[2]=e=>Ee(c).domainorpath=e),f],options:y},null,8,["value"])])])),_:1}),$e(l,{label:"Mode","label-width":"70"},{default:De((()=>[qe("div",Ua,[$e(i,{value:Ee(c).redirecttype,"onUpdate:value":t[3]||(t[3]=e=>Ee(c).redirecttype=e),options:_},null,8,["value"])])])),_:1})])),_:1}),"domain"===Ee(c).domainorpath?(Ae(),Oe(l,{key:0,label:"Source",path:"redirectdomain"},{default:De((()=>[qe("div",Pa,[$e(i,{value:Ee(c).redirectdomain,"onUpdate:value":t[4]||(t[4]=e=>Ee(c).redirectdomain=e),multiple:!0,loading:Ee(g),options:Ee(v),"max-tag-count":"responsive",placeholder:"Select domain"},null,8,["value","loading","options"])])])),_:1})):Me("",!0),"path"===Ee(c).domainorpath?(Ae(),Oe(l,{key:1,label:"Redirect path",path:"redirectpath"},{default:De((()=>[qe("div",La,[$e(o,{value:Ee(c).redirectpath,"onUpdate:value":t[5]||(t[5]=e=>Ee(c).redirectpath=e),placeholder:""},null,8,["value"])])])),_:1})):Me("",!0),$e(l,{label:"Target URL",path:"tourl"},{default:De((()=>[qe("div",Ra,[$e(o,{value:Ee(c).tourl,"onUpdate:value":t[6]||(t[6]=e=>Ee(c).tourl=e),placeholder:""},null,8,["value"])])])),_:1})])),_:1},8,["model"]),$e(r,{class:"mt-12px"},{default:De((()=>[Va,Ta,ja,$a,Ia,Sa])),_:1})])}}}),Aa={class:"p-20px"},Na={class:"mt-12px"},qa=qe("li",null," This is the configuration file of the load balancing. Not modify if you do not understand the configuration rules. ",-1),Da=Se({__name:"config",props:{data:{}},emits:["close"],setup(e,{emit:t}){const l=e,{row:n,getList:o}=l.data,r=t,u=ze(""),p=ze(""),d=async()=>{const{message:e}=await ue({path:n.redirect_conf_file,data:u.value,encoding:p.value});a(e)&&i.success(e.msg),o?.(),r("close")};return(async()=>{const{message:e}=await re({path:n.redirect_conf_file});a(e)&&(u.value=e.data,p.value=e.encoding)})(),(e,t)=>{const a=s,l=tt;return Ae(),Ne("div",Aa,[$e(st,{value:Ee(u),"onUpdate:value":t[0]||(t[0]=e=>Be(u)?u.value=e:null),height:350,"show-tips":!0},null,8,["value"]),qe("div",Na,[$e(a,{type:"primary",onClick:d},{default:De((()=>[Ie("Save")])),_:1})]),$e(l,{class:"mt-24px"},{default:De((()=>[qa])),_:1})])}}}),Ea=qe("li",null,"After setting a domain redirect, the 404 redirect for that domain will be invalidated",-1),Ba=Se({__name:"index",setup(e,{expose:t}){const{data:a}=ft(),l=e=>({site_name:e.sitename,redirectname:e.redirectname,tourl:e.tourl,redirectdomain:e.redirectdomain,redirectpath:e.redirectpath,redirecttype:e.redirecttype,domainorpath:e.domainorpath}),{keys:i,table:r,columns:u}=L([{title:"Redirected",key:"name",ellipsis:{tooltip:{width:"trigger"}},render:e=>"domain"===e.domainorpath&&e.redirectdomain.length?e.redirectdomain.join("、"):e.redirectpath},{title:"Type",key:"name",width:90,render:e=>"domain"===e.domainorpath?"Domain":"Approach"},{key:"tourl",title:"Redirects to",width:140},{key:"type",title:"Status",width:100,render:e=>$e(E,{value:e.type,"checked-value":1,"unchecked-value":0,"checked-title":"Running","unchecked-title":"Paused",onClick:async t=>{await se({...l(e),type:t,holdpath:e.holdpath,errorpage:0}),e.type=t}},null)},q({width:120,options:e=>[{label:"Conf",onClick:()=>{g(e)}},{label:"Edit",onClick:()=>{v(e)}},{label:"Del",onClick:()=>{n({title:`Delete redirection [${e.redirectname}]`,content:"Are you sure to delete the redirection?",onConfirm:async({hide:t})=>{await pe({site_name:a.name,redirectname:e.redirectname}),m(),t()}})}}]})]),{loading:c,setLoading:h}=A(),m=async()=>{try{h(!0);const{message:e}=await de({sitename:a.name});r.data=o(e)?e:[]}finally{i.value=[],h(!1)}},y=p("Create redirection",{row:void 0,siteId:a.id,siteName:a.name,isEdit:!1,getList:m}),_=()=>{y.data.row=void 0,y.data.isEdit=!1,y.title="Create redirection",y.show=!0},v=e=>{y.data.row=e,y.data.isEdit=!0,y.title=`Modify redirection [${e.redirectname}]`,y.show=!0},f=p("",{row:void 0,siteName:a.name,getList:m}),g=e=>{f.data.row=e,f.title=`Edit profile [${e.redirectname}]`,f.show=!0};return m(),t({init:m}),(e,t)=>{const a=s,l=R,n=k,o=tt,p=d;return Ae(),Ne("div",null,[$e(n,null,{toolsLeft:De((()=>[$e(a,{type:"primary",onClick:_},{default:De((()=>[Ie("Add redirection")])),_:1})])),table:De((()=>[$e(l,{"checked-row-keys":Ee(i),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Be(i)?i.value=e:null),"row-key":"redirectname",loading:Ee(c),"max-height":440,data:Ee(r).data,columns:Ee(u)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),$e(o,{class:"mt-20px"},{default:De((()=>[Ea])),_:1}),$e(p,{show:Ee(y).show,"onUpdate:show":t[1]||(t[1]=e=>Ee(y).show=e),title:Ee(y).title,data:Ee(y).data,width:660,footer:!0,component:za},null,8,["show","title","data"]),$e(p,{show:Ee(f).show,"onUpdate:show":t[2]||(t[2]=e=>Ee(f).show=e),title:Ee(f).title,data:Ee(f).data,width:580,component:Da},null,8,["show","title","data"])])}}}),Ka={class:"m-15px"},Wa=qe("li",null," Target: you can fill in the site you need to proxy, the target if you choose the URL address must be a normal access to the URL, if you choose UNIX must be a socket file ",-1),Ma=qe("li",null," Send domain name: add the domain name to the request header to pass to the back-end server, the default is the target URL domain name, if not set properly may lead to the proxy can not be accessed properly, for example: ",-1),Ha=qe("li",{class:"list-none!"}," http://192.168.100.20:19888, then just send the domain name keeping $http_host ",-1),Oa=qe("li",{class:"list-none!"}," http://www.bt.cn, then the sending domain should be changed to www.bt.cn ",-1),Fa=qe("li",{class:"list-none!"}," The above examples are only common cases, please refer to the actual situation ",-1),Xa=Se({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=e,{getList:l,siteName:n}=a.data,i=()=>{"2"===p.proxy_type?p.proxy_host="$http_host":p.proxy_host=""},o=e=>{if("2"===p.proxy_type)return void(p.proxy_host="$http_host");let t=e.replace(/^http[s]?:\/\//,"");t=t.replace(/(:|\?|\/|\\)(.*)$/,""),p.proxy_host=t},s=ze(null),r=[{label:"URL address",value:"1"},{label:"Unix address",value:"2"}],p=Ke({proxy_path:"",proxy_type:"1",url:"http://",unx:"",proxy_host:"$http_host",remark:""}),d={proxy_path:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(""===t.trim())return new Error("Please enter proxy catalog")}},url:{required:!0,trigger:["blur","change"],validator:(e,t)=>{if(!t.replace(/^http[s]?:\/\//,""))return new Error("Please input the URL address");let a=t.replace(/^http[s]?:\/\//,"");return a=a.replace(/(:|\?|\/|\\)(.*)$/,""),/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/.test(a)?p.proxy_host="$http_host":p.proxy_host=a,!0}},unx:{required:!0,message:"Please select the website path",trigger:["blur","change"]},proxy_host:{required:!0,message:"Please select the website path",trigger:["blur","change"]}};return Fe((()=>{})),t({onConfirm:async()=>{await(s.value?.validate());let e={site_name:n,remark:p.remark,proxy_type:"1"==p.proxy_type?"http":"unix",proxy_pass:"1"==p.proxy_type?p.url:p.unx,proxy_path:p.proxy_path,proxy_host:p.proxy_host};await ce(e),l?.()}}),(e,t)=>{const a=u,l=at,n=it,c=ot,h=m,y=_,v=lt,f=tt;return Ae(),Ne("div",Ka,[$e(v,{ref_key:"formRef",ref:s,model:Ee(p),rules:d},{default:De((()=>[$e(l,{label:"Proxy path",path:"proxy_path",class:"w-570px"},{default:De((()=>[$e(a,{value:Ee(p).proxy_path,"onUpdate:value":t[0]||(t[0]=e=>Ee(p).proxy_path=e),placeholder:"Please enter proxy path Example:/web"},null,8,["value"])])),_:1}),$e(h,null,{default:De((()=>[$e(l,{label:"Target"},{default:De((()=>[$e(n,{value:Ee(p).proxy_type,"onUpdate:value":[t[1]||(t[1]=e=>Ee(p).proxy_type=e),i],options:r,class:"w-120px"},null,8,["value"])])),_:1}),"1"==Ee(p).proxy_type?(Ae(),Oe(l,{key:0,path:"url",class:"w-310px"},{default:De((()=>[$e(a,{value:Ee(p).url,"onUpdate:value":t[2]||(t[2]=e=>Ee(p).url=e),onInput:o},null,8,["value"])])),_:1})):(Ae(),Oe(l,{key:1,path:"unx",class:"w-310px"},{default:De((()=>[$e(c,{"checked-type":["dir","file"],value:Ee(p).unx,"onUpdate:value":t[3]||(t[3]=e=>Ee(p).unx=e),onChange:o},null,8,["value"])])),_:1}))])),_:1}),$e(l,{label:"Send Host",path:"proxy_host",class:"w-570px"},{default:De((()=>[$e(y,{trigger:"hover"},{trigger:De((()=>[$e(a,{value:Ee(p).proxy_host,"onUpdate:value":t[4]||(t[4]=e=>Ee(p).proxy_host=e)},null,8,["value"])])),default:De((()=>[Ie(" The hostname when the request is forwarded to the back-end server, usually $http_host, if the target URL is a domain name, you need to change it to a domain name ")])),_:1})])),_:1}),$e(l,{label:"remark",class:"w-570px"},{default:De((()=>[$e(a,{value:Ee(p).remark,"onUpdate:value":t[5]||(t[5]=e=>Ee(p).remark=e),placeholder:"Please enter a comment to be empty"},null,8,["value"])])),_:1})])),_:1},8,["model"]),$e(f,{class:"mt-16px"},{default:De((()=>[Wa,Ma,Ha,Oa,Fa])),_:1})])}}}),Ga={class:"p-20px"},Ja={class:"w-280px"},Qa=qe("li",null,"Line by line configuration, multiple IPs please line feed",-1),Za=Se({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=r(),{siteName:l,proxyPath:n}=V(a),i=e,{getList:o}=i.data,s=ze(null),p=Ke({name:""}),d={name:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(s.value?.validate()),await he({site_name:l.value,proxy_path:n.value,ip_type:"white",ips:p.name}),o?.(),e()}}),(e,t)=>{const a=u,l=at,n=lt,i=tt;return Ae(),Ne("div",Ga,[$e(n,{ref_key:"formRef",ref:s,model:Ee(p),rules:d},{default:De((()=>[$e(l,{label:"IP",path:"name"},{default:De((()=>[qe("div",Ja,[$e(a,{type:"textarea",value:Ee(p).name,"onUpdate:value":t[0]||(t[0]=e=>Ee(p).name=e),placeholder:"Please enter the ip address"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),$e(i,{class:"mt-4px"},{default:De((()=>[Qa])),_:1})])}}}),Ya=Se({__name:"index",setup(e,{expose:t}){const{loading:l,setLoading:i}=A(),o=r(),{siteName:u,proxyPath:c}=V(o),h=async()=>{try{i(!0);const e=await vt(u.value,c.value);a(e)&&(y.data=e.ip_limit.ip_white.map((e=>({ip:e}))))}finally{m.value=[],i(!1)}};h(),t({init:h});const{keys:m,table:y,columns:_}=L([{type:"selection",width:40},{key:"ip",title:"IP",ellipsis:{tooltip:{width:"trigger"}}},q({width:130,options:e=>[{label:"Del",onClick:()=>{n({title:`Delete [${e.ip}]`,content:"Are you sure to delete this IP?",onConfirm:async({hide:t})=>{await me({site_name:u.value,proxy_path:c.value,ip_type:"white",ip:e.ip}),h(),t()}})}}]})]),v=[{key:"del",label:"Please choose del",onBatch:e=>{n({title:"Batch delete",content:"Please be cautious, The selected item will be [delete] after confirmation",onConfirm:async({hide:t})=>{await ye({site_name:u.value,proxy_path:c.value,ip_type:"white",ips:e.map((e=>e.ip)).join("\n")}),h(),t()}})}}],f=()=>{g.title="Add IP White List",g.show=!0},g=p("Add IP White List",{getList:h});return(e,t)=>{const a=s,n=R,i=P,o=k,r=d;return Ae(),Ne("div",null,[$e(o,null,{toolsLeft:De((()=>[$e(a,{type:"primary",onClick:f},{default:De((()=>[Ie("Add IP White List")])),_:1})])),table:De((()=>[$e(n,{"checked-row-keys":Ee(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Be(m)?m.value=e:null),"row-key":"ip",loading:Ee(l),"max-height":440,data:Ee(y).data,columns:Ee(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:De((()=>[$e(i,{"checked-row-keys":Ee(m),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Be(m)?m.value=e:null),"row-key":"ip",data:Ee(y).data,options:v},null,8,["checked-row-keys","data"])])),_:1}),$e(r,{show:Ee(g).show,"onUpdate:show":t[2]||(t[2]=e=>Ee(g).show=e),title:Ee(g).title,data:Ee(g).data,width:480,footer:!0,component:Za},null,8,["show","title","data"])])}}}),el={class:"p-20px"},tl={class:"w-280px"},al=qe("li",null,"Line by line configuration, multiple IPs please line feed",-1),ll=Se({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=r(),{siteName:l,proxyPath:n}=V(a),i=e,{getList:o}=i.data,s=ze(null),p=Ke({name:""}),d={name:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(s.value?.validate()),await he({site_name:l.value,proxy_path:n.value,ip_type:"black",ips:p.name}),o?.(),e()}}),(e,t)=>{const a=u,l=at,n=lt,i=tt;return Ae(),Ne("div",el,[$e(n,{ref_key:"formRef",ref:s,model:Ee(p),rules:d},{default:De((()=>[$e(l,{label:"IP",path:"name"},{default:De((()=>[qe("div",tl,[$e(a,{type:"textarea",value:Ee(p).name,"onUpdate:value":t[0]||(t[0]=e=>Ee(p).name=e),placeholder:"Please enter the ip address"},null,8,["value"])])])),_:1})])),_:1},8,["model"]),$e(i,{class:"mt-4px"},{default:De((()=>[al])),_:1})])}}}),nl=Se({__name:"index",setup(e,{expose:t}){const{loading:l,setLoading:i}=A(),o=r(),{siteName:u,proxyPath:c}=V(o),h=async()=>{try{i(!0);const e=await vt(u.value,c.value);a(e)&&(y.data=e.ip_limit.ip_black.map((e=>({ip:e}))))}finally{m.value=[],i(!1)}};h(),t({init:h});const{keys:m,table:y,columns:_}=L([{type:"selection",width:40},{key:"ip",title:"IP",ellipsis:{tooltip:{width:"trigger"}}},q({width:130,options:e=>[{label:"Del",onClick:()=>{n({title:`Delete [${e.ip}]`,content:"Are you sure to delete this IP?",onConfirm:async({hide:t})=>{await me({site_name:u.value,proxy_path:c.value,ip_type:"black",ip:e.ip}),h(),t()}})}}]})]),v=[{key:"del",label:"Please choose del",onBatch:e=>{n({title:"Batch delete",content:"Please be cautious, The selected item will be [delete] after confirmation",onConfirm:async({hide:t})=>{await ye({site_name:u.value,proxy_path:c.value,ip_type:"black",ips:e.map((e=>e.ip)).join("\n")}),h(),t()}})}}],f=()=>{g.title="Add IP Black List",g.show=!0},g=p("Add IP Black List",{getList:h});return(e,t)=>{const a=s,n=R,i=P,o=k,r=d;return Ae(),Ne("div",null,[$e(o,null,{toolsLeft:De((()=>[$e(a,{type:"primary",onClick:f},{default:De((()=>[Ie("Add IP Black List")])),_:1})])),table:De((()=>[$e(n,{"checked-row-keys":Ee(m),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Be(m)?m.value=e:null),"row-key":"ip",loading:Ee(l),"max-height":440,data:Ee(y).data,columns:Ee(_)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:De((()=>[$e(i,{"checked-row-keys":Ee(m),"onUpdate:checkedRowKeys":t[1]||(t[1]=e=>Be(m)?m.value=e:null),"row-key":"ip",data:Ee(y).data,options:v},null,8,["checked-row-keys","data"])])),_:1}),$e(r,{show:Ee(g).show,"onUpdate:show":t[2]||(t[2]=e=>Ee(g).show=e),title:Ee(g).title,data:Ee(g).data,width:480,footer:!0,component:ll},null,8,["show","title","data"])])}}}),il={class:"p-20px"},ol={key:0},sl=qe("li",null," Caching is a technology used to speed up website performance and improve user experience ",-1),rl=qe("li",null,"Resources will be cached when turned on, turn it off if it affects site access",-1),ul=qe("li",null,"The cache key consists of a hostname, URI, and request parameters",-1),pl=qe("li",null," Response headers that are ignored by default are: Set-Cookie|Cache-Control|expires|X-Accel-Expires ",-1),dl=qe("li",null," Default static resources cached are: css|js|jpg|jpeg|gif|png|webp|woff|eot|ttf|svg|ico|css.map|js.map ",-1),cl=Se({__name:"index",setup(e,{expose:t}){const l=r(),{siteName:n,proxyPath:i}=V(l),o=ze(null),u=Ke({switchValue:!1,inputValue:1,selectValue:"m"}),p=async()=>{const e=await vt(n.value,i.value);a(e)&&(u.switchValue=e.proxy_cache.cache_status,e.proxy_cache.expires.length>1&&(u.inputValue=Number(e.proxy_cache.expires.slice(0,-1)),u.selectValue=e.proxy_cache.expires.slice(-1)))};p(),t({init:p});const d={inputValue:{required:!0,validator(e,t){if(!t)return new Error("Please input")},trigger:["input","blur"]}},c=[{label:"Minute",value:"m"},{label:"Hour",value:"h"},{label:"Day",value:"d"}],y=async()=>{await(o.value?.validate());let e={site_name:n.value,proxy_path:i.value,cache_status:u.switchValue?1:0,expires:`${u.inputValue}${u.selectValue}`};await _e(e),p()};return(e,t)=>{const a=D,l=at,n=h,i=it,r=m,p=s,_=nt,v=tt;return Ae(),Ne(He,null,[qe("div",il,[$e(_,{ref_key:"formRef",ref:o,"label-width":100,model:Ee(u),rules:d,"label-placement":"left"},{default:De((()=>[$e(l,{label:"Cache Switch"},{default:De((()=>[$e(a,{value:Ee(u).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>Ee(u).switchValue=e),y]},null,8,["value"])])),_:1}),Ee(u).switchValue?(Ae(),Ne("div",ol,[$e(r,null,{default:De((()=>[$e(l,{label:"Cache Time",path:"inputValue"},{default:De((()=>[$e(n,{"show-button":!1,value:Ee(u).inputValue,"onUpdate:value":t[1]||(t[1]=e=>Ee(u).inputValue=e)},null,8,["value"])])),_:1}),$e(l,null,{default:De((()=>[$e(i,{class:"w-90px",value:Ee(u).selectValue,"onUpdate:value":t[2]||(t[2]=e=>Ee(u).selectValue=e),placeholder:"Select",options:c},null,8,["value"])])),_:1})])),_:1}),$e(l,{label:" "},{default:De((()=>[$e(p,{type:"primary",onClick:y},{default:De((()=>[Ie(" Save ")])),_:1})])),_:1})])):Me("",!0)])),_:1},8,["model"])]),$e(v,null,{default:De((()=>[sl,rl,ul,pl,dl])),_:1})],64)}}}),hl={class:"p-20px"},ml={key:0},yl=qe("li",null," Used to compress the content of HTTP responses to reduce the amount of data transferred and improve site performance and loading speeds ",-1),_l=qe("li",null," Compression level 1-9, e.g. 1 is the fastest compression speed but lower compression rate; 9 is the slowest compression speed but highest compression rate, it is recommended to default to ",-1),vl=qe("li",null," If gzip is turned on and it affects the normal access to the website, please turn off this feature and the request parameters ",-1),fl=Se({__name:"index",setup(e,{expose:t}){const l=r(),{siteName:n,proxyPath:i}=V(l),o=async()=>{const e=await vt(n.value,i.value);if(a(e)){d.switchValue=e.gzip.gzip_status,d.inputType=e.gzip.gzip_types,d.selectLevel=Number(e.gzip.gzip_comp_level);let t="",a="m";e.gzip.gzip_min_length&&e.gzip.gzip_min_length.length>1&&(t=e.gzip.gzip_min_length.slice(0,-1),a=e.gzip.gzip_min_length.slice(-1)),d.inputValue=Number(t),d.selectLength=a}};o(),t({init:o});const p=ze(null),d=Ke({switchValue:!0,inputType:"",selectLevel:1,selectLength:"m",inputValue:1}),c={inputType:{required:!0,message:"Please input",trigger:"blur"},inputValue:{required:!0,trigger:"blur",validator:(e,t)=>{if(!t)return new Error("Please input")}}},y=[{label:"k",value:"k"},{label:"m",value:"m"}],_=[{label:"1",value:1},{label:"2",value:2},{label:"3",value:3},{label:"4",value:4},{label:"5",value:5},{label:"6",value:6},{label:"7",value:7},{label:"8",value:8},{label:"9",value:9}],v=async()=>{await(p.value?.validate());let e={site_name:n.value,proxy_path:i.value,gzip_status:d.switchValue?1:0,gzip_min_length:`${d.inputValue}${d.selectLength}`,gzip_comp_level:d.selectLevel,gzip_types:d.inputType};await ve(e),o()};return(e,t)=>{const a=D,l=at,n=u,i=it,o=h,r=m,f=s,g=nt,w=tt;return Ae(),Ne("div",hl,[$e(g,{ref_key:"formRef",ref:p,"label-width":150,model:Ee(d),rules:c,"label-placement":"left"},{default:De((()=>[$e(l,{label:"Compressed content"},{default:De((()=>[$e(a,{value:Ee(d).switchValue,"onUpdate:value":[t[0]||(t[0]=e=>Ee(d).switchValue=e),v]},null,8,["value"])])),_:1}),Ee(d).switchValue?(Ae(),Ne("div",ml,[$e(l,{label:"Compression type",path:"inputType"},{default:De((()=>[$e(n,{value:Ee(d).inputType,"onUpdate:value":t[1]||(t[1]=e=>Ee(d).inputType=e),type:"textarea",placeholder:"Please input"},null,8,["value"])])),_:1}),$e(l,{label:"Compression level"},{default:De((()=>[$e(i,{value:Ee(d).selectLevel,"onUpdate:value":t[2]||(t[2]=e=>Ee(d).selectLevel=e),placeholder:"Select",options:_},null,8,["value"])])),_:1}),$e(r,null,{default:De((()=>[$e(l,{label:"Minimum length",path:"inputValue"},{default:De((()=>[$e(o,{"show-button":!1,value:Ee(d).inputValue,"onUpdate:value":t[3]||(t[3]=e=>Ee(d).inputValue=e)},null,8,["value"])])),_:1}),$e(l,null,{default:De((()=>[$e(i,{class:"w-90px",value:Ee(d).selectLength,"onUpdate:value":t[4]||(t[4]=e=>Ee(d).selectLength=e),placeholder:"Select",options:y},null,8,["value"])])),_:1})])),_:1}),$e(l,{label:" "},{default:De((()=>[$e(f,{type:"primary",onClick:v},{default:De((()=>[Ie(" Save ")])),_:1})])),_:1})])):Me("",!0)])),_:1},8,["model"]),$e(w,null,{default:De((()=>[yl,_l,vl])),_:1})])}}}),gl={class:"p-20px"},wl=Se({__name:"index",setup(e,{expose:t}){const l=r(),{siteName:n,proxyPath:i}=V(l),o=ze(!1),p=async()=>{const e=await vt(n.value,i.value);a(e)&&(c.proxy_type=e.proxy_type?"http":"unix",c.proxy_pass=e.proxy_pass,c.proxy_host=e.proxy_host,c.proxy_path=e.proxy_path,c.remark=e.remark,o.value=e.global_websocket,c.websocket=e.websocket?.websocket_status,c.proxy_connect_timeout=e.timeout?.proxy_connect_timeout,c.proxy_send_timeout=e.timeout?.proxy_send_timeout,c.proxy_read_timeout=e.timeout?.proxy_read_timeout)};p(),t({init:p});const d=ze(null),c=Ke({proxy_path:"",proxy_pass:"",proxy_host:"",proxy_type:"http",remark:"",websocket:!1,proxy_connect_timeout:"",proxy_send_timeout:"",proxy_read_timeout:""}),h={proxy_path:{required:!0,message:"Please input",trigger:"blur"},proxy_pass:{required:!0,message:"Please input",trigger:"blur"},proxy_host:{required:!0,message:"Please input",trigger:"blur"},proxy_connect_timeout:{required:!0,message:"Please input",trigger:"blur"},proxy_send_timeout:{required:!0,message:"Please input",trigger:"blur"},proxy_read_timeout:{required:!0,message:"Please input",trigger:"blur"}},m=[{label:"URL Address",value:"http"},{label:"UNIX Address",value:"unix"}],y=async()=>{await(d.value?.validate());let e={site_name:n.value,proxy_path:c.proxy_path,proxy_pass:c.proxy_pass,proxy_host:c.proxy_host,proxy_type:c.proxy_type,remark:c.remark,websocket:c.websocket?1:0,proxy_connect_timeout:c.proxy_connect_timeout,proxy_send_timeout:c.proxy_send_timeout,proxy_read_timeout:c.proxy_read_timeout};await fe(e),p()};return(e,t)=>{const a=u,l=at,n=it,i=pt,r=_,p=ut,v=s,f=nt;return Ae(),Ne("div",gl,[$e(f,{ref_key:"formRef",ref:d,"label-width":180,model:Ee(c),rules:h,"label-placement":"left"},{default:De((()=>[$e(l,{label:"Proxy Catalog",path:"proxy_path"},{default:De((()=>[$e(a,{class:"w-400px!",value:Ee(c).proxy_path,"onUpdate:value":t[0]||(t[0]=e=>Ee(c).proxy_path=e),disabled:"",placeholder:"Please input"},null,8,["value"])])),_:1}),$e(l,{label:"Target"},{default:De((()=>[$e(n,{class:"w-200px",value:Ee(c).proxy_type,"onUpdate:value":t[1]||(t[1]=e=>Ee(c).proxy_type=e),placeholder:"Select",options:m},null,8,["value"])])),_:1}),$e(l,{label:" ",path:"proxy_pass"},{default:De((()=>[$e(a,{class:"w-400px!",value:Ee(c).proxy_pass,"onUpdate:value":t[2]||(t[2]=e=>Ee(c).proxy_pass=e),placeholder:"Please input"},null,8,["value"])])),_:1}),$e(l,{label:"Send Host",path:"proxy_host"},{default:De((()=>[$e(a,{class:"w-400px!",value:Ee(c).proxy_host,"onUpdate:value":t[3]||(t[3]=e=>Ee(c).proxy_host=e),placeholder:"Please input"},null,8,["value"])])),_:1}),$e(l,{label:"Remark"},{default:De((()=>[$e(a,{class:"w-400px!",value:Ee(c).remark,"onUpdate:value":t[4]||(t[4]=e=>Ee(c).remark=e),placeholder:"May be empty"},null,8,["value"])])),_:1}),$e(l,{label:"Websocket support"},{default:De((()=>[$e(r,{trigger:"hover"},{trigger:De((()=>[$e(i,{checked:Ee(c).websocket,"onUpdate:checked":t[5]||(t[5]=e=>Ee(c).websocket=e),disabled:Ee(o)},null,8,["checked","disabled"])])),default:De((()=>[Ie(" Global websockets are enabled and are not allowed to be disabled individually ")])),_:1})])),_:1}),$e(l,{label:"Connection Timeout",path:"proxy_connect_timeout"},{default:De((()=>[$e(p,Xe(e.$attrs,{class:"w-400px!",value:Ee(c).proxy_connect_timeout,"onUpdate:value":t[6]||(t[6]=e=>Ee(c).proxy_connect_timeout=e),text:"Sec"}),null,16,["value"])])),_:1}),$e(l,{label:"Backend request timeout",path:"proxy_send_timeout"},{default:De((()=>[$e(p,Xe(e.$attrs,{class:"w-400px!",value:Ee(c).proxy_send_timeout,"onUpdate:value":t[7]||(t[7]=e=>Ee(c).proxy_send_timeout=e),text:"Sec"}),null,16,["value"])])),_:1}),$e(l,{label:"Proxy Response Timeout",path:"proxy_read_timeout"},{default:De((()=>[$e(p,Xe(e.$attrs,{class:"w-400px!",value:Ee(c).proxy_read_timeout,"onUpdate:value":t[8]||(t[8]=e=>Ee(c).proxy_read_timeout=e),text:"Sec"}),null,16,["value"])])),_:1}),$e(l,{label:" "},{default:De((()=>[$e(v,{type:"primary",onClick:y},{default:De((()=>[Ie(" Save ")])),_:1})])),_:1})])),_:1},8,["model"])])}}}),xl={class:"p-20px"},bl=qe("li",null,"Note: For line by line configurations, please end with ;",-1),kl=qe("li",null,[Ie(" Case in point:"),qe("br"),Ie(" Redirect request: return 301 /new-page;"),qe("br"),Ie(" Rewrite URL: rewrite ^/blog/(. *)$ /$1 break;"),qe("br"),Ie(" File upload limit: client_max_body_size 10M;"),qe("br"),Ie(" Handling specific http methods:"),qe("br"),Ie(" limit_except POST {"),qe("br"),Ie(" allow 192.168.1.0/24;"),qe("br"),Ie(" deny all;"),qe("br"),Ie(" }"),qe("br"),Ie(" Limit request rate: limit_rate 100k; ")],-1),Cl=qe("li",null," Please check if the configuration is correct before saving the configuration, incorrect configuration may cause the reverse proxy can not be accessed normally ",-1),Ul=Se({__name:"index",setup(e,{expose:t}){const l=r(),{siteName:n,proxyPath:i}=V(l),o=async()=>{const e=await vt(n.value,i.value);a(e)&&(d.configValue=e.custom_conf)};o(),t({init:o});const p=ze(null),d=Ke({configValue:""}),c={configValue:{required:!0,message:"Please input",trigger:"blur"}},h=async()=>{await(p.value?.validate()),await ge({site_name:n.value,proxy_path:i.value,custom_conf:d.configValue}),o()};return(e,t)=>{const a=u,l=at,n=s,i=nt,o=tt;return Ae(),Ne("div",xl,[$e(i,{ref_key:"formRef",ref:p,"label-width":180,model:Ee(d),rules:c,"label-placement":"left"},{default:De((()=>[$e(l,{label:"Proxy Catalog",path:"configValue"},{default:De((()=>[$e(a,{class:"w-400px!",rows:6,type:"textarea",value:Ee(d).configValue,"onUpdate:value":t[0]||(t[0]=e=>Ee(d).configValue=e),placeholder:'Line by line configuration, please end with, for example：\nproxy_set_header Cookie "cookie_name=cookie_value";\nallow 192.168.1.0/24;\naccess_log /www/wwwlogs/xxx.log;'},null,8,["value"])])),_:1}),$e(l,{label:" "},{default:De((()=>[$e(n,{type:"primary",onClick:h},{default:De((()=>[Ie(" Save ")])),_:1})])),_:1})])),_:1},8,["model"]),$e(o,null,{default:De((()=>[bl,kl,Cl])),_:1})])}}}),Pl={class:"p-20px"},Ll=Se({__name:"form",props:{data:{}},setup(e,{expose:t}){const a=r(),{siteName:l,proxyPath:n}=V(a),i=e,{getList:o}=i.data,s=ze("Default effect:Replace all 'http://www.bt.cn' with 'https://www.bt.cn'."),p=ze(null),d=Ke({oldstr:"",newstr:"",sub_type:[]}),c=()=>{h(d.sub_type)},h=e=>{const t=e.includes("i")?"Case insensitive":"",a=e.includes("o")?"Only replace the first":"",l=e.includes("r")?"Regular expression":"";switch(e.length){case 0:s.value=`Default effect:Replace all ${d.oldstr} with ${d.newstr}`;break;case 1:s.value=`Effect: will ${a?"all":""} ${d.oldstr} with ${d.newstr}，Match ${t||a||l}`;break;case 2:s.value=`Effect: will ${a?"all":""} ${d.oldstr} with ${d.newstr}，Match ${t||a||l} besides ${l||a||t}`;break;case 3:s.value=`Effect: will ${d.oldstr} with ${d.newstr} ，Match ${t}、${a} beside s${l}`}},m={oldstr:{required:!0,message:"Please input",trigger:["blur","input"]}};return t({onConfirm:async({hide:e})=>{await(p.value?.validate());let t={site_name:l.value,proxy_path:n.value,oldstr:d.oldstr,newstr:d.newstr,sub_type:d.sub_type?d.sub_type.join(""):"g"};await we(t),o?.(),e()}}),(e,t)=>{const a=u,l=at,n=pt,i=ct,o=dt,r=lt;return Ae(),Ne("div",Pl,[$e(r,{ref_key:"formRef",ref:p,model:Ee(d),rules:m},{default:De((()=>[$e(l,{label:"Original Keyword",path:"oldstr"},{default:De((()=>[$e(a,{class:"w-280px",value:Ee(d).oldstr,"onUpdate:value":t[0]||(t[0]=e=>Ee(d).oldstr=e),placeholder:"Please enter",onInput:c},null,8,["value"])])),_:1}),$e(l,{label:"Alternative Word"},{default:De((()=>[$e(a,{class:"w-280px",value:Ee(d).newstr,"onUpdate:value":t[1]||(t[1]=e=>Ee(d).newstr=e),placeholder:"Please enter",onInput:c},null,8,["value"])])),_:1}),$e(l,{label:" "},{default:De((()=>[$e(o,{value:Ee(d).sub_type,"onUpdate:value":[t[2]||(t[2]=e=>Ee(d).sub_type=e),h]},{default:De((()=>[$e(i,{"item-style":"display: flex;"},{default:De((()=>[$e(n,{value:"i",label:"Case insensitive"}),$e(n,{value:"o",label:"Only replace the first"}),$e(n,{value:"r",label:"Regular expression"})])),_:1})])),_:1},8,["value"])])),_:1}),$e(l,{label:" "},{default:De((()=>[Ie(Ge(Ee(s)),1)])),_:1})])),_:1},8,["model"])])}}}),Rl=Se({__name:"index",setup(e,{expose:t}){const{loading:l,setLoading:n}=A(),i=r(),{siteName:o,proxyPath:u}=V(i),c=async()=>{try{n(!0);const e=await vt(o.value,u.value);a(e)&&(m.data=e.sub_filter.sub_filter_str)}finally{h.value=[],n(!1)}};c(),t({init:c});const{keys:h,table:m,columns:y}=L([{key:"oldstr",title:"Original Keyword",width:200,ellipsis:{tooltip:{width:"trigger"}}},{key:"newstr",title:"Alternative Word",width:250,ellipsis:{tooltip:{width:"trigger"}}},{key:"sub_type",title:"Rule",ellipsis:{tooltip:{width:"trigger"}}},q({width:130,options:e=>[{label:"Del",onClick:async()=>{await xe({site_name:o.value,proxy_path:u.value,newstr:e.newstr,oldstr:e.oldstr}),c()}}]})]),_=()=>{v.title=`Add Content Replacement [${u.value}]`,v.show=!0},v=p(`Add Content Replacement [${u.value}]`,{getList:c});return(e,t)=>{const a=s,n=R,i=k,o=d;return Ae(),Ne("div",null,[$e(i,null,{toolsLeft:De((()=>[$e(a,{type:"primary",onClick:_},{default:De((()=>[Ie("Add Content Replacement")])),_:1})])),table:De((()=>[$e(n,{"checked-row-keys":Ee(h),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Be(h)?h.value=e:null),"row-key":"ip",loading:Ee(l),"max-height":440,data:Ee(m).data,columns:Ee(y)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),$e(o,{show:Ee(v).show,"onUpdate:show":t[1]||(t[1]=e=>Ee(v).show=e),title:Ee(v).title,data:Ee(v).data,width:600,footer:!0,component:Ll},null,8,["show","title","data"])])}}}),Vl=Se({__name:"index",setup(e){const t=ze("reverse"),a=[{key:"reverse",label:"Reverse proxy",component:wl},{key:"config",label:"Config",component:Ul},{key:"replace",label:"Replacement",component:Rl},{key:"cache",label:"Cache",component:cl},{key:"compressed",label:"Compressed",component:fl},{key:"black",label:"Black list",component:nl},{key:"white",label:"White list",component:Ya}];return(e,l)=>{const n=et;return Ae(),Oe(n,{class:"p-20px",value:Ee(t),"onUpdate:value":l[0]||(l[0]=e=>Be(t)?t.value=e:null),data:a},null,8,["value"])}}}),Tl=Se({__name:"index",setup(e,{expose:t}){const a=r(),{proxyPath:l}=V(a),{data:u}=ft(),{keys:c,table:h,columns:m}=L([{key:"proxy_path",title:"Proxy path",width:100,ellipsis:{tooltip:{width:"trigger"}}},{key:"proxy_pass",title:"Target",width:100,ellipsis:{tooltip:{width:"trigger"}}},B({key:"remark",title:"Remark",width:"8%",onBlur:async(e,t)=>{await be({site_name:u.name,proxy_path:t.proxy_path,remark:e})}}),q({width:120,options:e=>[{label:"Set",onClick:()=>{x(e)}},{label:"Del",onClick:()=>{"/"!==e.proxy_path?n({title:`Delete reverse proxy [${e.proxy_path}]`,content:`Do you really want to remove reverse proxy [${e.proxy_path}]?`,onConfirm:async({hide:t})=>{await ke({site_name:u.name,proxy_path:e.proxy_path}),v(),t()}}):i.error("Root directory cannot be deleted")}}]})]),{loading:y,setLoading:_}=A(),v=async()=>{try{_(!0);const{message:e}=await W({site_name:u.name});h.data=o(e)?e:[]}finally{c.value=[],_(!1)}},f=p("Create reverse proxy",{row:void 0,siteName:u.name,getList:v}),g=()=>{f.data.row=void 0,f.title="Add URL Proxy",f.show=!0},w=p("",{row:void 0,siteName:u.name,getList:v}),x=e=>{l.value=e.proxy_path,w.title=`URL Proxy Setting [${e.proxy_path}]`,w.show=!0};return v(),t({init:v}),(e,t)=>{const a=s,l=R,n=k,i=d;return Ae(),Ne("div",null,[$e(n,null,{toolsLeft:De((()=>[$e(a,{type:"primary",onClick:g},{default:De((()=>[Ie("Add URL Proxy")])),_:1})])),table:De((()=>[$e(l,{"checked-row-keys":Ee(c),"onUpdate:checkedRowKeys":t[0]||(t[0]=e=>Be(c)?c.value=e:null),"row-key":"proxyname",loading:Ee(y),"max-height":440,data:Ee(h).data,columns:Ee(m)},null,8,["checked-row-keys","loading","data","columns"])])),_:1}),$e(i,{show:Ee(f).show,"onUpdate:show":t[1]||(t[1]=e=>Ee(f).show=e),title:Ee(f).title,data:Ee(f).data,width:660,footer:!0,component:Xa},null,8,["show","title","data"]),$e(i,{show:Ee(w).show,"onUpdate:show":t[2]||(t[2]=e=>Ee(w).show=e),title:Ee(w).title,width:800,"min-height":650,component:Vl},null,8,["show","title"])])}}}),jl={class:"pt-8px"},$l={class:"w-300px"},Il={class:"w-300px"},Sl={class:"w-300px"},zl={class:"flex flex-col"},Al=qe("li",null,[Ie(" By default, resources are allowed to be accessed directly, "),qe("br"),Ie(" i.e, requests with empty HTTP_REFERER are not restricted. ")],-1),Nl=qe("li",null," Multiple URL suffixes and domains should be separated by comma (,), such as png,jpeg,zip,js ",-1),ql=qe("li",null,"When hotlink protection is triggered, the 404 status is returned directly",-1),Dl=Se({__name:"index",setup(e,{expose:t}){const{data:l}=ft(),n=ze(null),i=ze(!1),o=Ke({fix:"",domains:"",return_rule:"",status:!1,none:!1}),r={fix:{trigger:["blur","change"],validator:()=>""!==o.fix.trim()||new Error("URL suffix cannot be empty!")},return_rule:{trigger:["blur","change"],validator:()=>""!==o.return_rule.trim()||new Error("Anti-theft chain domain name cannot be empty!")}},p=e=>{e?i.value=!1:(i.value=!0,o.none=!1)},d=async()=>{await(n.value?.validate()),await Ce({id:l.id,name:l.name,fix:o.fix,domains:o.domains.trim().split("\n").join(","),return_rule:o.return_rule,status:o.status,http_status:!!o.none}),c()},c=async()=>{const{message:e}=await Ue({id:l.id,name:l.name});a(e)&&(o.fix=e.fix,o.domains=e.domains.split(",").join("\n"),o.return_rule=e.return_rule,o.status=e.status,o.none=e.http_status)};return c(),t({init:c}),(e,t)=>{const a=u,l=at,c=pt,h=s,m=lt,y=tt;return Ae(),Ne("div",jl,[$e(m,{ref_key:"formRef",ref:n,class:"px-8px",model:Ee(o),rules:r},{default:De((()=>[$e(l,{label:"URL suffix",path:"fix"},{default:De((()=>[qe("div",$l,[$e(a,{value:Ee(o).fix,"onUpdate:value":t[0]||(t[0]=e=>Ee(o).fix=e),placeholder:""},null,8,["value"])])])),_:1}),$e(l,{label:"Access domain"},{default:De((()=>[qe("div",Il,[$e(a,{value:Ee(o).domains,"onUpdate:value":t[1]||(t[1]=e=>Ee(o).domains=e),type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:""},null,8,["value"])])])),_:1}),$e(l,{label:"Response",path:"return_rule"},{default:De((()=>[qe("div",Sl,[$e(a,{value:Ee(o).return_rule,"onUpdate:value":t[2]||(t[2]=e=>Ee(o).return_rule=e),placeholder:""},null,8,["value"])])])),_:1}),$e(l,{label:" "},{default:De((()=>[qe("div",zl,[$e(c,{checked:Ee(o).status,"onUpdate:checked":[t[3]||(t[3]=e=>Ee(o).status=e),p]},{default:De((()=>[Ie(" Enable hotlink protection ")])),_:1},8,["checked"]),$e(c,{checked:Ee(o).none,"onUpdate:checked":t[4]||(t[4]=e=>Ee(o).none=e),class:"mt-16px",disabled:Ee(i)},{default:De((()=>[Ie(" Allow empty HTTP_REFERER requests ")])),_:1},8,["checked","disabled"])])])),_:1}),$e(l,{label:" ","show-feedback":!1},{default:De((()=>[$e(h,{type:"primary",onClick:d},{default:De((()=>[Ie("Save")])),_:1})])),_:1})])),_:1},8,["model"]),$e(y,{class:"mt-20px"},{default:De((()=>[Al,Nl,ql])),_:1})])}}}),El={class:"mb-10px"},Bl=Se({__name:"index",setup(e,{expose:t}){const{data:l}=ft(),n=ze("None"),i=ze(0),{loading:o,setLoading:s}=A(),r=async()=>{try{s(!0);const{message:e}=await Pe({site_name:l.name,type:"access"});a(e)&&(n.value=e.msg?e.msg:"None",i.value=e.size)}finally{s(!1)}};return r(),t({init:r}),(e,t)=>{const a=ht,l=mt;return Ae(),Oe(l,{class:"h-560px",show:Ee(o)},{default:De((()=>[qe("div",El,"Log size: "+Ge(Ee(i)),1),$e(a,{log:Ee(n)},null,8,["log"])])),_:1},8,["show"])}}}),Kl={class:"mb-10px"},Wl=Se({__name:"index",setup(e,{expose:t}){const{data:l}=ft(),n=ze("None"),i=ze(0),{loading:o,setLoading:s}=A(),r=async()=>{try{s(!0);const{message:e}=await Pe({site_name:l.name,type:"error"});a(e)&&(n.value=e.msg?e.msg:"None",i.value=e.size)}finally{s(!1)}};return r(),t({init:r}),(e,t)=>{const a=ht,l=mt;return Ae(),Oe(l,{class:"h-560px",show:Ee(o)},{default:De((()=>[qe("div",Kl,"Log size: "+Ge(Ee(i)),1),$e(a,{log:Ee(n)},null,8,["log"])])),_:1},8,["show"])}}}),Ml=Se({__name:"index",setup(e,{expose:t}){const{config:a}=ft(),l=ze("access"),n=ze(),i=[{key:"access",label:"Access log",component:Bl},{key:"error",label:"Error log",component:Wl}];return l.value=a.subMenu||"access",a.subMenu="",t({init:()=>{l.value="access",Je((()=>{n.value?.init()}))}}),(e,t)=>{const a=et;return Ae(),Oe(a,{value:Ee(l),"onUpdate:value":t[0]||(t[0]=e=>Be(l)?l.value=e:null),ref_key:"tabsRef",ref:n,data:i},null,8,["value"])}}}),Hl=Se({__name:"index",props:{siteInfo:{},config:{}},setup(e){const a=r(),{siteName:l}=V(a),n=Qe((()=>v((()=>t.import("./old-legacy2.js?v=1720690738171")),void 0))),i=e,{siteInfo:o,config:s}=i;l.value=i.siteInfo.name;const u=ze();o&&Te(yt,{data:o,config:s});const p=ze("domain"),d=[{key:"domain",label:"Domain Manager",component:Pt},{key:"proxy_pass",label:"URL Proxy",component:Tl},{key:"config",label:"Config",component:ca},{key:"file",label:"Config File",component:ba},{key:"ssl",label:"SSL",component:n},{key:"redirect",label:"Redirect",component:Ba},{key:"hotlink",label:"Hotlink Protection",component:Dl},{key:"logs",label:"Response log",component:Ml}];return p.value=s.menu||"domain",s.menu="",(e,t)=>{const a=Ve;return Ae(),Oe(a,{value:Ee(p),"onUpdate:value":t[0]||(t[0]=e=>Be(p)?p.value=e:null),ref_key:"tabsRef",ref:u,data:d},null,8,["value"])}}});function Ol({onClick:e}){return{key:"name",title:"Domain",width:"12%",minWidth:120,render:t=>$e(l,{onClick:()=>{e(t)}},{default:()=>[t.name]})}}function Fl({onClick:e}){return{key:"proxy_pass",title:"Proxy Address",minWidth:70,render:t=>$e(l,{onClick:()=>{e(t)}},{default:()=>[t.proxy_pass]})}}function Xl({onClick:e}){return{key:"ssl",title:"SSL",width:"9%",minWidth:100,render:t=>{const{ssl:n}=t;return a(n)?$e(l,{type:n.endtime<0?"error":"primary",onClick:()=>{e(t)}},{default:()=>[n.endtime<0?"Expired":`Exp in ${n.endtime} days`]}):$e(l,{type:"warning",onClick:()=>{e(t)}},{default:()=>[Ie("Not Set")]})}}}function Gl({onClick:e}){return{key:"action",title:"Operation",width:150,align:"right",render:a=>$e(N,{options:[{label:"Stats",onClick:async()=>{await $({source:142}),await I("monitor"),S({name:"monitor",title:"Website statistics-v2",admin:!0})}},{label:"WAF",onClick:()=>{T(a.name)}},{label:"Conf",onClick:()=>{e(a)}},{label:"Del",onClick:()=>{var e;f({title:`Delete reverse proxy project - [${(e=[a])[0].name}]`,width:500,minHeight:72,footer:!0,data:{rows:e},component:Qe((()=>v((()=>t.import("./index-legacy109.js?v=1720690738171")),void 0)))})}}]},null)}}const Jl=qe("span",null,"Support for ngnix servers only, ",-1),Ql={class:"w-860px h-700px"},Zl=Se({__name:"index",setup(e){const n=Qe((()=>v((()=>t.import("./index-legacy110.js?v=1720690738171")),void 0))),i=g(),u=r(),{web:c}=V(i),h=ze(!1),m=p("Add a reverse proxy project"),y=()=>{m.show=!0},_=()=>{W()},T=Ke({show:!1,title:"",siteInfo:null,config:{menu:"",subMenu:""}}),$=(e,t={})=>{T.title=`Site modification [${e.name}] -- Time added [${e.addtime}]`,T.siteInfo=e,T.config=Object.assign({menu:"",subMenu:""},t),T.show=!0},{keys:I,table:S,columns:N}=L([{type:"selection",width:40},Ol({onClick:e=>{$(e)}}),Fl({onClick:e=>{$(e,{menu:"proxy_pass"})}}),Xl({onClick:e=>{$(e,{menu:"ssl"})}}),B({width:"8%",onBlur:async(e,t)=>{await Le({id:t.id,ps:e})}}),Gl({onClick:e=>{$(e)}})]),q=[{key:"Project",label:"Delete Project",onBatch:e=>{f({title:"Batch Delete Items",content:"After batch deleting the selected items, the items will not be restored, should I continue the operation?",width:500,minHeight:72,footer:!0,data:{rows:e},component:Qe((()=>v((()=>t.import("./index-legacy109.js?v=1720690738171")),void 0)))})}}],D=Ke({p:1,limit:10,search:""}),{loading:E,setLoading:K}=A(!0),W=async()=>{try{K(!0);const{message:e}=await Re(D);a(e)?a(e.data)&&(S.data=o(e.data.data)?e.data.data:[],S.total=w(e.data.page)):(S.data=[],S.total=0)}finally{I.value=[],K(!1)}};return Ze((()=>u.isRefresh),(e=>{e&&(i.setRefresh(!1),W())})),(async()=>{try{await i.getConfig(),i.web.setup?(h.value=!0,W()):(h.value=!1,K(!1),j())}catch{K(!1)}})(),(e,t)=>{const a=l,i=s,o=C,r=R,u=P,p=U,h=k,v=d,f=b,g=x;return Ae(),Oe(g,null,{default:De((()=>[$e(f,{install:Ee(c).setup&&"nginx"==Ee(c).type},{desc:De((()=>[Jl,$e(a,{class:"ml-4px",onClick:t[0]||(t[0]=e=>Ee(z)("nginx"))},{default:De((()=>[Ie("Install Nginx")])),_:1})])),default:De((()=>[$e(h,{class:"p-16px",feedback:!0},{toolsLeft:De((()=>[$e(i,{type:"primary",onClick:y},{default:De((()=>[Ie("Add proxy")])),_:1})])),toolsRight:De((()=>[$e(o,{value:Ee(D).search,"onUpdate:value":t[1]||(t[1]=e=>Ee(D).search=e),placeholder:"Domain or Remarks",onSearch:W},null,8,["value"])])),table:De((()=>[$e(r,{"checked-row-keys":Ee(I),"onUpdate:checkedRowKeys":t[2]||(t[2]=e=>Be(I)?I.value=e:null),loading:Ee(E),data:Ee(S).data,columns:Ee(N)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:De((()=>[$e(u,{"checked-row-keys":Ee(I),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>Be(I)?I.value=e:null),data:Ee(S).data,options:q},null,8,["checked-row-keys","data"])])),pageRight:De((()=>[$e(p,{page:Ee(D).p,"onUpdate:page":t[4]||(t[4]=e=>Ee(D).p=e),"page-size":Ee(D).limit,"onUpdate:pageSize":t[5]||(t[5]=e=>Ee(D).limit=e),"item-count":Ee(S).total,"store-key":"site-php-page",onRefresh:W},null,8,["page","page-size","item-count"])])),_:1}),$e(v,{show:Ee(m).show,"onUpdate:show":t[6]||(t[6]=e=>Ee(m).show=e),title:Ee(m).title,width:640,"min-height":400,footer:!0,data:{onRefresh:_},component:Ee(n)},null,8,["show","title","data","component"]),$e(v,{show:Ee(T).show,"onUpdate:show":t[7]||(t[7]=e=>Ee(T).show=e),title:Ee(T).title},{default:De((()=>[qe("div",Ql,[$e(Hl,{"site-info":Ee(T).siteInfo,config:Ee(T).config},null,8,["site-info","config"])])])),_:1},8,["show","title"])])),_:1},8,["install"])])),_:1})}}}),Yl=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"}));e("i",Yl)}}}));
