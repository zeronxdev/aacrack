import{u as t,h as e,df as s,dg as a,B as o,q as i}from"./index.js?v=1720690738171";import{_ as l}from"./index53.js?v=1720690738171";import{_ as r}from"./index.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import{u as d,_ as n}from"./useTableData.js?v=1720690738171";import{s as m}from"./pinia.js?v=1720690738171";import{b as p}from"./useTableColumns.js?v=1720690738171";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang4.js?v=1720690738171";import{P as _,l as c,f as y,k as f,S as h,Z as b,V as j,q as w,W as v,af as k,_ as g}from"./vue.js?v=1720690738171";import{_ as D}from"./form.vue_vue_type_script_setup_true_lang2.js?v=1720690738171";import{u as x}from"./useLoading.js?v=1720690738171";import"./Skeleton.js?v=1720690738171";import"./DataTable.js?v=1720690738171";import"./Checkbox.js?v=1720690738171";import"./Ellipsis.js?v=1720690738171";import"./Select.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./omit.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./index50.js?v=1720690738171";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import"./check.js?v=1720690738171";import"./index121.js?v=1720690738171";const R={class:"p-20px"},B={key:0},C=g("li",null,"Support cloud database",-1),E=g("li",null,"Note 1: Make sure this server has permission to access the database",-1),q=g("li",null," Note 2: Please make sure that the administrator account you fill in has sufficient permissions ",-1),L=c({__name:"index",setup(c){const g=t(),{type:L,remoteList:P}=m(g),S=y({show:!1,title:"Add Remote DB",data:{row:void 0,isEdit:!1}}),T=()=>{S.data.row=void 0,S.data.isEdit=!1,S.title="Add Remote DB",S.show=!0},A=f((()=>P.value.filter((t=>0!==t.id)))),{columns:M}=d([{key:"db_host",title:"DB address"},{key:"db_port",title:"Port"},{key:"db_type",title:"Database type"},{key:"db_user",title:"Username"},{key:"db_password",title:"Password",width:160,render:t=>_(u,{value:t.db_password},null)},{key:"ps",title:"Notes"},p({width:"mysql"===g.type?150:100,options:t=>[{label:"Get DB",show:"mysql"===t.db_type,onClick:()=>{(async t=>{await s(L.value,{sid:t.id}),g.setRefresh(!0)})(t)}},{label:"Edit",onClick:()=>{(t=>{S.data.row=t,S.data.isEdit=!0,S.title="Edit Remote DB",S.show=!0})(t)}},{label:"Del",onClick:()=>{e({title:"Del Remote DB [".concat(t.db_host,"]"),content:"Only delete management information and database records in the panel, not delete remote databases!",onConfirm:async({hide:e})=>{await(async t=>{await a(L.value,{id:t.id}),g.getRemote(),g.setRefresh(!0),g.setDelRemoteId(t.id)})(t),e()}})}}]})]),{loading:N,setLoading:U}=x();return(async()=>{try{U(!0),g.getRemote()}finally{U(!1)}})(),(t,e)=>{const s=o,a=n,d=r,m=l,p=i;return h(),b("div",R,[_(d,null,{toolsLeft:j((()=>[_(s,{type:"primary",onClick:T},{default:j((()=>[w("Add Remote DB")])),_:1})])),table:j((()=>[_(a,{loading:v(N),columns:v(M),data:v(A)},null,8,["loading","columns","data"])])),_:1}),_(m,{class:"mt-24px"},{default:j((()=>["mysql"===v(L)?(h(),b("li",B,"Compatible with MySQL5.5, MariaDB10.1 and above")):k("",!0),C,E,q])),_:1}),_(p,{show:v(S).show,"onUpdate:show":e[0]||(e[0]=t=>v(S).show=t),title:v(S).title,width:460,footer:!0,data:v(S).data,component:D},null,8,["show","title","data"])])}}});export{L as default};
