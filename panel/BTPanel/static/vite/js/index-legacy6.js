System.register(["./index-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy2.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy3.js?v=1720690738171","./useTableData-legacy.js?v=1720690738171","./index-legacy47.js?v=1720690738171","./useLoading-legacy.js?v=1720690738171","./useTableColumns-legacy.js?v=1720690738171","./index-legacy48.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy4.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./hooks-legacy.js?v=1720690738171","./Alert-legacy.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./DataTable-legacy.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./Ellipsis-legacy.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./Tag-legacy.js?v=1720690738171","./Empty-legacy.js?v=1720690738171","./omit-legacy.js?v=1720690738171","./Skeleton-legacy.js?v=1720690738171","./data-legacy.js?v=1720690738171","./php-legacy.js?v=1720690738171","./useAccount-legacy.js?v=1720690738171","./Progress-legacy.js?v=1720690738171","./index-legacy49.js?v=1720690738171","./index-legacy50.js?v=1720690738171"],(function(e,a){"use strict";var t,l,n,s,i,o,d,c,u,r,p,y,_,h,g,b,m,w,x,k,f,D,j,v,C,U,R,W,S,$,B,q,z,L,P,T,A,E,I,K,O,V,X,F,G,H,J,M,N,Q,Y,Z,ee,ae,te,le,ne,se,ie,oe,de,ce;return{setters:[e=>{t=e.e,l=e.u,n=e.g,s=e.h,i=e.s,o=e.t,d=e.i,c=e.j,u=e.k,r=e.m,p=e.n,y=e.o,_=e.l,h=e._,g=e.B,b=e.p,m=e.q,w=e.r,x=e.v},e=>{k=e._},e=>{f=e._,D=e.a},e=>{j=e._},e=>{v=e.u,C=e._},e=>{U=e._},e=>{R=e.u},e=>{W=e.u,S=e.a,$=e.b},e=>{B=e.u,q=e.a,z=e.b,L=e.c,P=e.d,T=e._,A=e.e,E=e.f,I=e.g},e=>{K=e._},e=>{O=e.P,V=e.ad,X=e.X,F=e.q,G=e.s,H=e.l,J=e.r,M=e.ae,N=e.f,Q=e.w,Y=e.S,Z=e.U,ee=e.V,ae=e._,te=e.a3,le=e.W,ne=e.af,se=e.b,ie=e.a1,oe=e.t},e=>{de=e.g},e=>{ce=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const ue=({row:e})=>{if(e.password)return O(K,{value:e.password},null);const{t:a}=V();return O(X("i18n-t"),{keypath:"Database.index_15.0",tag:"span",class:"text-desc cursor-pointer",onClick:()=>{B(e)}},{error:()=>O("span",{class:"text-error"},[a("Database.index_15.1")])})},re=({row:e})=>{let a;const{t:l}=V();return O("div",{class:"flex items-center"},[O(t,{type:e.backup_count>0?"primary":"warning",onClick:()=>{q(e)}},{default:()=>[e.backup_count>0?l("Database.index_17",[e.backup_count]):l("Database.index_18")]}),O("span",{class:"mx-4px"},[F("|")]),O(t,{onClick:()=>{z(e)}},(n=a=l("Public.Btn.Import"),"function"==typeof n||"[object Object]"===Object.prototype.toString.call(n)&&!G(n)?a:{default:()=>[a]}))]);var n},pe={class:"p-16px"},ye={class:"flex items-center flex-wrap"};e("default",H({__name:"index",setup(e){const t=ie((()=>x((()=>a.import("./index-legacy43.js?v=1720690738171")),void 0))),q=ie((()=>x((()=>a.import("./index-legacy44.js?v=1720690738171")),void 0))),z=ie((()=>x((()=>a.import("./index-legacy45.js?v=1720690738171")),void 0))),K=ie((()=>x((()=>a.import("./index-legacy46.js?v=1720690738171")),void 0))),{t:G}=V(),H=l(),_e=J(!1),he=n(),ge=n(G("Database.index_3"),{row:void 0}),be=()=>{he.show=!0},me=()=>{E()},we=e=>{H.phpmyadmin.setup?(e?(ge.data.row=e,ge.title=G("Database.index_8",[e.name])):(ge.data.row=void 0,ge.title=G("Database.index_3")),ge.show=!0):p.error(G("Database.index_9"))},xe=()=>{I()},ke=n(),fe=n(),De=async()=>{await i(H.type,{ids:[]}),qe()},je=M(),ve=()=>{je.push("/crontab")},{keys:Ce,table:Ue,columns:Re}=v([{type:"selection",width:40},{key:"name",title:G("Database.index_12"),width:"10%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"username",title:G("Database.index_13"),width:"10%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"password",title:G("Database.index_14"),width:"12%",minWidth:150,render:e=>O(ue,{row:e},null)},W({type:"database",width:"7%",minWidth:100,callback:()=>{qe()}}),{key:"backup_count",title:G("Database.index_16"),width:"10%",minWidth:130,render:e=>O(re,{row:e},null)},{key:"sid",title:G("Database.index_19"),width:"9%",minWidth:100,ellipsis:{tooltip:!0},render:e=>de(e)},S({minWidth:90,onBlur:async(e,a)=>{await y({id:a.id,ps:e})}}),$({width:"24%",minWidth:220,maxWidth:276,options:e=>[{label:G("Database.index_20"),show:0===e.db_type,onClick:()=>{we(e)}},{label:G("Database.index_21"),onClick:()=>{(e=>{fe.data.row=e,fe.title=G("Database.index_11",[e.name]),fe.show=!0})(e)}},{label:G("Database.index_22"),onClick:()=>{(e=>{ke.data.row=e,ke.title=G("Database.index_10",[e.name]),ke.show=!0})(e)}},{label:G("Database.index_23"),onClick:()=>{B(e)}},{label:G("Public.Btn.Del"),onClick:()=>{L([e])}}]})]),We=[{key:"sync",label:G("Database.index_24"),onBatch:e=>{s({title:G("Database.index_25"),content:G("Database.index_26"),onConfirm:async()=>{await i(H.type,{ids:e.map((e=>e.id))})}})}},{key:"backup",type:"confirm",label:G("Database.index_27"),confirm:{title:G("Database.index_28"),desc:G("Database.index_29"),api:e=>o(H.type,{id:e.id},!1),done:()=>{qe()},columns:[{key:"name",title:G("Database.index_12")}]}},{key:"delete",label:G("Database.index_30"),onBatch:e=>{L(e)}}],{loading:Se,setLoading:$e}=R(!0),Be=N({p:1,limit:20,sid:-1,search:""}),qe=async()=>{try{$e(!0);const{message:e}=await d((()=>{const e={...oe(Be)};return-1===e.sid&&delete e.sid,e})());c(e)?(Ue.data=u(e.data)?e.data:[],Ue.total=r(e.page)):(Ue.data=[],Ue.total=0)}finally{Ce.value=[],$e(!1)}};return Q((()=>H.isRefresh),(e=>{e&&(H.setRefresh(!1),H.delRemoteId===Be.sid&&(Be.sid=-1),qe())})),(async()=>{try{await H.getRemote(),H.install?(_e.value=!0,qe()):(_e.value=!1,_())}finally{$e(!1)}})(),(e,a)=>{const l=h,n=g,s=X("i18n-t"),i=ce,o=b,d=U,c=f,u=C,r=j,p=D,y=k,_=m,x=w;return Y(),Z(le(A),null,{default:ee((()=>[O(x,null,{default:ee((()=>[ae("div",pe,[O(i,{"show-icon":!1,closable:!1},{default:ee((()=>[ae("div",ye,[O(l,{name:"base-info",size:"18",class:"mr-8px"}),O(s,{tag:"span",keypath:"Database.index_7.0"},{btn:ee((()=>[O(n,{class:"px-8px h-24px",size:"small",type:"primary",onClick:ve},{default:ee((()=>[F(te(e.$t("Database.index_7.1")),1)])),_:1})])),_:1})])])),_:1}),O(y,{class:"mt-16px",feedback:!0},{toolsLeft:ee((()=>[O(n,{type:"primary",onClick:be},{default:ee((()=>[F(te(e.$t("Database.index_1")),1)])),_:1}),O(n,{onClick:me},{default:ee((()=>[F(te(e.$t("Database.index_2")),1)])),_:1}),O(n,{onClick:a[0]||(a[0]=e=>we())},{default:ee((()=>[F(te(e.$t("Database.index_3")),1)])),_:1}),O(n,{onClick:xe},{default:ee((()=>[F(te(e.$t("Database.index_4")),1)])),_:1}),O(o,{class:"mx-0!",vertical:""}),O(n,{onClick:De},{default:ee((()=>[F(te(e.$t("Database.index_5")),1)])),_:1}),O(n,{onClick:le(P)},{default:ee((()=>[F(te(e.$t("Database.index_6")),1)])),_:1},8,["onClick"]),le(_e)?(Y(),Z(d,{key:0,"soft-name":"mysql"})):ne("",!0)])),toolsRight:ee((()=>[O(le(T),{ref:"remoteRef",value:le(Be).sid,"onUpdate:value":a[1]||(a[1]=e=>le(Be).sid=e),"store-key":"mysql-remote",onChange:qe},null,8,["value"]),O(c,{value:le(Be).search,"onUpdate:value":a[2]||(a[2]=e=>le(Be).search=e),placeholder:"Database search",width:"180",onSearch:qe},null,8,["value"])])),table:ee((()=>[O(u,{"checked-row-keys":le(Ce),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>se(Ce)?Ce.value=e:null),loading:le(Se),data:le(Ue).data,columns:le(Re)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:ee((()=>[O(r,{"checked-row-keys":le(Ce),"onUpdate:checkedRowKeys":a[4]||(a[4]=e=>se(Ce)?Ce.value=e:null),data:le(Ue).data,options:We},null,8,["checked-row-keys","data"])])),pageRight:ee((()=>[O(p,{page:le(Be).p,"onUpdate:page":a[5]||(a[5]=e=>le(Be).p=e),"page-size":le(Be).limit,"onUpdate:pageSize":a[6]||(a[6]=e=>le(Be).limit=e),"store-key":"database-mysql-page","item-count":le(Ue).total,onRefresh:qe},null,8,["page","page-size","item-count"])])),_:1}),O(_,{show:le(he).show,"onUpdate:show":a[7]||(a[7]=e=>le(he).show=e),title:"Add Database",width:540,"min-height":334,footer:!0,component:le(t)},null,8,["show","component"]),O(_,{show:le(ge).show,"onUpdate:show":a[8]||(a[8]=e=>le(ge).show=e),title:le(ge).title,data:le(ge).data,width:740,height:580,component:le(q)},null,8,["show","title","data","component"]),O(_,{show:le(fe).show,"onUpdate:show":a[9]||(a[9]=e=>le(fe).show=e),data:le(fe).data,title:le(fe).title,width:480,"min-height":132,footer:!0,component:le(K)},null,8,["show","data","title","component"]),O(_,{show:le(ke).show,"onUpdate:show":a[10]||(a[10]=e=>le(ke).show=e),data:le(ke).data,title:le(ke).title,width:870,"min-height":359,component:le(z)},null,8,["show","data","title","component"])])])),_:1})])),_:1})}}}))}}}));
