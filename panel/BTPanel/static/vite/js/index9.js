const __vite__fileDeps=["js/index54.js?v=1720690738171","js/index53.js?v=1720690738171","js/index.js?v=1720690738171","js/vue.js?v=1720690738171","js/pinia.js?v=1720690738171","css/index29.css?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171","js/Select.js?v=1720690738171","js/Tag.js?v=1720690738171","js/Empty.js?v=1720690738171","js/InputGroupLabel.js?v=1720690738171","js/InputGroup.js?v=1720690738171","js/index55.js?v=1720690738171","js/index.vue_vue_type_script_setup_true_lang.js?v=1720690738171","js/useTableColumns.js?v=1720690738171","js/Progress.js?v=1720690738171","css/useTableColumns.css?v=1720690738171","js/useTableData.js?v=1720690738171","js/Skeleton.js?v=1720690738171","js/DataTable.js?v=1720690738171","js/Checkbox.js?v=1720690738171","js/Ellipsis.js?v=1720690738171","js/omit.js?v=1720690738171","js/useLoading.js?v=1720690738171","js/index56.js?v=1720690738171","css/index18.css?v=1720690738171"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{n as e,_ as a,u as t,g as s,C as i,h as l,D as d,E as o,k as n,F as r,j as u,m as c,l as m,B as p,p as h,G as _,q as y,r as w,v as f}from"./index.js?v=1720690738171";import{_ as x}from"./index.vue_vue_type_script_setup_true_lang.js?v=1720690738171";import{_ as v,a as b}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1720690738171";import{_ as g}from"./index.vue_vue_type_script_setup_true_lang3.js?v=1720690738171";import{u as k,_ as j}from"./useTableData.js?v=1720690738171";import{_ as C}from"./index57.js?v=1720690738171";import{u as R}from"./useLoading.js?v=1720690738171";import{b as D}from"./useTableColumns.js?v=1720690738171";import{g as E,_ as L,e as U}from"./index48.js?v=1720690738171";import{u as I}from"./index50.js?v=1720690738171";import{l as T,S as A,Z as K,_ as S,P,V as B,q as W,a3 as z,r as V,H as O,f as q,w as F,U as H,W as G,b as N,ag as Z,F as J,af as M,a1 as Q,t as X}from"./vue.js?v=1720690738171";import{_ as Y}from"./Ellipsis.js?v=1720690738171";import{c as $}from"./capitalize.js?v=1720690738171";import{N as ee}from"./Tabs.js?v=1720690738171";import"./pinia.js?v=1720690738171";import"./DataTable.js?v=1720690738171";import"./Checkbox.js?v=1720690738171";import"./Select.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";import"./omit.js?v=1720690738171";import"./Skeleton.js?v=1720690738171";import"./Progress.js?v=1720690738171";import"./index49.js?v=1720690738171";import"./useAccount.js?v=1720690738171";const ae={class:"flex"},te={class:"w-0 flex-1 flex items-center"},se={style:{minWidth:0}},ie=T({__name:"index",props:{value:{default:""}},setup(t){const s=t,{toClipboard:i}=I(),l=async()=>{try{await i("".concat(s.value)),e.success("Successfully copied")}catch(a){e.success("Copy failure")}};return(e,t)=>{const s=Y,i=a;return A(),K("div",ae,[S("div",te,[S("div",se,[P(s,{class:"max-w-full",tooltip:{width:"trigger",scrollable:!0,contentStyle:{maxHeight:"360px",overflow:"auto"}}},{default:B((()=>[W(z(e.value),1)])),_:1})]),S("button",{class:"reset mx-8px text-15px cursor-pointer text-#333",title:"Copy",onClick:l},[P(i,{name:"common-copy"})])])])}}});const le={class:"p-16px"},de={class:"flex flex-wrap justify-between mb-12px"},oe={class:"flex items-center text-warning"},ne=S("span",{class:"ml-4px"},"All current action items are associated with",-1),re=S("div",null,null,-1),ue=T({__name:"index",setup(e){const I=Q((()=>f((()=>import("./index54.js?v=1720690738171")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])))),T=Q((()=>f((()=>import("./index55.js?v=1720690738171")),__vite__mapDeps([12,13,14,2,3,4,5,15,16,17,18,19,20,21,7,8,9,22,23])))),z=Q((()=>f((()=>import("./index56.js?v=1720690738171")),__vite__mapDeps([24,6,3,2,4,5,7,8,9,20,25])))),Y=t(),ae=V(null),te=O([]),se=s("",{row:void 0,sid:null,dbIdx:0,isEdit:!1}),ue=()=>{se.data.dbIdx=_e.db_idx,se.data.row=void 0,se.data.sid=ae.value,se.data.isEdit=!1,se.title="Add Key",se.show=!0},ce=s("Redis Backup list",{sid:null}),me=()=>{ce.data.sid=ae.value,ce.show=!0},pe=s("Example Clear database",{sid:null,databaseList:[]}),he=()=>{pe.data.sid=ae.value,pe.data.databaseList=te.value,pe.show=!0},_e=q({db_idx:-1,db_type:0,p:1,limit:20,search:""}),{keys:ye,table:we,columns:fe}=k([{type:"selection",width:40},{key:"name",title:"Key",width:"20%",minWidth:120,ellipsis:{tooltip:{width:"trigger"}}},{key:"val",title:"Value",render:e=>P(ie,{value:e.val},null)},{key:"type",title:"Data type",width:"10%",minWidth:100,render:e=>$(e.type)},{key:"len",title:"Data length",width:"10%",minWidth:100},{key:"endtime",title:"Term of validity",width:"10%",minWidth:100,render:e=>0===e.endtime?"Permanent":i(e.endtime)},D({width:100,options:e=>[{label:"Edit",onClick:()=>{(e=>{se.data.dbIdx=_e.db_idx,se.data.row=e,se.data.sid=ae.value,se.data.isEdit=!0,se.title="Edit Key [".concat(e.name,"]"),se.show=!0})(e)}},{label:"Del",onClick:()=>{l({title:"Delete the key value",content:"Do you really want to delete [".concat(e.name,"]?"),onConfirm:async({hide:a})=>{null!==ae.value&&-1!==_e.db_idx&&(await d({sid:ae.value,key:e.name,db_idx:_e.db_idx}),1===we.data.length&&(_e.db_idx=-1),je(),a())}})}}]})]),xe=[{key:"del",type:"confirm",label:"Please choose del",confirm:{title:"Batch delete Key",desc:"Delete selected keys in batches. Do you want to continue?",columns:[{key:"name",title:"Key",ellipsis:{tooltip:{width:"trigger"}}}],api:async e=>{null!==ae.value&&-1!==_e.db_idx&&await d({sid:ae.value,key:e.name,db_idx:_e.db_idx},!1)},done:e=>{we.total===e.length&&(_e.db_idx=-1),je()}}}],ve=async()=>{if(null===ae.value)return;const{message:e}=await o({sid:ae.value});n(e)&&e.length>0?(te.value=e,-1===_e.db_idx&&(_e.db_idx=e[0].id)):(te.value=[],we.data=[],we.total=0,_e.db_idx=-1)},{loading:be,setLoading:ge}=R(),ke=async()=>{try{ge(!0);const e=ae.value;if(null===e)return;if(te.value.length<=0)return;if(-1===_e.db_idx)return;const{message:a}=await r({sid:e,...X(_e)});u(a)?(we.data=n(a.data)?a.data:[],we.total=c(a.page)):(we.data=[],we.total=0)}finally{ye.value=[],ge(!1)}},je=async()=>{await ve(),await ke()};F((()=>Y.isRefresh),(e=>{e&&(Y.setRefresh(!1),-1!==Y.addRedisId&&Y.addRedisId!==_e.db_idx&&(_e.db_idx=Y.addRedisId,Y.setAddRedisId(-1)),je())}));return(async()=>{await Y.getRemote(),Y.install?(Y.remoteList.length>0&&(ae.value=Y.remoteList[0].id),await ve(),await ke()):m()})(),(e,t)=>{const s=p,i=h,l=_,d=a,o=ee,n=C,r=v,u=j,c=g,m=b,f=x,k=y,R=w;return A(),H(G(U),null,{default:B((()=>[P(R,null,{default:B((()=>[S("div",le,[S("div",de,[P(l,{class:"items-center"},{default:B((()=>[P(s,{type:"primary",onClick:ue},{default:B((()=>[W("Add Key")])),_:1}),P(s,{onClick:G(E)},{default:B((()=>[W("Remote DB")])),_:1},8,["onClick"]),P(s,{onClick:me},{default:B((()=>[W("Backup list")])),_:1}),P(i,{class:"mx-0!",vertical:""}),P(s,{onClick:he},{default:B((()=>[W("Clear DB")])),_:1})])),_:1}),P(l,{class:"items-center"},{default:B((()=>[S("div",oe,[P(d,{name:"base-info",size:"14"}),ne]),P(G(L),{value:G(ae),"onUpdate:value":t[0]||(t[0]=e=>N(ae)?ae.value=e:null),all:!1,"store-key":"database-redis-page",onChange:ve},null,8,["value"])])),_:1})]),G(te).length>0?(A(),H(n,{key:0,value:G(_e).db_idx,"onUpdate:value":[t[1]||(t[1]=e=>G(_e).db_idx=e),ke]},{default:B((()=>[(A(!0),K(J,null,Z(G(te),(e=>(A(),H(o,{key:e.id,name:e.id,tab:"".concat(e.name,"(").concat(e.keynum,")")},null,8,["name","tab"])))),128))])),_:1},8,["value"])):M("",!0),P(f,null,{toolsLeft:B((()=>[re])),toolsRight:B((()=>[P(r,{value:G(_e).search,"onUpdate:value":t[2]||(t[2]=e=>G(_e).search=e),placeholder:"Search key",onSearch:ke},null,8,["value"])])),table:B((()=>[P(u,{"checked-row-keys":G(ye),"onUpdate:checkedRowKeys":t[3]||(t[3]=e=>N(ye)?ye.value=e:null),"row-key":"name",loading:G(be),data:G(we).data,columns:G(fe)},null,8,["checked-row-keys","loading","data","columns"])])),pageLeft:B((()=>[P(c,{"checked-row-keys":G(ye),"onUpdate:checkedRowKeys":t[4]||(t[4]=e=>N(ye)?ye.value=e:null),"row-key":"name",data:G(we).data,options:xe},null,8,["checked-row-keys","data"])])),pageRight:B((()=>[P(m,{page:G(_e).p,"onUpdate:page":t[5]||(t[5]=e=>G(_e).p=e),"page-size":G(_e).limit,"onUpdate:pageSize":t[6]||(t[6]=e=>G(_e).limit=e),"store-key":"database-redis-page","item-count":G(we).total,onRefresh:ke},null,8,["page","page-size","item-count"])])),_:1}),P(k,{show:G(se).show,"onUpdate:show":t[7]||(t[7]=e=>G(se).show=e),title:G(se).title,width:420,"min-height":340,footer:!0,data:G(se).data,component:G(I)},null,8,["show","title","data","component"]),P(k,{show:G(ce).show,"onUpdate:show":t[8]||(t[8]=e=>G(ce).show=e),title:G(ce).title,width:920,"min-height":156,footer:!1,data:G(ce).data,component:G(T)},null,8,["show","title","data","component"]),P(k,{show:G(pe).show,"onUpdate:show":t[9]||(t[9]=e=>G(pe).show=e),title:G(pe).title,width:420,"min-height":240,footer:!0,data:G(pe).data,component:G(z)},null,8,["show","title","data","component"])])])),_:1})])),_:1})}}});export{ue as default};
