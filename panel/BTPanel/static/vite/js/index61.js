import{_ as s,a as e}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1720690738171";import{s as a}from"./pinia.js?v=1720690738171";import{u as t,dl as r,n as o}from"./index.js?v=1720690738171";import{l,r as i,f as n,k as p,S as u,Z as d,P as m,V as c,_ as v,W as f}from"./vue.js?v=1720690738171";import{_}from"./Select.js?v=1720690738171";import"./Tag.js?v=1720690738171";import"./Empty.js?v=1720690738171";const x={class:"px-20px pt-24px pb-8px"},h={class:"w-260px"},j=l({__name:"index",setup(l,{expose:j}){const g=t(),{remoteList:w}=a(g),y=i(null),b=n({sid:w.value.length>0?w.value[0].id:null}),E=p((()=>w.value.map((s=>({label:"".concat(s.ps||s.db_host," (").concat(s.db_host,")"),value:s.id}))))),k={sid:{trigger:"change",validator:(s,e)=>null!==e||new Error("请选择服务器位置")}};return j({onConfirm:async({hide:s})=>{var e;try{await(null==(e=y.value)?void 0:e.validate());const a=(()=>{const{sid:s}=b;if(null===s)throw o.error("请选择远程服务器"),new Error("请选择远程服务器");return{sid:s}})();await r(g.type,a),g.setRefresh(!0),s()}catch(a){console.error(a)}}}),(a,t)=>{const r=_,o=s,l=e;return u(),d("div",x,[m(l,{ref_key:"formRef",ref:y,model:f(b),rules:k},{default:c((()=>[m(o,{label:"Position",path:"sid"},{default:c((()=>[v("div",h,[m(r,{value:f(b).sid,"onUpdate:value":t[0]||(t[0]=s=>f(b).sid=s),options:f(E)},null,8,["value","options"])])])),_:1})])),_:1},8,["model"])])}}});export{j as default};
