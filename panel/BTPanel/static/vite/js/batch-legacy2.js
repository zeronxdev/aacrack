System.register(["./index-legacy53.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1720690738171","./index-legacy.js?v=1720690738171","./useLoading-legacy.js?v=1720690738171","./site-legacy2.js?v=1720690738171","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1720690738171","./vue-legacy.js?v=1720690738171","./Select-legacy.js?v=1720690738171","./pinia-legacy.js?v=1720690738171","./Progress-legacy.js?v=1720690738171","./DataTable-legacy.js?v=1720690738171","./Checkbox-legacy.js?v=1720690738171","./Ellipsis-legacy.js?v=1720690738171","./Empty-legacy.js?v=1720690738171","./omit-legacy.js?v=1720690738171","./Tag-legacy.js?v=1720690738171"],(function(e,s){"use strict";var l,t,n,a,r,i,o,c,u,d,g,p,v,y,m,h,_,j,f,P,w,b;return{setters:[e=>{l=e._},e=>{t=e._,n=e.a},e=>{a=e.cv,r=e.k,i=e.j,o=e.H,c=e.n},e=>{u=e.u},e=>{d=e.ai,g=e.b2},e=>{p=e._},e=>{v=e.l,y=e.f,m=e.r,h=e.S,_=e.Z,j=e.P,f=e.V,P=e._,w=e.W},e=>{b=e._},null,null,null,null,null,null,null,null],execute:function(){const s={class:"p-20px"},x={class:"w-200px"},H=P("li",null,"Please select the version according to your program requirements.",-1),S=P("li",null," If not necessary, please try not to use PHP 5.2, which will reduce your server security. ",-1),q=P("li",null," PHP 7 does not support mysql extension, mysqli and mysql_pdo will be installed by default. ",-1);e("default",v({__name:"batch",props:{data:{}},setup(e,{expose:v}){const E=e,{rows:C}=E.data,L=a(),k=y({version:null}),I={version:{trigger:"change",validator:()=>null!==k.version||new Error("Please select the PHP version")}},M=m([]),{loading:O,setLoading:T}=u();(async()=>{try{T(!0);const{message:e}=await d();r(e)&&e.length>0?(M.value=e.map((e=>({label:e.name,value:e.version}))),k.version=e[0].version):(k.version=null,M.value=[])}finally{T(!1)}})();const B=()=>{const{version:e}=k;if(null===e)throw c.error("Please select the PHP-CLI version"),new Error("Please select the PHP-CLI version");return{version:e,sites_id:C.map((e=>e.id)).join(",")}};return v({onConfirm:async({hide:e})=>{const{message:s}=await g(B());L.setRefresh(!0),i(s)&&(e=>{const{success:s,error:l}=e,t=[];s.forEach((e=>{const s=C.find((s=>s.name===e));s&&t.push({name:s.name,batchStatus:"success",reqMsg:"Operation succeeded!"})})),Object.entries(l).forEach((([e,s])=>{const l=C.find((s=>s.name===e));l&&t.push({name:l.name,batchStatus:"error",reqMsg:s})})),o({title:"Batch set php version",width:440,footer:!0,component:p,data:{title:"Set php version",data:t,status:"done",columns:[{key:"name",title:"Site name",ellipsis:{tooltip:{width:"trigger"}}}]}})})(s),e()}}),(e,a)=>{const r=b,i=t,o=n,c=l;return h(),_("div",s,[j(o,{model:w(k),rules:I},{default:f((()=>[j(i,{label:"PHP version",path:"version"},{default:f((()=>[P("div",x,[j(r,{value:w(k).version,"onUpdate:value":a[0]||(a[0]=e=>w(k).version=e),loading:w(O),options:w(M)},null,8,["value","loading","options"])])])),_:1})])),_:1},8,["model"]),j(c,{class:"mt-8px"},{default:f((()=>[H,S,q])),_:1})])}}}))}}}));
